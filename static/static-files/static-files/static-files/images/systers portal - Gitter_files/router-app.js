webpackJsonp([19],[function(t,e,n){"use strict";n(28);var i=n(16),o=n(2),r=n(5),a=n(12),s=n(62),l=n(37),c=n(17),u=n(38),h=n(3),d=n(18),f=n(4),p=n(39),m=n(40);n(32),n(50),n(19),n(20),n(79),n(21),n(34),n(22),n(23),n(51);var g=function(t){return{show:function(){t.removeClass("hide")},hide:function(){t.addClass("hide")}}};d(function(){function t(t,e,n){t!=window.history.state&&(b.setRoomName(e),window.history.pushState(t,e,n),i.trigger("track",n))}function e(t){var e,n=window.location.hash;o.setTroupeId(void 0),e=n&&"#"!==n?n:"#initial","/"!==t.charAt(0)&&(t="/"+t),m(function(){document.querySelector("#content-frame").contentWindow.location.replace(t+e)})}function d(t){w.contentWindow.postMessage(JSON.stringify(t),o.env("basePath"))}function v(t,e,n,i){var o=a.once(function(){t.off(e,o),n.apply(i,arguments)});return o._callback=n,t.once(e,o)}var y=g(f(".loading-frame")),w=document.getElementById("content-frame"),b=new c;if(y.show(),w.addEventListener("load",y.hide,!1),i.on("chatframe:loaded",y.hide),window.location.hash){var _=w.src.split("#")[0];w.src=_+window.location.hash}n(24).installLinkHandler(),window.history.replaceState(w.src,"",window.location.href),window.onpopstate=function(t){var n=t.state;n&&(e(n),i.trigger("track",window.location.pathname+window.location.hash))};var x=new s({}),k=l.troupes;k.on("remove",function(n){if(n.id==o.getTroupeId()){var i=o.user().get("username"),r="/"+i,a=r+"/~home";t(a,i,r),e(a)}}),window.gitterLoader=function(t){var e=t.replace(/^\//,"");i.trigger("navigation",t,"chat",e)},i.on("navigation",function(n,i,o){h.debug("navigation:",n);var r=p.parse(n),a=r.pathname+"/~"+i+r.search;return r.pathname===window.location.pathname?(t(a,o,n),void d({type:"permalink.navigate",query:p.parseSearch(r.search)})):(y.show(),t(a,o,n),void e(a))}),window.addEventListener("message",function(e){if(h.debug("rapp: window message: ",e.data),e.origin!==o.env("basePath"))return void h.info("rapp: Ignoring message from "+e.origin);var n;try{n=JSON.parse(e.data)}catch(r){return}h.info("rapp: Received message ",n);var a=function(t){var e="chat";t.event&&t.event.origin&&(e=t.event.origin),t.event={origin:e,preventDefault:function(){h.warn("rapp: could not call preventDefault() because the event comes from the `"+this.origin+"` frame, it must be called from the original frame")},stopPropagation:function(){h.warn("rapp: could not call stopPropagation() because the event comes from the `"+this.origin+"` frame, it must be called from the original frame")},stopImmediatePropagation:function(){h.warn("rapp: could not call stopImmediatePropagation() because the event comes from the `"+this.origin+"` frame, it must be called from the original frame")}}};switch(n.type){case"context.troupeId":o.setTroupeId(n.troupeId),b.setRoomName(n.name),i.trigger("context.troupeId",n.troupeId);break;case"navigation":i.trigger("navigation",n.url,n.urlType,n.title);break;case"route":window.location.hash="#"+n.hash;break;case"unreadItemsCount":var s=n.count,l=n.troupeId;l!==o.getTroupeId()&&h.warn("troupeId mismatch in unreadItemsCount");var c={unreadItems:s};0===s&&(c.mentions=0),h.info("rapp: Received unread count message ",{troupeId:l,update:c}),k.patch(l,c);break;case"realtime.testConnection":var d=n.reason;u.testConnection("chat."+d);break;case"chat.edit.hide":case"chat.edit.show":case"ajaxError":i.trigger(n.type);break;case"keyboard":a(n),i.trigger("keyboard."+n.name,n.event,n.handler),i.trigger("keyboard.all",n.name,n.event,n.handler);break;case"focus":a(n),i.trigger("focus.request."+n.focus,n.event);break;case"chatframe:loaded":i.trigger("chatframe:loaded");break;case"permalink.requested":var f=n.url+"?at="+n.id,p=n.url+"/~"+n.permalinkType+"?at="+n.id,m=n.url.substring(1);t(p,m,f)}},!1),i.on("keyboard.tab.next keyboard.tab.prev",function(t){t.origin||t.preventDefault()}),i.on("focus.request.chat.in",function(t){d({type:"focus",focus:"in",event:t})}),i.on("focus.request.chat.out",function(t){d({type:"focus",focus:"out",event:t})}),i.on("keyboard.all",function(t,e,n){if(!e.origin||"chat"!==e.origin){var i={type:"keyboard",name:t,event:{origin:e.origin},handler:n};d(i)}});var T=r.Router.extend({routes:{"":"hideModal",createcustomroom:"createcustomroom","createcustomroom/:name":"createcustomroom",createreporoom:"createreporoom",createroom:"createroom","confirm/*uri":"confirmRoom"},hideModal:function(){x.dialogRegion.close()},createroom:function(){n.e(20,function(){var t=n(67);x.dialogRegion.show(new t.Modal)})},createcustomroom:function(t){function e(t){return t.get("oneToOne")===!0?o.user().get("username"):"REPO"===t.get("githubType")||"ORG"===t.get("githubType")?t.get("uri"):t.get("uri").split("/").slice(0,-1).join("/")}function i(t){n.e(21,function(){var e=n(68);x.dialogRegion.show(new e.Modal(t))})}var r=window.location.pathname.split("/").slice(1).join("/");r===o.user().get("username")&&i({initialParent:r,roomName:t});var a=k.findWhere({url:"/"+r});return a?(r=e(a),void i({initialParent:r,roomName:t})):void v(k,"reset sync",function(){a=k.findWhere({url:"/"+r}),a?(r=e(a),i({initialParent:r,roomName:t})):i({roomName:t})})},createreporoom:function(){n.e(22,function(){var t=n(69);x.dialogRegion.show(new t.Modal)})},confirmRoom:function(t){n.e(23,function(){var e=n(70);x.dialogRegion.show(new e.Modal({uri:t}))})}});new T,r.history.start(),o.popEvent("new_user_signup")&&n.e(24,function(){var t=n(93);t("//platform.twitter.com/oct",function(){var t=window.twttr&&window.twttr.conversion;t.trackPid("l4t99")})})})},,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(4),o=n(16),r=n(95);t.exports=function(){function t(t){var e=t>0?s:l;i("#favicon").attr("href",e)}function e(t){return t>0&&10>=t?String.fromCharCode(10111+t):"["+t+"]"}function n(t){return t>0&&10>=t?String.fromCharCode(10121+t):"["+t+"]"}function a(){var e=this;this._unreadRoomCount=0,this._isUnreadInRoom=!1,this._roomName="",this._roomNameNotInitialised=!0,o.on("troupeUnreadTotalChange",function(n){e.setUnread(n.overall,!!n.current);var i=n.overall;t(i)})}var s=r("images/favicon-unread.ico"),l=r("images/favicon-read.ico");return a.prototype.setUnread=function(t,e){this._unreadRoomCount=t,this._isUnreadInRoom=e,this._render()},a.prototype.setRoomName=function(t){this._roomNameNotInitialised=!1,this._roomName=t,this._render()},a.prototype._render=function(){if(!this._roomNameNotInitialised){var t=this._roomName?this._roomName+" - Gitter":"Gitter";this._unreadRoomCount>0&&(t=this._isUnreadInRoom?n(this._unreadRoomCount)+" "+t:e(this._unreadRoomCount)+" "+t),document.title=t}},a}()},function(t){"use strict";function e(t,e,n,i){t.addEventListener(e,this,!1),this.handleEvent=function(o){t.removeEventListener(e,this,!1),n.call(i,o)}}t.exports=function(t,n){new e(window,"DOMContentLoaded",t,n)}},function(t,e,n){"use strict";var i=n(4),o=n(2),r=n(160),a=n(16);n(96),t.exports=function(){var t=i('<div id="notification-center" class="notification-center"></div>').appendTo("body");return a.on("user_notification",function(e){if(!e.troupeId||e.troupeId!==o.getTroupeId()){var n=e.className,a=i.parseHTML(r({link:e.link,title:e.title,text:e.text}));e.click?i(a).on("click",e.click):e.link&&i(a).on("click",function(){window.location.href=e.link}),t.notify({content:a,className:n})}}),a.on("app.version.mismatch",function(){t.notify({content:"A new version of the application has been deployed. Click here to reload",click:function(){window.location.reload(!0)}})}),a.on("ajaxError",function(){t.notify({id:"ajax-error",className:"notification-error",content:"We're having problems communicating with the server at the moment...."})}),i(window).on("beforeunload",function(){i("#notification-center").hide()}),{notify:function(e){t.notify(e)}}}()},function(t,e,n){"use strict";var i=n(4),o=n(2),r=n(19),a=n(161),s=n(98);t.exports=function(){function t(){var t=i(a());t.find("#enable").on("click",function(){s.enable(),r.notify({id:"request-notifications",action:"hide"})}),r.notify({id:"request-notifications",content:t,timeout:1e4})}o().desktopNotifications&&(s.hasNotBeenSetup()?t():s.hasBeenGranted()&&s.enable())}()},function(t,e,n){"use strict";var i=n(2),o=n(16),r=n(14),a=n(3);t.exports=function(){function t(t){return t.replace(/\/_s\/\w+\//,"/_s/l/")}function e(t,e,n,i,o){a.error(t||o&&o.message||"Unhandler error",{message:t,filename:e,lineno:n,colno:i,error:o})}var n=i.env("ravenUrl");if(n){r.config(n,{dataCallback:function(e){try{e.stacktrace.frames.forEach(function(e){e.filename&&(e.filename=t(e.filename))}),e.culprit&&(e.culprit=t(e.culprit)),o.trigger("stats.event","error")}catch(n){}return e}}).install();var s=i.user();r.setUser({username:s&&s.get("username")}),o.on("bugreport",function(t,e){t instanceof Error?(o.trigger("stats.event","error"),r.captureException(t,e)):(o.trigger("stats.event","warning"),r.captureMessage(t,e))})}else window.onerror=function(t,n,i,r,a){try{e(t,n,i,r,a),o.trigger("stats.event","error")}catch(s){throw window.onerror=null,s}},o.on("bugreport",function(t){t instanceof Error?o.trigger("stats.event","error"):o.trigger("stats.event","warning")})}()},function(t,e,n){"use strict";var i=n(2),o=n(16);n(97),t.exports=function(){function t(t){if(window.mixpanel){i.getUserId()&&window.mixpanel.register({userStatus:"ACTIVE"});var e=i().user&&i().user.username,n=e?"/"+e===t:!1,o=!!i.getUserId(),r=window.navigator.userAgent;window.mixpanel.track("pageView",{pageName:t,authenticated:o,isUserHome:n,userAgent:r})}var a=window._gs;a&&a("track")}function e(t,e,i){a&&n("send","event","error",t,e,i)}var n,r,a=i.env("googleTrackingId"),s=i.env("googleTrackingDomain")||"gitter.im";a&&(!function(t,e,n,i,o,r,a){t.GoogleAnalyticsObject=o,t[o]=t[o]||function(){(t[o].q=t[o].q||[]).push(arguments)},t[o].l=1*new Date,r=e.createElement(n),a=e.getElementsByTagName(n)[0],r.async=1,r.src=i,a.parentNode.insertBefore(r,a)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),n=window.ga,n("create",a,s),n("send","pageview"));var l=i.env("goSquaredTrackingId"),c=i.getUser();return l&&(r=window.GoSquared={},r.acct=l,c.username&&(r.UserName=c.username,r.Visitor={id:c.id,displayName:c.displayName,email:c.email}),function(t){t._gstc_lt=+new Date;var e=document,n=e.createElement("script");n.type="text/javascript",n.src="//d1l6p2sc9645hc.cloudfront.net/tracker.js";var i=e.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)}(window)),o.on("track",function(e){t(e)}),o.on("track-event",function(t,e){window.mixpanel&&window.mixpanel.track(t,e)}),t(window.location.pathname),{trackError:e}}()},function(t,e,n){"use strict";var i=n(30),o=n(3),r=6e5;window.setInterval(function(){i.web.get("/api/v1/ping",void 0,{global:!1}).fail(function(){o.info("An error occurred pinging the server")})},r)},function(t,e,n){"use strict";function i(){o(document).on("click","a",function(t){var e=t.currentTarget,n=l.get(e,"disableRouting");if(!n){var i=e.protocol+"//"+e.host,o=i===r.env("basePath"),c=window.location;if(c.scheme===e.scheme&&c.host===e.host&&c.pathname===e.pathname&&c.search===e.search)return t.preventDefault(),window.location=e.href,!0;if(o&&s(e.pathname)){t.preventDefault();var u=e.pathname.substring(1),h="chat";u===r.user().get("username")&&(h="home"),a.trigger("navigation",e.pathname+e.search,h,u)}}})}var o=n(4),r=n(2),a=n(16),s=n(99),l=n(100);t.exports={installLinkHandler:i}},,function(t,e,n){var i,o;i=[n(12),n(5)],o=function(t,e){return function(t,e){var n=function(){return!0};e.FilteredCollection=e.Collection.extend({collectionFilter:null,defaultFilter:n,initialize:function(t,e){if(t)throw"models cannot be set directly, unfortunately first argument is the models.";this.collection=e.collection,this.setFilter(e.collectionFilter),this._bindEvents()},resetWith:function(t){return this.stopListening(this.collection),this.collection=t,this.resetCollection(),this._bindEvents(),this},_bindEvents:function(){this.listenTo(this.collection,"sync",this.syncCollection),this.listenTo(this.collection,"add",this.addModel),this.listenTo(this.collection,"remove",this.removeModel),this.listenTo(this.collection,"reset",this.resetCollection),this.listenTo(this.collection,"sort",this.resortCollection),this.listenTo(this.collection,"change",this._modelChanged),this.listenTo(this.collection,"filter-complete",this._filterComplete)},_reset:function(t){e.Collection.prototype._reset.call(this,t),this._mapping=[]},add:function(){throw"Do not invoke directly"},remove:function(){throw"Do not invoke directly"},reset:function(){throw"Do not invoke directly"},_modelChanged:function(t,e,n){n||(n={});var i=this.indexOf(t);if(this.collectionFilter(t))if(0>i){var o=this.collection.indexOf(t);this._forceAddModel(t,{index:o})}else this.trigger("change",t,this);else i>-1&&this._forceRemoveModel(t,{index:i});n.silent||this._filterComplete()},resortCollection:function(){var e=[],n=[],i=this.models;t.each(this.collection.models,function(t,o){i.indexOf(t)>=0&&(e.push(t),n.push(o))}),this.models=e,this._mapping=n,this.trigger("sort",this)},resetCollection:function(){this._mapping=[],this._reset(),this.setFilter(void 0,{silent:!0}),this.trigger("reset",this)},syncCollection:function(){this._mapping=[],this._reset(),this.setFilter(void 0,{silent:!0}),this.trigger("sync",this)},renumberMappings:function(){this._mapping=[];var e=this.collection,n=this._mapping;t(this.models).each(function(t){n.push(e.indexOf(t))})},removeModel:function(e,n,i){var o=this._mapping.indexOf(i.index);o>-1&&this._forceRemoveModel(e,t.extend({index:o},i)),this.renumberMappings()},_forceRemoveModel:function(t,n){this._mapping.splice(n.index,1),e.Collection.prototype.remove.call(this,t,{silent:n.silent}),n.silent||this.trigger("remove",t,this,{index:n.index})},addModel:function(e,n,i){this.collectionFilter(e)&&this._forceAddModel(e,t.extend(i||{},{index:i&&i.at||n.indexOf(e)})),this.renumberMappings()},_forceAddModel:function(n,i){var o=i.index,r=t.sortedIndex(this._mapping,o,function(t){return t});e.Collection.prototype.add.call(this,n,{at:r,silent:i.silent}),this._mapping.splice(r,0,o),i.silent||this.trigger("add",n,this,{index:r})},setFilter:function(e,n){n||(n={}),e===!1&&(e=this.defaultFilter),this.collectionFilter=e||this.collectionFilter||this.defaultFilter;var i=this.collectionFilter,o=this._mapping,r=t.extend({},n);this.collection.each(function(t,e){var n=o.indexOf(e);i(t,e)?-1==n&&(r.index=e,this._forceAddModel(t,r)):n>-1&&(r.index=-1==n?this.length:n,this._forceRemoveModel(t,r))},this),n.silent||this._filterComplete()},_onModelEvent:function(){},_filterComplete:function(){this.trigger("filter-complete",this)}})}(t,e),e.FilteredCollection}.apply(e,i),!(void 0!==o&&(t.exports=o))},,function(t,e,n){"use strict";var i=n(5),o=n(6);t.exports=function(){window.__agent&&window.__agent.start(i,o)}()},,function(t,e,n){"use strict";var i=n(4),o=n(2),r=n(16);t.exports=function(){function t(t,e){e||(e="");var n=o.env("apiBasePath");return t?n+t()+e:n+e}function e(t,e){return e||(e=""),t?t()+e:e}function n(t,e){return e||(e=""),t?t()+e:e}function a(){var t=i.Deferred();return o.getAccessToken(function(e){t.resolve(e)}),t}function s(t,e,n,o,r,s,l){l=u(l,o),"delete"!==n||s||delete l.contentType;var h;return h=l.contentType===f?JSON.stringify(s):s,a().then(function(o){var a=t(e,r),s=i.ajax({url:a,contentType:l.contentType,dataType:l.dataType,type:n,global:l.global,data:h,context:l.context,timeout:l.timeout,async:l.async,headers:{"x-access-token":o}});return s.fail(function(t){l.global&&c(t,n,a)}),s})}function l(t){for(var e=Object.keys(v),n=0;n<e.length;n++){var i=e[n],o=v[i];if(o.test(t))return i}}function c(t,e,n){var i=t.status,o=l(n);if("error"==t.statusText&&404===i)r.trigger("bugreport","ajaxError: unreachable: "+e+" "+(o||n),{tags:{type:"ajax",subtype:"unreachable",url:n}});else{if(500>i)return;r.trigger("bugreport","ajaxError: HTTP "+i+" on "+e+" "+(o||n),{tags:{type:"ajax",subtype:"HTTP"+i,url:n}})}r.trigger("ajaxError")}function u(t,e){return t||(t={}),Object.keys(e).forEach(function(n){void 0===t[n]&&(t[n]=e[n])}),t}function h(t,e){return g.reduce(function(n,i){var o=i[0],r=i[1];return n[o]=s.bind(n,t,e,o,r),n},{url:function(n){return t(e,n)},urlGenerator:function(n){return function(){return t(e,n)}},channel:function(t){return n(e,t)},channelGenerator:function(t){return function(){return n(e,t)}}})}var d=15e3,f="application/json",p={timeout:d,dataType:"json"},m={timeout:d,dataType:"json",contentType:f},g=[["get",p],["post",m],["patch",m],["put",m],["delete",m]],v={githubIssues:/^\/api\/private\/gh\/[^/]+\/[^/]+\/issues/,githubUsers:/^\/api\/private\/gh\/users\//};return u(h(t),{user:h(t,function(){return"/v1/user/"+o.getUserId()}),room:h(t,function(){return"/v1/rooms/"+o.getTroupeId()}),userRoom:h(t,function(){return"/v1/user/"+o.getUserId()+"/rooms/"+o.getTroupeId()}),priv:h(t,function(){return"/private"}),web:h(e)})}()},,function(t,e,n){"use strict";var i=n(12),o=n(16),r=n(30),a=n(3);t.exports=function(){function t(){var t=n;n={};var i=e;e=[],i=i.concat(Object.keys(t).map(function(e){var n={stat:e};return t[e]>0&&(n.count=t[e]),n})),i.length&&r.priv.post("/statsc",i,{dataType:"text"}).fail(function(){a.info("An error occurred while communicating stats")})}var e=[],n={},s=i.throttle(t,1e3,{leading:!1});o.on("stats.event",function(t){n[t]?n[t]++:n[t]=1,s()}),o.on("stats.gauge",function(t,n){e.push({stat:t,value:n}),s()}),o.on("stats.time",function(t,n){e.push({stat:t,time:n}),s()})}()},,function(t,e,n){"use strict";var i=n(4),o=n(12),r=n(16);t.exports=function(){var t,e=!1,n=i("#content-frame").hasClass("trpChatContainer")&&"chat"||"app";r.on("chat.edit.show",function(){e=!0}),r.on("chat.edit.hide",function(){e=!1});var a=function(){var t=["chat","search"];return e&&t.push("chat.edit"),t},s=function(t,e){var n=a(),i=t.replace("input.",""),o=n.indexOf(i),r=o+e;return-1!==o&&n[r]?n[r]:-1===e?n[n.length-1]:n[0]},l=function(t,e){r.trigger("focus.request."+s(e.scope,1))},c=function(t,e){r.trigger("focus.request."+s(e.scope,-1))},u=function(e){if(e.origin){if(e.origin!==n)return r.trigger("focus.request."+e.origin+".out",e);if(t)return}/^(INPUT|TEXTAREA)$/.test(document.activeElement.tagName)&&(t=i(document.activeElement),t.blur(),r.trigger("focus.change.out",t))},h=function(e){return e.origin&&e.origin!==n?r.trigger("focus.request."+e.origin+".in",e):void(t&&(t.focus(),r.trigger("focus.change.in",t),t=null))},d={"keyboard.focus.search":"search","keyboard.focus.chat":"chat","keyboard.maininput.tab.next":l,"keyboard.maininput.tab.prev":c,"focus.request.out keyboard.maininput.escape keyboard.input.escape":u,"focus.request.in keyboard.document.escape":h},f=function(t,e){r.on(t,function(t){t.origin||t.preventDefault();var n=Array.prototype.slice.call(arguments);o.isFunction(e)?e.apply(e,n):(n.unshift("focus.request."+e),r.trigger.apply(r,n))})},p=/\s+/;o.each(d,function(t,e){if(p.test(e)){var n=e.split(p);o.each(n,function(e){f(e,t)})}else f(e,t)})}()},,,function(t,e,n){"use strict";var i=(n(4),n(12),n(5)),o=n(2),r=n(106),a=(n(105),n(38),n(102)),s=n(107),l=n(108),c=n(16),u=n(109);n(26),t.exports=function(){function t(t){var e=new i.FilteredCollection(null,{model:a.TroupeModel,collection:n});e.setFilter(t);var o=new u(e);return o}var e=new s.OrgCollection(null,{listen:!0}),n=new a.TroupeCollection(null,{listen:!0}),h=new a.SuggestedTroupeCollection(null,{listen:!1});l.installTroupeListener(n);var d=t(r.favourites.filter);d.setSort(r.favourites.sort);var f=t(r.recents.filter);f.setSort(r.recents.sort),n.on("add",function(t){t.id==o.getTroupeId()&&t.on("change",function(t){o.troupe().set(t.changed)});var e=t.get("uri");if(e){var n=h.findWhere({uri:e});h.remove(n)}}),c.on("activity",function(t){var e=t.troupeId,i=n.get(e);if(i&&i.get("lurk")){var o=i.get("activity");o?i.set("activity",o+1):i.set("activity",1)}});var p={troupes:n,suggested:h,favourites:d,recentRoomsNonFavourites:f,orgs:e};return window._troupeCollections=p,p}()},function(t,e,n){"use strict";var i=n(12),o=n(2),r=n(13),a=n(16),s=n(3),l=n(110);t.exports=function(){function t(){return navigator.userAgent.indexOf("Mobile/")>=0}function e(){var t=o.env("websockets"),e=new r.Client(t.fayeUrl,t.options);A&&e.disable("websocket"),e.addExtension(new y),e.addExtension(k),e.addExtension(new C),e.addExtension(new M),e.addExtension(new v);var n;return o.user().watch("change:id",function(t){n&&(n.cancel(),n=null),t.id&&(n=e.subscribe(f+"/v1/user/"+t.id,function(e){"patch"===e.operation&&e.model&&e.model.id===t.id&&t.set(e.model),L[e.notification]&&a.trigger(e.notification,e)}))}),e}function n(t,e){var n=o.env("websockets"),i=t||n.options&&1.2*n.options.timeout||60;S||(S=setTimeout(function(){D||(I=Date.now(),D=!0,s.info("rt: persistent outage"),a.trigger("connectionFailure"),e||A||(s.info("rt: disabling websockets"),E.disable("websockets")))},1e3*i))}function c(){S&&(clearTimeout(S),S=null),D&&(a.trigger("stats.event","faye.outage.restored"),a.trigger("stats.time","faye.outage.restored.time",Date.now()-I),D=!1,I=null,s.info("rt: persistent outage restored"),a.trigger("connectionRestored"))}function u(){return E?E:(E=e(),n(10,!0),E.on("transport:down",function(){s.info("rt: transport down"),n()}),E.on("transport:up",function(){s.info("rt: transport up"),c()}),E)}function h(t){if(E&&m&&!R){"ping"!==t&&(a.trigger("realtime.testConnection",t),s.info("rt: Testing connection due to "+t)),R=!0;var e=m;setTimeout(function(){R&&(a.trigger("stats.event","faye.ping.reset"),R=!1,d(e))},3e4),E.publish(f+"/v1/ping2",{reason:t}).then(function(){R=!1,s.info("rt: Server ping succeeded")},function(t){s.warn("rt: Server ping failed: ",t),a.trigger("stats.event","faye.ping.reset"),R=!1,d(e)})}}function d(t){E&&(t===m?(s.info("rt: Client reset requested"),m=null,E.reset()):s.info("rt: Ignoring reset request as clientId has changed."))}var f="/api";r.logger={};var p=["fatal","error","warn","info","debug"];p.forEach(function(t){var e="fatal"==t?"error":t;r.logger[t]=function(t){s[e]("faye: "+t.substring(0,100))}});var m=null,g=!0;a.on("eyeballStateChange",function(t){s.info("rt: Switching eyeball state to ",t),g=t});var v=function(){};v.prototype.incoming=function(t,e){t.error&&s.error("rt: Bayeux error",t),e(t)};var y=function(){};y.prototype.outgoing=function(e,n){return"/meta/handshake"!==e.channel?n(e):(m=null,s.info("rt: Rehandshaking realtime connection"),void o.getAccessToken(function(i){e.ext||(e.ext={});var r=e.ext,a=t();r.token=i,r.version=o.env("version"),r.troupeId=o.getTroupeId(),r.connType=a?"mobile":"online",r.client=a?"mobweb":"web",r.eyeballs=g?1:0,n(e)}))};var w;y.prototype.incoming=function(t,e){if("/meta/handshake"!==t.channel)return e(t);if(t.successful){var n=t.ext;if(n&&(n.appVersion&&n.appVersion!==o.env("version")?(s.info("rt: Application version mismatch"),w||(w=[setTimeout(function(){a.trigger("app.version.mismatch"),a.trigger("stats.event","reload.warning.10m")},6e5),setTimeout(function(){a.trigger("app.version.mismatch"),a.trigger("stats.event","reload.warning.1hr")},36e5),setTimeout(function(){a.trigger("stats.event","reload.forced"),setTimeout(function(){window.location.reload(!0)},3e4)},216e5)])):w&&(w.forEach(function(t){clearTimeout(t)}),w=null),n.context)){var i=n.context;i.troupe&&o.setTroupe(i.troupe),i.user&&o.setUser(i.user)}m!==t.clientId&&(m=t.clientId,s.info("rt: Realtime reestablished. New id is "+m),a.trigger("realtime:newConnectionEstablished")),c()}e(t)};var b=function(){this._listeners={},this._stateProvider={}},_={},x={};b.prototype.outgoing=function(t,e){if("/meta/subscribe"==t.channel){x[t.subscription]=Date.now(),t.ext||(t.ext={}),t.ext.eyeballs=g?1:0;var n=this._stateProvider[t.subscription];if(n){var o=n();o&&(t.ext||(t.ext={}),t.ext.snapshot=o)}var r=_[t.subscription];r&&(t.ext=i.extend(t.ext,r),delete _[t.channel])}e(t)},b.prototype.incoming=function(t,e){if("/meta/subscribe"==t.channel&&t.ext&&t.ext.snapshot){var n=x[t.subscription];if(n){delete x[t.subscription];var i=Date.now()-n;if(i>400){var o=t.subscription.split(/\//).pop();a.trigger("stats.time","faye.subscribe.time."+o,i),s.info("rt: Subscription to "+t.subscription+" took "+i+"ms")}}var r=this._listeners[t.subscription],l=t.ext.snapshot;if(r)for(var c=0;c<r.length;c++)r[c](l)}e(t)},b.prototype.registerForSnapshots=function(t,e,n){t=f+t;var i=this._listeners[t];i?i.push(e):(i=[e],this._listeners[t]=i),n&&(this._stateProvider[t]&&s.warn("rt: a stateprovider already exists for "+t),this._stateProvider[t]=n)};var k=new b,T=!1,C=function(){};C.prototype.incoming=function(t,e){t.error&&t.advice&&"none"===t.advice.reconnect&&(T||(T=!0,s.error("rt: Access denied",t),window.alert("Realtime communications with the server have been disconnected."),l())),e(t)};var M=function(){this._seq=0,a.on("realtime:newConnectionEstablished",this.reset,this)};M.prototype={incoming:function(t,e){var n=t.ext&&t.ext.c,i=t.channel;if(n&&i&&0!==i.indexOf("/meta")){var o=this._seq;this._seq=n,n!==o+1&&(s.warn("rt: Message on channel "+i+" out of sequence. Expected "+(o+1)+" got "+n),a.trigger("stats.event","faye.sequence"),d(m))}e(t)},reset:function(){this._seq=0}};var E,S,D,I,L={user_notification:1,activity:1},A=t();a.on("eyeballsInvalid",function(t){s.info("rt: Resetting connection after invalid eyeballs"),d(t)}),a.on("reawaken",function(){s.info("rt: Recycling connection after reawaken"),d(m)}),document.addEventListener&&document.addEventListener("deviceReady",function(){document.addEventListener("online",function(){s.info("rt: online"),h("device_ready")},!1)},!1);var R=!1;return{getClientId:function(){return m},subscribe:function(t,e,n,i){return t=f+t,s.info("rt: Subscribing to "+t),_[t]=i,u().subscribe(t,e,n)},testConnection:h,reset:d,getClient:function(){return u()},registerForSnapshots:function(t,e,n){return k.registerForSnapshots(t,e,n)}}}()},function(t){"use strict";function e(t){var e=document.createElement("a");return e.href=t,{protocol:e.protocol,hostname:e.hostname,port:e.port,pathname:e.pathname,search:e.search,hash:e.hash,host:e.host}}function n(t){return decodeURIComponent(t.replace(/\+/g," "))}function i(t){var e={};if(!t)return e;for(var i,o=t.substring(1),r=/([^&=]+)=?([^&]*)/g;i=r.exec(o);)e[n(i[1])]=n(i[2]);return e}t.exports={parse:e,parseSearch:i}},function(t){"use strict";function e(t){window.setTimeout(t,1e3/60)}var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;t.exports=n&&n.bind(window)||e},function(t){"use strict";t.exports=function(){return{currentView:null,show:function(t){this.currentView&&(this.currentView.fade=!1,this.currentView.hideInternal()),this.currentView=t,t.navigable=!0,t.show()},close:function(){this.currentView&&(this.currentView.navigationalHide(),this.currentView=null)}}}()},,,,,,,,function(t){"use strict";t.exports=function(){return function(t,e){if(e=e||25,t.length<e)return t;for(var n=t.split("/"),i=1;i<n.length;i++){var o=n.slice(i).join("/");if(o.length<=e)return o}return n.pop()}}()},function(t,e,n){n(51),n(52),t.exports=void 0},function(t,e,n){"use strict";var i=n(5),o=n(6),r=n(2),a=n(185),s=n(118),l=n(119),c=n(80);n(120),t.exports=function(){var t=o.ItemView.extend({tagName:"span",template:a,events:{mouseover:"showDetailIntent",click:"showDetail"},modelEvents:{change:"update"},initialize:function(t){this.user=t.user?t.user:{},this.showEmail=t.showEmail||{},this.showBadge=t.showBadge,this.showStatus=t.showStatus,this.avatarSize=t.size?t.size:"s",this.showTooltip=t.showTooltip!==!1,this.tooltipPlacement=t.tooltipPlacement||"vertical"},showDetailIntent:function(t){s.hoverTimeout(t,function(){this.showDetail(t)},this)},showDetail:function(t){if(!this.compactView&&(t.preventDefault(),!this.popover)){this.$el.find(":first-child").tooltip("hide");var e=this.model||new i.Model(this.user),n=new s({model:e,targetElement:t.target});n.show(),s.singleton(this,n)}},update:function(){var t=this.serializeData();this.updatePresence(t),this.updateAvatar(t),this.updateTooltip(t)},updatePresence:function(t){this.showStatus&&(this.$el.find(".trpDisplayPicture").toggleClass("online",t.online),this.$el.find(".trpDisplayPicture").toggleClass("offline",!t.online))},updateAvatar:function(t){this.$el.find(".trpDisplayPicture").css({"background-image":"url('"+t.avatarUrl+"')"})},updateTooltip:function(t){this.showTooltip&&this.$el.find(".trpDisplayPicture").attr("data-original-title",t.tooltip)},getUserId:function(){return this.model?this.model.id:this.user?this.user.id:null},serializeData:function(){var t,e=r.getUserId(),n=this.model?this.model.toJSON():this.user,i=c({username:n.username,version:n.gv,size:"m"==this.avatarSize?60:32}),o=n.id===e||!!n.online;return t=this.showStatus?o?"online":"offline":"",{id:n.id,showBadge:this.showBadge,showStatus:this.showStatus,userDisplayName:n.displayName,avatarUrl:i,avatarSize:this.avatarSize,showTooltip:this.showTooltip,presenceClass:t,online:o,offline:!o,role:n.role,invited:n.invited,removed:n.removed,inactive:n.removed||n.invited}},onRender:function(){var t;this.model?t=this.model.get("displayName"):this.user&&(t=this.user.displayName),this.showTooltip&&!window._troupeCompactView&&t&&this.$el.find(":first-child").tooltip({html:!1,placement:this.tooltipPlacement,container:"body"})}});return l.register({avatar:t}),t}()},function(t,e,n){"use strict";var i=n(6),o=n(112),r=n(2),a=n(121),s=n(119);t.exports=function(){var t=1,e=r.lang(),n=i.ItemView.extend({tagName:"span",initialize:function(e){function n(){var e=o.duration(Date.now()-i.time.valueOf());i.render(e);var r;if(e.asDays()>=1&&e.asDays()<t){var a=e.asHours(),s=1-(a-Math.floor(a));r=1e3*Math.round(86400*s+1)}else if(e.asHours()>=1){var l=e.asHours(),c=1-(l-Math.floor(l));r=1e3*Math.round(3600*c+1)}else{var u=e.asMinutes(),h=1-(u-Math.floor(u));r=1e3*Math.round(60*h+1)}100>r&&(r=1e3),window.setTimeout(n,r)}this.time=o(e.time),this.compact=e.compact,this.position=e.position||"top",this.tooltipFormat=e.tooltipFormat||"LLL";var i=this;n()},render:function(n){this.$el.find("[title]").tooltip("destroy"),n||(n=o.duration(Date.now()-this.time.valueOf()));var i;i=n.asDays()>=t?this.compact?this.time.format("MMM DD",{lang:e}):this.time.format("LL",{lang:e}):this.compact?this.time.format("H:mm",{lang:e}):a("%s ago",n.humanize());var r=this.time.format(this.tooltipFormat,{lang:e});this.$el.html("<span title='"+r+"'>"+i+"</span>"),window._troupeCompactView||this.$el.find("[title]").tooltip({container:"body",placement:this.position,html:!0})}});return s.register({timeago:n}),n}()},,,,,,,,,,function(t,e,n){"use strict";var i=n(6),o=n(72),r=n(41);t.exports=function(){var t=8,e=i.ItemView.extend({el:"body",events:{keydown:"onKeyDown"},initialize:function(){this.bindUIElements(),this.menu=new o({el:this.$el.find("#menu")}).show(),this.dialogRegion=r},onKeyDown:function(e){"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.keyCode===t&&(e.stopPropagation(),e.preventDefault())}});return e}()},,,,,,,,,,function(t,e,n){"use strict";var i=n(4),o=n(6),r=n(5),a=n(2),s=n(16),l=n(146),c=n(37),u=n(148),h=n(149),d=n(3),f=n(115),p=n(128),m=n(204),g=n(205),v=n(150),y=n(151),w=n(30);n(152);var b=10;t.exports=function(){s.on("troupeRequest",function(t,e){var n={child_window_event:["troupesResponse",c.troupes]};e.source.postMessage(JSON.stringify(n),e.origin)});var t=o.Layout.extend({ui:{hide:".js-hide"},events:{"click @ui.hide":"handleHide"},regions:{list:"#list"},template:g,initialize:function(t){this.bindUIElements(),this.collectionView=t.collectionView,this.collection=this.collectionView.collection,this.listenTo(this.collection,"sync",this.render),this.listenTo(this.collection,"sync add reset remove",this.display),this.handleHide=t.handleHide},serializeData:function(){return{canHide:"function"==typeof this.handleHide,header:this.options.header}},onRender:function(){if(this.collection.length?this.$el.show():this.$el.hide(),this.list.show(this.collectionView),this.handleHide){var t=this.ui.hide;t.tooltip({container:"body",title:"Hide forever"})}},display:function(){this.collection.length>0?this.$el.show():this.$el.hide()}}),e=o.ItemView.extend({className:"menu",template:m,selectedListIcon:"icon-troupes",ui:{nano:".nano",profile:"#left-menu-profile",recent:"#list-recents ul",favs:"#list-favs ul",orgs:"#left-menu-list-orgs",suggested:"#left-menu-list-suggested"},events:function(){var t={};
return l()||(t["click #left-menu-profile"]="toggleHeaderExpansion"),t},keyboardEvents:{"room.up":"selectPrev","room.down":"selectNext","room.enter":"navigateToCurrent","room.1 room.2 room.3 room.4 room.5 room.6 room.7 room.8 room.9 room.10":"navigateToRoom"},initialize:function(){this.bindUIElements(),this.repoList=!1,this.state=new r.Model({menuHeaderExpanded:!1});var t=this,e=function(){t.$el.removeClass("menu--collapsed")};s.on("menu:hide",function(){t.$el.addClass("menu--collapsed")}),s.on("menu:show",e),s.on("navigation",e),s.on("troupeUnreadTotalChange",function(e){var n=e.overall||" ";t.$el.find("#menu-tab-unread-count").text(n)}),this.selectedIndex=0,s.on("context.troupeId",function(e){i("#recentTroupesList li").removeClass("selected");var n=t.getIndexForId(e);n&&(t.selectedIndex=n)});var n=c.troupes&&!!c.troupes.length;n?this.getSuggestedRooms():this.listenToOnce(c.troupes,"sync",function(){this.getSuggestedRooms()}.bind(this))},getSuggestedRooms:function(){var t=a().suggestedRoomsHidden;!t&&c.troupes.length<b&&c.suggested.fetch()},setupNanoScroller:function(t){var e=this.ui,n=e.nano[0];if(n){var o=function(){i(n).nanoScroller({iOSNativeScrolling:!0})};o(),this.listenTo(t,"add remove",function(){setTimeout(o,100)})}},getIndexForId:function(t){if(t)for(var e,n=i("#recentTroupesList li"),o=0;e=n[o];o++)if(i(e).data("id")===t)return o},selectPrev:function(t){s.trigger("focus.request.out",t);var e=this.selectedIndex-1;-1===e&&(e=0),this.select(e)},selectNext:function(t){s.trigger("focus.request.out",t),this.select(this.selectedIndex+1)},select:function(t){var e=i("#recentTroupesList li");t>=0&&t<e.length&&(this.selectedIndex=t,e.removeClass("selected"),i(e[this.selectedIndex]).addClass("selected"))},navigateToCurrent:function(){var t=i("#recentTroupesList li");t.removeClass("selected"),i(t[this.selectedIndex]).click()},navigateTo:function(t){var e=i("#recentTroupesList li");t>=0&&t<e.length&&(this.selectedIndex=t,i(e[t]).click())},navigateToRoom:function(t,e){var n=e.key.split("+"),i=n[n.length-1];if("0"===i)return this.navigateTo(9);var o=parseInt(i,10)-1;this.navigateTo(o)},serializeData:function(){return{showFooterButtons:!l(),showExapandedHeader:l(),showUnreadTab:!l()}},show:function(){this.setupNanoScroller(c.troupes);var e=this.ui;new v({el:e.profile,state:this.state}),new u({collection:c.favourites,rerenderOnSort:!0,draggable:!0,dropTarget:!0,roomsCollection:c.troupes,el:e.favs}),new u({collection:c.recentRoomsNonFavourites,rerenderOnSort:!0,draggable:!0,dropTarget:!0,roomsCollection:c.troupes,el:e.recent}),new t({collectionView:new y({collection:c.orgs}),header:"Your Organizations",el:e.orgs}),new t({collectionView:new h({collection:c.suggested}),header:"Suggested Rooms",el:e.suggested,handleHide:function(){w.user.put("/settings/suggestedRoomsHidden",{value:!0}).then(function(){c.suggested.reset()}).fail(function(t){d.error(t)})}})},onRender:function(){this.show()},toggleHeaderExpansion:function(){this.state.set("menuHeaderExpanded",!this.state.get("menuHeaderExpanded")),i("#left-menu-profile").toggleClass("menu-header--expanded")}});return f.mixin(e,p),e}()},,,,,,,function(t,e,n){"use strict";n(162),n(163),n(164),t.exports=function(){return null}()},function(t,e,n){"use strict";function i(t){if(!t||!t.length)return 1;for(var e=5381,n=0;n<t.length&&8>n;n++)e=(e<<5)+e+t.charCodeAt(n);return(e>0?e:-e)%6}function o(t){if(!t||!t.username)return"https://avatars1.githubusercontent.com/u/0";var e=t.username,n=t.version,o=t.size||30;return a+i(e)+s+e+"?"+(n?"v="+n:"")+"&s="+o}var r=n(288),a="https://avatars",s=".githubusercontent.com/",l=r.isBrowser?function(){return window.devicePixelRatio||1}:function(){return 1};t.exports=function(t){var e=l();t.size=(t.size||30)*e;var n=o(t);return n}},,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(2);t.exports=function(){function t(t){return"../"+t}function e(t){return"/_s/l/"+t}function n(t,e){var n=e&&e.nonrelative,i=n?"https://":"//";return e&&e.notStatic===!0?i+r[0]+"/"+t:i+r[0]+l+"/"+t}function o(t,e){for(var n=0,i=0;i<t.length;i+=3)n+=t.charCodeAt(i);var o=r[n%a],s=e&&e.nonrelative,c=s?"https://":"//";return e&&e.notStatic===!0?c+o+"/"+t:c+o+l+"/"+t}var r=i.env("cdns"),a=r&&r.length,s=i.env("assetTag"),l=s?"/_s/"+s:"";return"file:"===window.location.protocol?t:a?1==a?n:o:e}()},function(t,e,n){"use strict";{var i=n(4);n(3)}t.exports=function(){function t(t,e){function n(){return 1/0!==r?window.setTimeout(t,r):null}var i,o,r=e;this.pause=function(){window.clearTimeout(i),r-=new Date-o},this.resume=function(t){o=new Date,r+=t?t:0,i=n()},this.restart=function(){o=new Date,r=e,window.clearTimeout(i),i=n()},this.resume()}i.prototype.notify=function(e){function n(){l.is(":hidden")&&(l.show(),l.css({position:"relative",left:-1*l.outerWidth()}),l.animate({left:250})),l.data("notification-hide-timeout").restart()}function o(){l.animate({left:0},function(){l.hide()})}function r(){e.id&&(l=c.find("#"+e.id)),(!e.id||l.length<=0)&&(p=!0,l=i('<div class="notification"'+(e.id?' id="'+e.id+'"':"")+"></div>").hide(),l.prependTo(c),l.data("notification-hide-timeout",new t(function(){o()},h)))}function a(){u&&l.html(u),l.addClass("notification-container"),d&&l.addClass(d),e.click&&l.on("click",e.click)}function s(){"show"===f?n(l):"hide"===f&&o(l)}var l,c=this,u=e.content,h=e.timeout?e.timeout:6e3,d=e.className?e.className:"",f=e.action?e.action:"show",p=!1;return r(),this.on("mouseenter",function(t){c.data("notification-hide-running")===!0&&t.currentTarget===c[0]&&(c.data("notification-hide-running",!1),c.find(".notification").each(function(t){t.data("notification-hide-timeout").pause()}))}),this.on("mouseleave",function(t){c.data("notification-hide-running")===!1&&t.currentTarget===c[0]&&(c.data("notification-hide-running",!0),c.find(".notification").each(function(t){t.data("notification-hide-timeout").resume(1e3)}))}),a(),s(),l}}()},function(t,e,n){"use strict";var i=n(2);t.exports=function(){var t=i.env("mixpanelToken");if(t){var e=[];if(function(t,e){window.mixpanel=e;var n,i,o,r;n=t.createElement("script"),n.type="text/javascript",n.async=!0,n.src=("https:"===t.location.protocol?"https:":"http:")+"//cdn.mxpnl.com/libs/mixpanel-2.2.min.js",i=t.getElementsByTagName("script")[0],i.parentNode.insertBefore(n,i),e._i=[],e.init=function(t,n,i){function a(t,e){var n=e.split(".");2==n.length&&(t=t[n[0]],e=n[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}var s=e;for("undefined"!=typeof i?s=e[i]=[]:i="mixpanel",s.people=s.people||[],o=["disable","track","track_pageview","track_links","track_forms","register","register_once","unregister","identify","alias","name_tag","set_config","people.set","people.set_once","people.increment","people.track_charge","people.append"],r=0;r<o.length;r++)a(s,o[r]);e._i.push([t,n,i])},e.__SV=1.2}(document,e),window.mixpanel=e,e.init(t),i.isAuthed()){var n=i.getUser();n&&e.identify(n.id)}}}()},function(t,e,n){"use strict";var i=n(16),o=n(95);t.exports=function(){function t(){if(n){if(n.permission)return n.permission;switch(r.checkPermission()){case 0:return"granted";case 1:return"default";case 2:return"denied"}}}function e(t){var e=t.link,i=t.title,r=t.text,a=o("images/icon-logo-red-64.png"),s=new n(i,{body:r,icon:a});s.onshow=function(){setTimeout(function(){s.close()},1e4)},s.onclick=function(){if(window.focus(),e){if(e==window.location.pathname)return;if(e.split("#")[0]==window.location.pathname)return void window.location.replace("#"+e.split("#",2)[1]);window.location.replace(e)}}}var n=window.Notification,r=window.webkitNotifications;return{hasNotBeenSetup:function(){return"default"===t()},hasBeenDenied:function(){return"denied"===t()},hasBeenGranted:function(){return"granted"===t()},enable:function(){n&&("granted"===t()?i.on("user_notification",function(t){e(t)}):n.requestPermission(function(){i.on("user_notification",function(t){e(t)})}))}}}()},function(t,e,n){"use strict";var i=new RegExp("^\\/("+n(235).join("|")+")\\b");t.exports=function(t){return t?i.test(t)?!1:/\/archives\/(all|\d{4}\/\d{2}\/\d{2})/.test(t)?!1:/\/[^]+/.test(t):!1}},function(t){"use strict";function e(t){var e=t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()});return"data-"+e.toLowerCase()}t.exports=document.documentElement.dataset?{get:function(t,e){return t&&t.dataset&&t.dataset[e]},set:function(t,e,n){t.dataset[e]=n}}:{get:function(t,n){return t&&t.getAttribute(e(n))},set:function(t,n,i){return t.setAttribute(e(n),i)}}},,function(t,e,n){"use strict";var i=n(30),o=n(5),r=n(105),a=n(112);t.exports=function(){var t=r.Model.extend({idAttribute:"id",initialize:function(t){var e=!!t.url;if(e){var n=this.get("lastAccessTime");n&&this.set("lastAccessTimeNoSync",n.clone()),this.get("unreadItems")&&this.set("hasHadUnreadItemsAtSomePoint",!0),this.get("mentions")&&this.set("hasHadMentionsAtSomePoint",!0)}this.listenTo(this,"change:unreadItems",function(t,e){e&&this.set("hasHadUnreadItemsAtSomePoint",!0)}),this.listenTo(this,"change:mentions",function(t,e){e&&this.set("hasHadMentionsAtSomePoint",!0)})},parse:function(t){return"string"==typeof t.lastAccessTime&&(t.lastAccessTime=a(t.lastAccessTime,a.defaultFormat)),t}},{modelType:"troupe"}),e=o.Collection.extend({model:t,url:i.user.channelGenerator("/rooms?suggested=1")}),n=r.LiveCollection.extend({model:t,url:i.user.channelGenerator("/rooms"),initialize:function(){this.listenTo(this,"change:favourite",this.reorderFavs),this.listenTo(this,"change:lastAccessTime change:lurk",this.resetActivity)},resetActivity:function(t){t.changed.lastAccessTime&&t.get("lastAccessTime")&&t.unset("activity"),t.changed.lurk&&!t.get("lurk")&&t.unset("activity")},reorderFavs:function(t){if(t.changed&&t.changed.favourite&&!this.reordering){this.reordering=!0;var e=t.changed.favourite,n=this.map(function(t){return{id:t.id,favourite:t.get("favourite")}}).filter(function(n){return n.favourite>=e&&n.id!==t.id});n.sort(function(t,e){return t.favourite-e.favourite});for(var i=e,o=0;o<n.length;o++){var r=n[o];if(r.favourite>i){n.splice(o,n.length);break}r.favourite++,i=r.favourite}for(var a=this,s=n.length-1;s>=0;s--){var l=n[s],c=l.id,u=l.favourite,h=a.get(c);h.set("favourite",u,{silent:!0})}delete this.reordering}}});return{SuggestedTroupeCollection:e,TroupeCollection:n,TroupeModel:t}}()},,,function(t,e,n){"use strict";var i=n(12),o=n(30),r=n(5),a=n(38),s=n(3),l=n(241);t.exports=function(){function t(t){return function(e,n){var i=t(e),o=t(n);return void 0===i?1:void 0===o?-1:o>i?-1:i>o?1:0}}function e(t){return function(e,n){return-1*t(e,n)}}var n=2e3;r.isEqual=l;var c={firstLoad:!1},u={create:"post",update:"put",patch:"patch","delete":"delete",read:"get"};return r.sync=function(t,e,n){var r=n.url||i.result(e,"url");if(!r)throw new Error("URL required");var a,s=u[t];return a="get"===s?o[s](r,n.data):o[s](r,e),n.success&&(a=a.then(n.success)),n.error&&(a=a.fail(n.error)),e.trigger("request",e,null,n),a},c.Model=r.Model.extend({constructor:function(){function t(t){e.syncStatus=t,e.trigger("syncStatusChange",t)}r.Model.prototype.constructor.apply(this,Array.prototype.slice.apply(arguments));var e=this;this.syncStatus=null,this.listenTo(this,"sync",function(){t("synced")}),this.listenTo(this,"request",function(){t("syncing")}),this.listenTo(this,"error",function(){t("syncerror")})},convertArrayToCollection:function(t,e){var n=this.get(t);i.isArray(n)&&this.set(t,new e(n,{parse:!0}))},set:function(t,e,n){var o,a;if(!t)return this;i.isObject(t)?(a=t,n=e):(a={})[t]=e;var s={};n||(n={});var l=!1;for(o in a){e=a[o];var c=this.get(o);c instanceof r.Collection&&(e instanceof r.Collection&&(e=e.toJSON()),c.reset(e),this.changed[o]=e,s[o]=!0,this.trigger("change:"+o,this,this.changed[o]),delete a[o],l=!0)}return l&&this.trigger("change",this,n),r.Model.prototype.set.call(this,a,n)}}),c.LiveCollection=r.Collection.extend({modelName:"",constructor:function(t,e){var n={snapshot:!0};e=i.extend(n,e),r.Collection.prototype.constructor.call(this,t,e),this._loading=!1,this.once("sync",this._onInitialLoad,this),this.on("sync",this._onSync,this),this.on("request",this._onRequest,this),e&&e.listen&&this.listen(e)},addWaiter:function(t,e,n){function i(n){return clearTimeout(c),s.info("coll: Waitor completed with model",n),r.off("add",o,t),r.off("change:id",o,t),l?void s.info("coll: Warning: waitor function called twice."):(l=!0,void(n?e.apply(r,[n]):e.apply(r,[])))}function o(e){e&&e[a]===t&&i(e)}if(s.info("coll: Waiting for id",t),t){var r=this,a=this.model.prototype.idAttribute||"id",l=!1,c=setTimeout(function(){i()},n);this.on("add",o,t),this.on("change:id",o,t)}},_onSync:function(){this._loading=!1},_onRequest:function(){this._loading=!0},_onInitialLoad:function(){this._initialLoadCalled||(this._initialLoadCalled=!0,this.trigger("loaded"))},listen:function(t){function e(){return n.getSnapshotState()}if(!this.subscription){var n=this,o=i.result(this,"url");if(!o)throw new Error("URL is required");this.subscription=a.subscribe(o,function(t){n._onDataChange(t)});var r=this.getSnapshotState&&e;t&&t.snapshot&&a.registerForSnapshots(o,function(t){n.trigger("request");var e={parse:!0,remove:!0,add:!0,merge:!0};if(n.length>0){var i=n.where({presnapshot:void 0});n.set(t.concat(i),e)}else n.reset(t,e);n._onInitialLoad(),n.trigger("sync"),n.trigger("snapshot")},r),this.subscription.errback(function(t){s.info("coll: Subscription error for "+o,t)})}},isLoading:function(){return this._loading},hasLoaded:function(){return this._initialLoadCalled},unlisten:function(){this.subscription&&(this.subscription.cancel(),this.subscription=null)},findExistingModel:function(t,e){var n=this.get(t);return n?n:(this.findModelForOptimisticMerge&&(n=this.findModelForOptimisticMerge(e)),n)},operationIsUpToDate:function(t,e,n){var i=e.get("v")?e.get("v"):0,o=n.v?n.v:0;return"create"===t?!0:i?o?"patch"===t?o>=i:o>i:"patch"===t:!0},applyUpdate:function(t,e,n,i,o){this.operationIsUpToDate(t,e,n)?(s.info("coll: Performing "+t,n),e.set(i.attributes,o||{})):s.info("coll: Ignoring out-of-date update",e.toJSON(),n)},patch:function(t,e,i){s.info("coll: Request to patch "+t+" with ",e,i);var o=this;this.transformModel&&(e=this.transformModel(e));var r=new this.model(e,{parse:!0}),a=this.findExistingModel(t,r);return a?void this.applyUpdate("patch",a,e,r,i):void this.addWaiter(t,function(n){return n?void o.applyUpdate("patch",n,e,r,i):void s.info("coll: Unable to find model "+t)},n)},_onDataChange:function(t){var e=this,i=t.operation,o=t.model,r=this.model.prototype.idAttribute||"id",a=o[r];if(!this.ignoreDataChange||!this.ignoreDataChange(t)){this.transformModel&&(o=this.transformModel(o));var l=new this.model(o,{parse:!0}),c=this.findExistingModel(a,l);switch(i){case"create":case"patch":case"update":if(c){this.applyUpdate(i,c,o,l);break}"patch"===i?this.addWaiter(a,function(t){return t?void e.applyUpdate("patch",t,o,l):void s.info("coll: Unable to find model "+a)},n):this.add(l);break;case"remove":c&&this.remove(c);break;default:s.info("coll: Unknown operation "+i+", ignoring")}}}}),c.LoadingMixin={initialize:function(){0===this.length&&(this.loading=!0,this.listenToOnce(this,"add reset sync",this.loadComplete))},loadComplete:function(){delete this.loading,this.trigger("loaded")}},c.UnderlyingLoadingMixin={initialize:function(){this.collection.loading&&(this.loading=!0,this.listenToOnce(this.collection,"loaded",this.loadComplete))},loadComplete:function(){delete this.loading,this.trigger("loaded")}},c.SearchResultsCollection={parse:function(t){var e=t.limit;return t.results.length<e&&(this._noMoreData=!0),t.results},query:function(t){t?"string"==typeof t&&(t={q:t}):t={},i.isEqual(t,this._currentQuery)||(this._currentQuery=t,this._skip=0,this._noMoreData=!1,this.fetchNext({remove:!0}),this.trigger("search:newquery"))},fetchNext:function(t){function e(){}if(t||(t={}),!this._noMoreData){var n=t.context,o=t.done||e,r=t.noMore||e;n&&(o=o.bind(n),r=r.bind(n));var a=i.extend({},this._currentQuery,{skip:this._skip}),l=this;this.trigger("search:next"),s.info("coll: Fetch next: ",a),this.fetch({remove:"remove"in t?t.remove:!1,add:"add"in t?t.add:!0,merge:"merge"in t?t.merge:!0,data:a,success:function(){l._skip=l.length,l._noMoreData&&(l.trigger("search:nomore"),r()),l.trigger("search:fetch:complete"),o()},error:function(){l.trigger("search:fetch:complete"),o()}})}}},c.ReversableCollectionBehaviour={initialize:function(){this.initialSortBy&&this.setSortBy(this.initialSortBy)},setSortBy:function(n){var i=!1;n===this.currentSortByField&&(n=0===n.indexOf("-")?n.substring(1):"-"+n);var o;0===n.indexOf("-")?(o=n.substring(1),i=!0):o=n;var r;r=this.sortByMethods&&this.sortByMethods[o]?this.sortByMethods[o]:function(t){return t.get(o)},this.currentSortByField=n;var a=t(r);return i&&(a=e(a)),this.comparator=a,this.sort()}},c}()},function(t,e,n){"use strict";function i(t,e){return t===e?0:t>e?1:-1}function o(t){return t.hasHadMentionsAtSomePoint||t.mentions?0:t.hasHadUnreadItemsAtSomePoint||t.unreadItems?1:2}function r(t,e){var n=t.lastAccessTimeNoSync||t.lastAccessTime,i=e.lastAccessTimeNoSync||e.lastAccessTime;return n||i?n?i?new Date(i).valueOf()-new Date(n).valueOf():-1:1:0}var a=n(238);t.exports={favourites:{sort:function(t,e){t=a(t),e=a(e);var n=i(t.favourite,e.favourite);return n?n:i(t.name,e.name)},filter:function(t){return t=a(t),!!t.favourite}},recents:{sort:function(t,e){t=a(t),e=a(e);var n=o(t),i=o(e);return n===i?r(t,e,n):n-i},filter:function(t){return t=a(t),!t.favourite&&!!(t.lastAccessTime||t.unreadItems||t.mentions)}}}},function(t,e,n){"use strict";var i=n(30),o=n(105);t.exports=function(){var t=o.Model.extend({idAttribute:"name"}),e=o.LiveCollection.extend({model:t,url:i.user.channelGenerator("/orgs")});return{OrgCollection:e,OrgModel:t}}()},function(t,e,n){"use strict";var i=n(12),o=n(2),r=n(3),a=n(16);t.exports=function(){function t(t,e,n){return i.throttle(i.bind(t,e),n||30,{leading:!1})}var e=function(e){this._collection=e,this._currentStoreValueChanged=i.bind(this._currentStoreValueChanged,this),o.troupe().on("change:id",i.bind(this._recount,this)),this._recountLimited=t(this._recount,this,50),this._collection.on("change:unreadItems change:mentions reset sync add remove destroy",this._recountLimited,this),this._recountLimited()};e.prototype={_currentStoreValueChanged:function(){this._recountLimited()},_recount:function(){function t(t,e){var n=e.get("unreadItems")+e.get("mentions");return t+(n>0?1:0)}var e,n=this._collection,i=n.reduce(t,0),s=o.getTroupeId();e=s?n.filter(function(t){return t.id===s}).reduce(t,0):0;var l={overall:i,current:e};r.info("uf: troupeUnreadTotalChange",l),a.trigger("troupeUnreadTotalChange",l)}};var n={installTroupeListener:function(t){new e(t)}};return n.TroupeUnreadNotifier=e,n}()},function(t,e,n){var i,o;i=[n(12),n(5)],o=function(t,e){function n(n,i){function o(){i.length=n.length}function r(e){var o=t.toArray(arguments),r="change"===e||"change:"===e.slice(0,7);"reset"===e&&(i.models=n.models),t.contains(d,e)?(t.contains(["add","remove","destory"],e)?o[2]=i:t.contains(["reset","sort"],e)&&(o[1]=i),i.trigger.apply(this,o)):r&&i.contains(o[1])&&i.trigger.apply(this,o)}var a={};return t.each(t.functions(e.Collection.prototype),function(e){t.contains(h,e)||(a[e]=function(){return n[e].apply(n,arguments)})}),t.extend(i,e.Events,a),i.listenTo(n,"all",o),i.listenTo(n,"all",r),i.models=n.models,o(),i}function i(t){return function(e,n){var i=t(e),o=t(n);return i===o?0:o>i?-1:1}}function o(t,e,n){for(var i=0,o=t.length;o>i;){var r=i+o>>>1;n(t[r],e)<0?i=r+1:o=r}return i}function r(t){var e;e=this._comparator?o(this._collection.models,t,this._comparator):this._superset.indexOf(t),this._collection.add(t,{at:e})}function a(t){this.contains(t)&&this._collection.remove(t)}function s(t){var e=this._comparator;if(e&&!(this._collection.length<2)){var n=this._collection.indexOf(t);if(!(0>n)){var i;0===n?e(t,this._collection.at(1))>0&&(i=!0):n===this._collection.length-1?e(this._collection.at(this._collection.length-2),t)>0&&(i=!0):(e(t,this._collection.at(n+1))>0&&(i=!0),e(this._collection.at(n-1),t)>0&&(i=!0)),i&&(this._collection.remove(t),r.call(this,t))}}}function l(){if(!this._comparator)return void this._collection.reset(this._superset.toArray());var t=this._superset.toArray();t.sort(this._comparator),this._collection.reset(t)}function c(t){this._superset=t,this._comparator=null,this._collection=new e.Collection(t.toArray()),n(this._collection,this),this.listenTo(this._superset,"add",r),this.listenTo(this._superset,"remove",a),this.listenTo(this._superset,"change",s),this.listenTo(this._superset,"reset",l)}function u(e){var n=e;return t.isFunction(e)||(n=function(t){return t.get(e)}),1===n.length&&(n=i(n)),n}var h=["_onModelEvent","_prepareModel","_removeReference","_reset","add","initialize","sync","remove","reset","set","push","pop","unshift","shift","sort","parse","fetch","create","model","off","on","listenTo","listenToOnce","bind","trigger","once","stopListening"],d=["add","remove","reset","sort","destroy"],f={setSort:function(t){return this._comparator=t?u(t):t,l.call(this),this.trigger(t?"sorted:add":"sorted:remove"),this},removeSort:function(){return this.setSort(),this},superset:function(){return this._superset},destroy:function(){this.stopListening(),this._collection.reset([]),this._superset=this._collection,this.length=0,this.trigger("sorted:destroy")}};return t.extend(c.prototype,f,e.Events),c}.apply(e,i),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";function i(t){try{window.parent.location.href=t}catch(e){window.location.href=t}}var o=n(30);t.exports=function(){return o.web.post("/logout").then(function(t){i(t&&t.redirect?t.redirect:"/")}).fail(function(){i("/")})}},,function(t,e,n){"use strict";var i=n(15),o=n(2);t.exports=function(){return i.calendar={lastDay:"[Yesterday at] LT",sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",lastWeek:"[last] dddd [at] LT",nextWeek:"dddd [at] LT",sameElse:"LL"},i.lang(o.lang()),i.defaultFormat="YYYY-MM-DDTHH:mm:ss.SSSZ",i}()},,,function(t,e,n){var i,o;i=[n(12)],o=function(t){return function(n){var i;i=e,i.mixins={},i.mixin=function(e){var n=t.chain(arguments).toArray().rest().flatten().value(),o={};t(n).each(function(n){t.isString(n)&&(n=i.mixins[n]),t(n).each(function(n,i){t.isFunction(n)?(e.prototype[i]&&(o[i]=o[i]||[e.prototype[i]],o[i].push(n)),e.prototype[i]=n):t.isObject(n)&&(e.prototype[i]=t.extend({},n,e.prototype[i]||{}))})}),t(o).each(function(n,i){e.prototype[i]=function(){var e=this,i=arguments,o=void 0;return t(n).each(function(n){var r=t.isFunction(n)?n.apply(e,i):n;o=void 0===r?o:r}),o}})};var o;return i.patch=function(e){o=e.Model.extend;var n=function(t,e){var n=o.call(this,t,e),r=n.prototype.mixins;return r&&n.prototype.hasOwnProperty("mixins")&&i.mixin(n,r),n};t([e.Model,e.Collection,e.Router,e.View]).each(function(e){e.mixin=function(){i.mixin(this,t.toArray(arguments))},e.extend=n})},i.unpatch=function(e){t([e.Model,e.Collection,e.Router,e.View]).each(function(t){t.mixin=void 0,t.extend=o})},i}(window),window.Cocktail}.apply(e,i),!(void 0!==o&&(t.exports=o))},,,function(t,e,n){"use strict";var i=n(6),o=n(5),r=n(80),a=n(242),s=n(243),l=n(244),c=n(16),u=n(2);t.exports=function(){function t(t){return r({username:t.login,size:128})}var e=i.ItemView.extend({template:s,modelEvents:{change:"render"},serializeData:function(){var e=this.model.toJSON();return e.blog&&(e.blogUrl=e.blog.match(/^https?:\/\//)?e.blog:"http://"+e.blog),e.inactive=e.invited||e.removed,e.avatarUrl=t(e),e}}),n=i.ItemView.extend({template:l,modelEvents:{change:"render"},events:{"click #button-onetoone":function(){this.parentPopover.hide();var t=this.model.get("login");c.trigger("navigation","/"+t,"chat",t,this.model.id)},"click #button-mention":function(){this.parentPopover.hide();var t=this.model.get("login");c.trigger("input.append","@"+t+" ")},"click #button-remove":function(){this.parentPopover.hide();var t=this.model.get("login");c.trigger("command.room.remove",t)}},serializeData:function(){var t=this.model.toJSON(),e=t.login!==u.user().get("username"),n=t.has_gitter_login&&e,i=e,o=e&&u().permissions.admin;return u.inOneToOneTroupeContext()&&u.troupe().get("user").username===t.login&&(n=!1),t.inactive=t.invited||t.removed,t.chatPrivately=n,t.mentionable=i,t.removable=o,t}}),h=a.extend({initialize:function(t){t.placement="horizontal",t.minHeight="88px";var i,r;this.model?(i=this.model.get("username"),r=this.model.get("displayName")):(i=t.username,r=t.displayName);var s=new o.Model({login:i,name:r});s.url="/private/gh/users/"+i,s.fetch(),t.footerView=new n({model:s}),a.prototype.initialize.apply(this,arguments),this.view=new e({model:s,userCollection:t.userCollection})}});return h}()},function(t,e,n){"use strict";var i=n(4),o=n(12),r=n(6),a=n(245);t.exports=function(){function t(t){var e=o.keys(t);o.each(e,function(e){var n=t[e];l[e]=n})}function e(){this._widgets=[]}function n(t,e,n,o){var r=new e(o.model);return r.render(),i(t).replaceWith(r.el),n.add(r),r}function s(t,o){if(!t)throw new Error("Cannot render the template since it's false, null or undefined.");var a;a="function"==typeof t?t:r.TemplateCache.get(t);var s=a(o),c=o._view;if(!o.renderViews||!c)return s;var u=i(i.parseHTML(s));u.addClass("view");var h=u.find("view"),d=c.widgetManager;return h.length&&!d&&(d=new e,c.widgetManager=d),h.each(function(){var t=this.getAttribute("data-id"),e=o.renderViews[t],i=l[e.widgetName];i&&n(this,i,d,e)}),u}var l={};e.prototype.add=function(t){this._widgets.push(t)},e.prototype.close=function(){o.each(this._widgets,function(t){t.close()}),this._widgets=[]};var c=r.Behavior.extend({initialize:function(){if(this.view.templateHelpers)throw new Error("Cannot use templateHelpers with Widgets");this.view.templateHelpers=function(){return{_view:this}}},onBeforeClose:function(){this.widgetManager&&(this.widgetManager.close(),this.widgetManager=null)}});return r.Renderer={render:s},a.register("Widgets",c),{register:t,Behavior:c}}()},function(t,e,n){"use strict";var i=n(4),o=n(127);t.exports=function(){return!function(t){var e=function(t,e){this.init("tooltip",t,e)};e.prototype={constructor:e,init:function(e,n,i){var r,a,s,l,c;for(this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.enabled=!o.isMobile,s=this.options.trigger.split(" "),c=s.length;c--;)l=s[c],"click"==l?this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this)):"manual"!=l&&(r="hover"==l?"mouseenter":"focus",a="hover"==l?"mouseleave":"blur",this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.onenter,this)),this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.onleave,this)));this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return e=t.extend({},t.fn[this.type].defaults,this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},onenter:function(t){this.enter(t.currentTarget)},enter:function(e){e=e||this.$element[0];var n,i=t.fn[this.type].defaults,o={};return this._options&&t.each(this._options,function(t,e){i[t]!=e&&(o[t]=e)},this),n=t(e)[this.type](o).data(this.type),n.hoverState="in",n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),void(this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show))):n.show()},onleave:function(t){this.leave(t.currentTarget)},leave:function(e){e=e||this.$element[0];var n=t(e)[this.type](this._options).data(this.type);if("in"===n.hoverState)return n.hoverState="out",this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?void(this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},show:function(){var n,i,o,r,a,s,l=t.Event("show");if(e.prev&&e.prev!==this&&e.prev.hide(),e.prev=this,this.hasContent()&&this.enabled){if(this.$element.trigger(l),l.isDefaultPrevented())return;n=this.tip(),this.setContent(),this.options.animation&&n.addClass("fade"),a="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,n.detach().css({top:0,left:0,display:"block"}),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element),i=this.getPosition(),o=n[0].offsetWidth,r=n[0].offsetHeight;var a=this.options.placement;"vertical"===a&&(a=this.selectBestVerticalPlacement(n,this.$element))}switch(a){case"bottom":s={top:i.top+i.height,left:i.left+i.width/2-o/2};break;case"top":s={top:i.top-r,left:i.left+i.width/2-o/2};break;case"left":s={top:i.top+i.height/2-r/2,left:i.left-o};break;case"right":s={top:i.top+i.height/2-r/2,left:i.left+i.width}}this.applyPlacement(s,a),this.$element.trigger("shown")},selectBestVerticalPlacement:function(t,e){var n=e[0].getBoundingClientRect();return n.top<60?"bottom":"top"},applyPlacement:function(t,e){var n,i,o,r,a=this.tip(),s=a[0].offsetWidth,l=a[0].offsetHeight;a.offset(t).addClass(e).addClass("in"),n=a[0].offsetWidth,i=a[0].offsetHeight,"top"==e&&i!=l&&(t.top=t.top+l-i,r=!0),"bottom"==e||"top"==e?(o=0,t.left<0&&(o=-2*t.left,t.left=0,a.offset(t),n=a[0].offsetWidth,i=a[0].offsetHeight),this.replaceArrow(o-s+n,n,"left")):this.replaceArrow(i-l,i,"top"),r&&a.offset(t)},replaceArrow:function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){function e(){var e=setTimeout(function(){n.off(t.support.transition.end).detach()},500);n.one(t.support.transition.end,function(){clearTimeout(e),n.detach()})}var n=this.tip(),i=t.Event("hide");return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?e():n.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},getTitle:function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},tip:function(){return this.$tip=this.$tip||t(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var n=e?t(e.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var i=t(this),o=i.data("tooltip"),r="object"==typeof n&&n;o||i.data("tooltip",o=new e(this,r)),"string"==typeof n&&o[n]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(window.jQuery),i}()},function(t,e,n){"use strict";var i=n(2);t.exports=function(){function t(t,e){for(var n=e.shift();n;n=e.shift())t=t.replace("%s",n);return t}var e=i().locale;return function(n){var i=Array.prototype.slice.call(arguments,1),o=e&&e[n]||n;return t(o,i)}}()},,,,,,function(t){"use strict";t.exports=function(){return{panelWidthValue:"280px",menuSlideValue:"320px",hidePanelValue:"-280px",shiftedPanelValue:"-200px",shiftedMarginValue:"200px",isMobile:navigator.userAgent.match(/mobile/i)?!0:!1}
}()},function(t,e,n){"use strict";var i=n(12),o=n(16);n(253),t.exports=function(){return{initialize:function(){var t;if(t=i.result(this,"keyboardEvents")){var e=this,n=/\s+/,r=function(t,n){i.isFunction(n)||(n=e[n]),n&&e.listenTo(o,"keyboard."+t,n,e)};i.each(t,function(t,e){if(n.test(e)){var o=e.split(n);i.each(o,function(e){r(e,t)})}else r(e,t)})}}}}()},,,,,function(t,e,n){"use strict";var i=n(4),o=n(12),r=n(5),a=n(6),s=n(256),l=n(257),c=n(3),u=n(258);n(79),t.exports=function(){var t={},e=window._troupeCompactView=u(),n=-1!==window.navigator.userAgent.indexOf("MSIE 9.0"),h=navigator.userAgent.match(/(iPad)/);return e&&i("body").addClass("trpCompactView"),window._troupeIsIE9=n,h&&(window._troupeIsTablet=!0),t.Modal=a.ItemView.extend({template:s,className:"modal",events:{"click .button":"onMenuItemClicked"},initialize:function(t){this.options={keyboard:!0,backdrop:!0,fade:!0,autoRemove:!0,menuItems:[],disableClose:!1,hideHeader:!1,title:null,navigable:!1},o.bindAll(this,"hide","onMenuItemClicked"),o.extend(this.options,t),this.view=this.options.view||this.view},serializeData:function(){var t=this.menuItems||this.options.menuItems;return{hideHeader:this.options.hideHeader,customTitle:!!this.options.title,title:this.options.title,hasMenuItems:!!t.length,menuItems:t,disableClose:this.options.disableClose}},onMenuItemClicked:function(t){t.preventDefault();var e=i(t.target).attr("data-action");this.view.trigger("menuItemClicked",e),this.trigger("menuItemClicked",e)},onRender:function(){var t=this;this.$el.hide();var n=this.$el.find(".modal-body");n.append(this.view.render().el),this.$el.find(".close").on("click",this.hide),e||this.disableAutoFocus||window.setTimeout(function(){try{var e=t.$el.find("input[type=text], input[type=url], input[type=tel], input[type=number], input[type=color], input[type=email]")[0];e&&(e.focus(),e.select())}catch(n){}},100)},setButtonState:function(t,e){var n=this.$el.find(".modal-footer button[data-action="+t+"]");e?n.removeAttr("disabled"):n.attr("disabled",!0)},hideActions:function(){var t=this.$el.find(".modal-footer .action");t.hide()},showActions:function(){var t=this.$el.find(".modal-footer .action");t.show()},showPremium:function(){var t=this.$el.find(".modal-footer .premium");t.removeClass("hidden"),t.show()},hidePremium:function(){var t=this.$el.find(".modal-footer .premium");t.addClass("hidden"),t.hide()},onClose:function(){this.view.close(),this.view.dialog=null,this.$el.find(".close").off("click")},prepare:function(){this.rendered||(this.render(),this.rendered=!0)},setTitle:function(t){this.options.title=t,this.$el.find(".trpModalTitleHeader").text(t)},supportsModelReplacement:function(){return this.view&&this.view.supportsModelReplacement&&this.view.supportsModelReplacement()},replaceModel:function(t){return this.view.replaceModel(t)},show:function(){this.view.dialog=this;var t=this;this.isShown||(this.prepare(),i("body").addClass("modal-open"),this.isShown=!0,this.$el.trigger("show"),this.trigger("show"),this.escape(),this.backdrop(function(){var e=i.support.transition&&t.$el.hasClass("fade");if(t.$el.parent().length||t.$el.appendTo(document.body),t.$el.show(),e){var n=t.$el[0].offsetWidth;n++}t.$el.addClass("in"),e?t.$el.one(i.support.transition.end,function(){t.$el.trigger("shown"),t.trigger("shown")}):(t.$el.trigger("shown"),t.trigger("shown"))}))},hide:function(t){return t&&t.preventDefault(),this.navigable?void(window.location="#"):void this.hideInternal()},navigationalHide:function(){this.options.fade=!1,this.hideInternal()},hideInternal:function(){this.isShown&&(this.isShown=!1,i("body").removeClass("modal-open"),this.escape(),this.$el.trigger("hide").removeClass("in"),this.trigger("hide"),i.support.transition&&this.options.fade?this.hideWithTransition(this):this.hideModal())},transitionTo:function(t){t.options.backdrop=!1;var e=this.$backdrop;this.$backdrop=null,this.hide(),e.modal=t,t.show(),t.$backdrop=e},hideWithTransition:function(){var t=this,e=setTimeout(function(){t.$el.off(i.support.transition.end),t.hideModal()},500);this.$el.one(i.support.transition.end,function(){clearTimeout(e),t.hideModal()})},hideModal:function(){this.$el.hide().trigger("hidden"),this.trigger("hidden"),this.backdrop(),this.options.autoRemove&&this.close()},backdrop:function(t){var e=this.options.fade?"fade":"";if(this.isShown&&this.options.backdrop){var n=i.support.transition&&e;if(this.$backdrop=i('<div class="modal-backdrop '+e+'" />').appendTo(document.body),"static"!=this.options.backdrop&&!this.options.disableClose){var o=this.$backdrop;this.$backdrop.click(function(){o.modal.hide()})}if(this.$backdrop.modal=this,n){var r=this.$backdrop[0].offsetWidth;r++}this.$backdrop.addClass("in"),n?this.$backdrop.one(i.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),i.support.transition&&this.options.fade?this.$backdrop.one(i.support.transition.end,i.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},escape:function(){function t(t){27==t.which&&e.hide()}if(!this.options.disableClose){var e=this;this.isShown&&this.options.keyboard?i(document).on("keydown",t):this.isShown||i(document).off("keydown",t)}}}),t.Modal.wrapView=function(e,n){var i=t.Modal.extend(n);return i.prototype.initialize=function(n){n=n||{},t.Modal.prototype.initialize.apply(this,arguments),this.view=new e(n)},i},t.SortableMarionetteView={initialize:function(){this.listenTo(this,"before:render",this.onBeforeRenderSort),this.listenTo(this,"render",this.onRenderSort)},onBeforeRenderSort:function(){this.isRendering=!0,this.footerElement=this.footer?this.$el.children(this.footer)[0]:null},onRenderSort:function(){delete this.isRendering},appendHtml:function(t,e,n){function o(e){for(var n=1,i=r(e+1);!i&&e+n+1<t.collection.length;)n+=1,i=r(e+n);return i}function r(e){if(!(e>=t.collection.length)){var n=t.children.findByModel(t.collection.at(e));return n}}var a=this.footerElement,s=t.itemViewContainer||t.el,l=t.itemViewContainer?i(t.itemViewContainer):t.$el;if(this.isRendering)return void(a?e.$el.insertBefore(a):l.append(e.el));var u;return 0===n?(u=o(0),void(u?e.$el.insertBefore(u.el):a?e.$el.insertBefore(a):e.$el.appendTo(s))):n==t.collection.length-1?void(a?e.$el.insertBefore(a):e.$el.appendTo(s)):(u=r(n-1),void(u?e.$el.insertAfter(u.$el):(u=o(n),u?e.$el.insertBefore(u.el):(c.info("Inserting *after* the bottom for collection ",t.collection.url,u,e),a?e.$el.insertBefore(a):e.$el.appendTo(s)))))}},t.LoadingView=a.ItemView.extend({template:l}),t.LoadingCollectionMixin={loadingView:t.LoadingView,initialize:function(){this.showEmptyView=this.showLoadingView},showLoadingView:function(){if(this.collection.loading){var t=a.getOption(this,"loadingView");this.loadingModel||(this.loadingModel=new r.Model);var e=this.children.findByModel(this.loadingModel);return t&&!e&&(this.addItemView(this.loadingModel,t,0),this.listenToOnce(this.collection,"loaded",function(){return this.removeItemView(this.loadingModel),0===this.collection.length?(this.constructor.prototype.showEmptyView.call(this),!0):void 0})),!0}return this.constructor.prototype.showEmptyView.call(this),!0}},t.DelayedShowLayoutMixin={show:function(t,e){var n=e.collection,i=this;return n.hasLoaded&&!n.hasLoaded()?void n.once("sync reset",function(){i[t].show(e)}):void i[t].show(e)}},t}()},function(t,e,n){"use strict";var i=n(259);t.exports=function(){switch(i()){case"Mac":return{cmd:"",room:"ctrl",gitter:"ctrl"};case"Windows":return{cmd:"ctrl",room:"",gitter:""};default:return{cmd:"ctrl",room:"",gitter:"alt"}}}()},,,,,,,,,,,,function(t){"use strict";t.exports=function(){return function(t){var e=t||navigator.userAgent;return e.indexOf("Mobile")>=0}}()},function(t){"use strict";t.exports=function(){return function(t){var e=t||"object"==typeof navigator&&navigator.userAgent||"";return e.toLowerCase().indexOf("gitter")>=0}}()},function(t,e,n){"use strict";var i=n(4),o=n(2),r=n(274),a=n(30),s=n(49),l=n(6),c=n(275),u=n(16),h=n(133),d=n(115),f=n(100);n(276),n(120),t.exports=function(){var t=99,e=25,n=l.ItemView.extend({tagName:"li",className:"room-list-item",template:c,modelEvents:{"change:unreadItems change:lurk change:activity change:mentions":"render"},events:{click:"clicked","click .js-close-button":"onItemClose","click .js-leave-button":"onItemLeave"},initialize:function(){this.updateCurrentRoom(),this.listenTo(u,"navigation",function(t){var e=document.createElement("a");e.href=t,this.updateCurrentRoom(e.pathname)})},updateCurrentRoom:function(t){var e=t||window.location.pathname,n=this.model.get("url")===e;this.isCurrentRoom!==n&&(this.isCurrentRoom=n,this.render())},serializeData:function(){var t=this.model.toJSON();return t.name=s(t.name,e),t.iconClass=r(this.model),t},onItemClose:function(t){t.stopPropagation(),a.user["delete"]("/rooms/"+this.model.id)},onItemLeave:function(t){t.stopPropagation(),a["delete"]("/v1/rooms/"+this.model.id+"/users/"+o.getUserId()).then(function(){this.model.get("url")===window.location.pathname&&u.trigger("navigation",o.getUser().url,"home","")}.bind(this)).fail(function(){})},onRender:function(){function e(){if(c)return"@";if(!l)return u?u>t?"99+":u:void 0}var n=this;this.$el.toggleClass("room-list-item--current-room",!!this.isCurrentRoom);var i=n.model;f.set(n.el,"id",i.id);var r=n.$el,a=!n.initialRender;if(n.initialRender=!0,!a||i.changed){var s=r.find(".js-unread-badge"),l=n.model.get("lurk"),c=n.model.get("mentions"),u=n.model.get("unreadItems"),h=n.model.get("activity"),d=e()||"";s.text(d),s.toggleClass("shown",!!d),s.toggleClass("mention",!!c),l&&!c?(r.toggleClass("chatting",!!h),h&&"activity"in i.changed&&r.addClass("chatting-now"),n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(function(){delete n.timeout,r.removeClass(n.model.id===o.getTroupeId()?"chatting chatting-now":"chatting-now")},1600)):r.removeClass("chatting chatting-now"),this.$el.find(".js-close-button").tooltip({placement:"left"}),this.$el.find(".js-leave-button").tooltip({placement:"left"})}},clearSearch:function(){i("#list-search-input").val(""),i("#list-search").hide(),i("#list-mega").show()},clicked:function(){var t=this.model;this.model.get("exists")===!1?window.location.hash="#confirm/"+t.get("uri"):this.model.get("url")!==window.location.pathname&&u.trigger("navigation",t.get("url"),"chat",t.get("name"),t.id)}}),p=l.CollectionView.extend({itemView:n,itemViewOptions:function(t){var e={};return t&&t.id&&(e.el=this.$el.find('.room-list-item[data-id="'+t.id+'"]')[0],e.el&&i(e.el).hasClass("dragged")&&delete e.el),e},initialize:function(t){this.bindUIElements(),t.draggable&&this.makeDraggable(t.dropTarget),this.roomsCollection=t.roomsCollection},makeDraggable:function(t){var e=!1,n=this;this.$el.sortable({connectWith:".room-list",group:"list-mega",pullPlaceholder:!1,drop:t,distance:8,onDrag:function(t,e){i(".placeholder").html(t.html()),i(".placeholder").addClass(t.attr("class")),t.css(e)},isValidTarget:function(t,e){var n=e.el.parent().attr("id");return"list-favs"===n?(i(".dragged").hide(),i(".placeholder").show()):"list-recents"===n&&(i(".dragged").show(),i(".placeholder").hide()),!0},onDrop:function(t,i,o){var r,a=t[0],s=n.roomsCollection.get(f.get(a,"id")),l=i.el.parent().attr("id");if(!e)if("list-favs"===l){var c=a.previousElementSibling;if(c){var u=n.roomsCollection.get(f.get(c,"id"));r=u.get("favourite")+1}else r=1;s.set("favourite",r),s.save()}else"list-recents"===l&&(s.set("favourite",null),s.save());e=!1,o(t,i)},onCancel:function(t,o){e=!0;var r=t[0];if("list-favs"==i(o.el).parent().attr("id")){var a=n.roomsCollection.get(f.get(r,"id"));a.set("favourite",!1).save(),t.remove(),e=!0}}})}});return d.mixin(p,h.SortableMarionetteView),p}()},function(t,e,n){"use strict";var i=n(49),o=n(274),r=n(6),a=n(277);t.exports=function(){var t=r.ItemView.extend({tagName:"li",className:"room-list-item",template:a,modelEvents:{change:"render"},serializeData:function(){var t=this.model.toJSON();return t.uri=i(t.uri),t.repoTypeClass=o(t),t.linkUrl=t.exists?"/"+this.model.get("uri"):"#confirm/"+this.model.get("uri"),t}});return r.CollectionView.extend({tagName:"ul",className:"room-list",itemView:t})}()},function(t,e,n){"use strict";var i=n(2),o=n(6),r=n(16),a=n(146),s=n(147),l=n(278),c=n(110);n(119),t.exports=function(){return o.ItemView.extend({template:l,events:{"click #link-home":"homeClicked","click #link-logout":"logoutClicked"},behaviors:{Widgets:{}},initialize:function(t){this.state=t.state,this.listenTo(this.state,"change",this.render),this.render()},serializeData:function(){var t=i.getUser(),e=i.user(),n=a(),o=s();return{menuHeaderExpanded:this.state.get("menuHeaderExpanded"),isMobile:n,displayName:t.displayName||t.username,user:e,billingUrl:i.env("billingUrl"),showBilling:!n,showGetApps:!n&&!o,showSignout:!o}},homeClicked:function(t){t.preventDefault(),i().user.url!==window.location.pathname&&r.trigger("navigation",i.getUser().url,"home","")},logoutClicked:function(t){t.preventDefault(),c()}})}()},function(t,e,n){"use strict";var i=n(2),o=n(6),r=n(279),a=n(16);t.exports=function(){var t=o.ItemView.extend({tagName:"li",className:"room-list-item",template:r,modelEvents:{change:"render"},events:{click:"clicked"},serializeData:function(){var t={};return t.org=this.model.toJSON(),t.user=i.getUser(),t},clicked:function(t){t.preventDefault(),a.trigger("navigation","/"+this.model.get("name"),"chat",this.model.get("name"),null)}});return o.CollectionView.extend({tagName:"ul",className:"room-list",itemView:t})}()},function(t,e,n){var i,o;/*! nanoScrollerJS - v0.8.4 - 2014
	* http://jamesflorentino.github.com/nanoScrollerJS/
	* Copyright (c) 2014 James Florentino; Licensed MIT */
!function(r){return i=[n(4)],o=function(t){return r(t,window,document)}.apply(e,i),!(void 0!==o&&(t.exports=o))}(function(t,e,n){"use strict";var i,o,r,a,s,l,c,u,h,d,f,p,m,g,v,y,w,b,_,x,k,T,C,M,E,S,D,I,L,A,R;C={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},b="scrollbar",w="scroll",h="mousedown",d="mouseenter",f="mousemove",m="mousewheel",p="mouseup",y="resize",s="drag",l="enter",x="up",v="panedown",r="DOMMouseScroll",a="down",k="wheel",c="keydown",u="keyup",_="touchmove",i="Microsoft Internet Explorer"===e.navigator.appName&&/msie 7./i.test(e.navigator.appVersion)&&e.ActiveXObject,o=null,D=e.requestAnimationFrame,T=e.cancelAnimationFrame,L=n.createElement("div").style,R=function(){var t,e,n,i,o,r;for(i=["t","webkitT","MozT","msT","OT"],t=o=0,r=i.length;r>o;t=++o)if(n=i[t],e=i[t]+"ransform",e in L)return i[t].substr(0,i[t].length-1);return!1}(),A=function(t){return R===!1?!1:""===R?t:R+t.charAt(0).toUpperCase()+t.substr(1)},I=A("transform"),E=I!==!1,M=function(){var t,e,i;return t=n.createElement("div"),e=t.style,e.position="absolute",e.width="100px",e.height="100px",e.overflow=w,e.top="-9999px",n.body.appendChild(t),i=t.offsetWidth-t.clientWidth,n.body.removeChild(t),i},S=function(){var t,n,i;return n=e.navigator.userAgent,(t=/(?=.+Mac OS X)(?=.+Firefox)/.test(n))?(i=/Firefox\/\d{2}\./.exec(n),i&&(i=i[0].replace(/\D+/g,"")),t&&+i>23):!1},g=function(){function c(i,r){this.el=i,this.options=r,o||(o=M()),this.$el=t(this.el),this.doc=t(this.options.documentContext||n),this.win=t(this.options.windowContext||e),this.body=this.doc.find("body"),this.$content=this.$el.children("."+r.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return c.prototype.preventScrolling=function(t,e){if(this.isActive)if(t.type===r)(e===a&&t.originalEvent.detail>0||e===x&&t.originalEvent.detail<0)&&t.preventDefault();else if(t.type===m){if(!t.originalEvent||!t.originalEvent.wheelDelta)return;(e===a&&t.originalEvent.wheelDelta<0||e===x&&t.originalEvent.wheelDelta>0)&&t.preventDefault()}},c.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},c.prototype.updateScrollValues=function(){var t,e;t=this.content,this.maxScrollTop=t.scrollHeight-t.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=t.scrollTop,e=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==e&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:e}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},c.prototype.setOnScrollStyles=function(){var t;E?(t={},t[I]="translate(0, "+this.sliderTop+"px)"):t={top:this.sliderTop},D?(T&&this.scrollRAF&&T(this.scrollRAF),this.scrollRAF=D(function(e){return function(){return e.scrollRAF=null,e.slider.css(t)}}(this))):this.slider.css(t)},c.prototype.createEvents=function(){this.events={down:function(t){return function(e){return t.isBeingDragged=!0,t.offsetY=e.pageY-t.slider.offset().top,t.slider.is(e.target)||(t.offsetY=0),t.pane.addClass("active"),t.doc.bind(f,t.events[s]).bind(p,t.events[x]),t.body.bind(d,t.events[l]),!1}}(this),drag:function(t){return function(e){return t.sliderY=e.pageY-t.$el.offset().top-t.paneTop-(t.offsetY||.5*t.sliderHeight),t.scroll(),t.contentScrollTop>=t.maxScrollTop&&t.prevScrollTop!==t.maxScrollTop?t.$el.trigger("scrollend"):0===t.contentScrollTop&&0!==t.prevScrollTop&&t.$el.trigger("scrolltop"),!1}}(this),up:function(t){return function(){return t.isBeingDragged=!1,t.pane.removeClass("active"),t.doc.unbind(f,t.events[s]).unbind(p,t.events[x]),t.body.unbind(d,t.events[l]),!1}}(this),resize:function(t){return function(){t.reset()}}(this),panedown:function(t){return function(e){return t.sliderY=(e.offsetY||e.originalEvent.layerY)-.5*t.sliderHeight,t.scroll(),t.events.down(e),!1}}(this),scroll:function(t){return function(e){t.updateScrollValues(),t.isBeingDragged||(t.iOSNativeScrolling||(t.sliderY=t.sliderTop,t.setOnScrollStyles()),null!=e&&(t.contentScrollTop>=t.maxScrollTop?(t.options.preventPageScrolling&&t.preventScrolling(e,a),t.prevScrollTop!==t.maxScrollTop&&t.$el.trigger("scrollend")):0===t.contentScrollTop&&(t.options.preventPageScrolling&&t.preventScrolling(e,x),0!==t.prevScrollTop&&t.$el.trigger("scrolltop"))))}}(this),wheel:function(t){return function(e){var n;if(null!=e)return n=e.delta||e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.detail||e.originalEvent&&-e.originalEvent.detail,n&&(t.sliderY+=-n/3),t.scroll(),!1}}(this),enter:function(t){return function(e){var n;if(t.isBeingDragged)return 1!==(e.buttons||e.which)?(n=t.events)[x].apply(n,arguments):void 0}}(this)}},c.prototype.addEvents=function(){var t;this.removeEvents(),t=this.events,this.options.disableResize||this.win.bind(y,t[y]),this.iOSNativeScrolling||(this.slider.bind(h,t[a]),this.pane.bind(h,t[v]).bind(""+m+" "+r,t[k])),this.$content.bind(""+w+" "+m+" "+r+" "+_,t[w])},c.prototype.removeEvents=function(){var t;t=this.events,this.win.unbind(y,t[y]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+w+" "+m+" "+r+" "+_,t[w])},c.prototype.generate=function(){var t,n,i,r,a,s,l;return r=this.options,s=r.paneClass,l=r.sliderClass,t=r.contentClass,(a=this.$el.children("."+s)).length||a.children("."+l).length||this.$el.append('<div class="'+s+'"><div class="'+l+'" /></div>'),this.pane=this.$el.children("."+s),this.slider=this.pane.find("."+l),0===o&&S()?(i=e.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),n={right:-14,paddingRight:+i+14}):o&&(n={right:-o},this.$el.addClass("has-scrollbar")),null!=n&&this.$content.css(n),this},c.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},c.prototype.reset=function(){var t,e,n,r,a,s,l,c,u,h,d,f;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),t=this.content,r=t.style,a=r.overflowY,i&&this.$content.css({height:this.$content.height()}),e=t.scrollHeight+o,h=parseInt(this.$el.css("max-height"),10),h>0&&(this.$el.height(""),this.$el.height(t.scrollHeight>h?h:t.scrollHeight)),l=this.pane.outerHeight(!1),u=parseInt(this.pane.css("top"),10),s=parseInt(this.pane.css("bottom"),10),c=l+u+s,f=Math.round(c/e*c),f<this.options.sliderMinHeight?f=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&f>this.options.sliderMaxHeight&&(f=this.options.sliderMaxHeight),a===w&&r.overflowX!==w&&(f+=o),this.maxSliderTop=c-f,this.contentHeight=e,this.paneHeight=l,this.paneOuterHeight=c,this.sliderHeight=f,this.paneTop=u,this.slider.height(f),this.events.scroll(),this.pane.show(),this.isActive=!0,t.scrollHeight===t.clientHeight||this.pane.outerHeight(!0)>=t.scrollHeight&&a!==w?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===t.scrollHeight&&a===w?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),n=this.$content.css("position"),("static"===n||"relative"===n)&&(d=parseInt(this.$content.css("right"),10),d&&this.$content.css({right:"",marginRight:d})),this)},c.prototype.scroll=function(){return this.isActive?(this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this):void 0},c.prototype.scrollBottom=function(t){return this.isActive?(this.$content.scrollTop(this.contentHeight-this.$content.height()-t).trigger(m),this.stop().restore(),this):void 0},c.prototype.scrollTop=function(t){return this.isActive?(this.$content.scrollTop(+t).trigger(m),this.stop().restore(),this):void 0},c.prototype.scrollTo=function(t){return this.isActive?(this.scrollTop(this.$el.find(t).get(0).offsetTop),this):void 0},c.prototype.stop=function(){return T&&this.scrollRAF&&(T(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},c.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),i&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass("has-scrollbar")&&(this.$el.removeClass("has-scrollbar"),this.$content.css({right:""})),this},c.prototype.flash=function(){return!this.iOSNativeScrolling&&this.isActive?(this.reset(),this.pane.addClass("flashed"),setTimeout(function(t){return function(){t.pane.removeClass("flashed")}}(this),this.options.flashDelay),this):void 0},c}(),t.fn.nanoScroller=function(e){return this.each(function(){var n,i;if((i=this.nanoscroller)||(n=t.extend({},C,e),this.nanoscroller=i=new g(this,n)),e&&"object"==typeof e){if(t.extend(i.options,e),null!=e.scrollBottom)return i.scrollBottom(e.scrollBottom);if(null!=e.scrollTop)return i.scrollTop(e.scrollTop);if(e.scrollTo)return i.scrollTo(e.scrollTo);if("bottom"===e.scroll)return i.scrollBottom(0);if("top"===e.scroll)return i.scrollTop(0);if(e.scroll&&e.scroll instanceof t)return i.scrollTo(e.scroll);if(e.stop)return i.stop();if(e.destroy)return i.destroy();if(e.flash)return i.flash()}return i.reset()})},t.fn.nanoScroller.Constructor=g})},,,,,,,,function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'<a href="'+s((o=null!=(o=e.link||(null!=t?t.link:t))?o:a,typeof o===r?o.call(t,{name:"link",hash:{},data:i}):o))+'"><div class="notification-header">'+s((o=null!=(o=e.title||(null!=t?t.title:t))?o:a,typeof o===r?o.call(t,{name:"title",hash:{},data:i}):o))+'</div><div class="notification-text">'+s((o=null!=(o=e.text||(null!=t?t.text:t))?o:a,typeof o===r?o.call(t,{name:"text",hash:{},data:i}):o))+"</div></a>\n"},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="notification-header">Enable Notifications</div>\n<div class="notification-text"><a href="#" id="enable">Click here to enable notifications</a></div>'},useData:!0})},function(t,e,n){"use strict";var i=n(10)["default"];t.exports=function(){function t(t,e){return this.renderViews||(this.renderViews=[]),this.renderViews.push({widgetName:t,model:e.hash}),new i.SafeString("<view data-id='"+(this.renderViews.length-1)+"'></view>")}return i.registerHelper("widget",t),t}()},function(t,e,n){"use strict";var i=n(95),o=n(10)["default"];o.registerHelper("cdn",i)},function(t,e,n){"use strict";var i=n(10)["default"];t.exports=function(){function t(t){return t.fn(this)}return i.registerHelper("isMobile",t),t}()},,,,,,,,,,,,,,,,,,,,,function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return s((o=null!=(o=e.role||(null!=t?t.role:t))?o:a,typeof o===r?o.call(t,{name:"role",hash:{},data:i}):o))},3:function(){return"invited"},5:function(t,e,n,i){var o,r,a="function",s=e.helperMissing,l=this.escapeExpression,c=l((r=null!=(r=e.userDisplayName||(null!=t?t.userDisplayName:t))?r:s,typeof r===a?r.call(t,{name:"userDisplayName",hash:{},data:i}):r));return o=e["if"].call(t,null!=t?t.role:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c},6:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return" ("+s((o=null!=(o=e.role||(null!=t?t.role:t))?o:a,typeof o===r?o.call(t,{name:"role",hash:{},data:i}):o))+")"},8:function(){return'<div class="trpStatus" id="status"> </div>'},10:function(){return'<div class="trpDPUnreadCount">12</div>'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a,s="function",l=e.helperMissing,c=this.escapeExpression,u=e.blockHelperMissing,h='<div\n  class="trpDisplayPicture  avatar-'+c((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===s?r.call(t,{name:"id",hash:{},data:i}):r))+"  avatar-"+c((r=null!=(r=e.avatarSize||(null!=t?t.avatarSize:t))?r:l,typeof r===s?r.call(t,{name:"avatarSize",hash:{},data:i}):r))+"  "+c((r=null!=(r=e.presenceClass||(null!=t?t.presenceClass:t))?r:l,typeof r===s?r.call(t,{name:"presenceClass",hash:{},data:i}):r))+"  ";return o=e["if"].call(t,null!=t?t.role:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(h+=o),h+="  ",o=e["if"].call(t,null!=t?t.inactive:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(h+=o),h+='"\n  style="background-image: url(\''+c((r=null!=(r=e.avatarUrl||(null!=t?t.avatarUrl:t))?r:l,typeof r===s?r.call(t,{name:"avatarUrl",hash:{},data:i}):r))+'\')"\n  data-original-title="',o=e["if"].call(t,null!=t?t.showTooltip:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(h+=o),h+='">\n  ',r=null!=(r=e.showStatus||(null!=t?t.showStatus:t))?r:l,a={name:"showStatus",hash:{},fn:this.program(8,i),inverse:this.noop,data:i},o=typeof r===s?r.call(t,a):r,e.showStatus||(o=u.call(t,o,a)),null!=o&&(h+=o),h+="\n  ",r=null!=(r=e.showBadge||(null!=t?t.showBadge:t))?r:l,a={name:"showBadge",hash:{},fn:this.program(10,i),inverse:this.noop,data:i},o=typeof r===s?r.call(t,a):r,e.showBadge||(o=u.call(t,o,a)),null!=o&&(h+=o),h+"\n</div>\n"},useData:!0})},,,,,,,,,,,,,,,,,,,function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(){return"menu-header--expanded"},3:function(t,e,n,i){var o,r='      <div class="menu-header__state">\n';return o=e["if"].call(t,null!=t?t.menuHeaderExpanded:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=o&&(r+=o),r+"      </div>\n"},4:function(){return'          <i class="octicon octicon-chevron-up"></i>\n'},6:function(){return'          <i class="octicon octicon-chevron-down"></i>\n'},8:function(t,e,n,i){var o,r=this.lambda,a=this.escapeExpression,s=e.helperMissing,l='              <li class="room-list-item  ';return o=e["if"].call(t,null!=t?t.selected:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='" data-id="'+a(r(null!=t?t.id:t,t))+'">',o=(e.prerenderRoomListItem||t&&t.prerenderRoomListItem||s).call(t,t,{name:"prerenderRoomListItem",hash:{},data:i}),null!=o&&(l+=o),l+"</li>\n"},9:function(){return"room-list-item--current-room"},11:function(t,e,n,i){var o,r=this.lambda,a=this.escapeExpression,s=e.helperMissing,l='              <li class="room-list-item ';return o=e["if"].call(t,null!=t?t.selected:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='" data-id="'+a(r(null!=t?t.id:t,t))+'">\n              ',o=(e.prerenderRoomListItem||t&&t.prerenderRoomListItem||s).call(t,t,{name:"prerenderRoomListItem",hash:{},data:i}),null!=o&&(l+=o),l+"\n              </li>\n            "},13:function(t,e,n,i){var o,r=e.helperMissing,a='<li class="room-list-item">';return o=(e.prerenderOrgListItem||t&&t.prerenderOrgListItem||r).call(t,t,{name:"prerenderOrgListItem",hash:{},data:i}),null!=o&&(a+=o),a+"</li>"},15:function(){return'  <div class="menu-actions">\n    <a class="trpButtonMedium trpBtnWhite gtrCreateRoomButton" href="#createroom">Create a room</a>\n  </div>\n'},17:function(){return'<div class="menu__hotspot">\n  <div id="menu-tab-unread-count" class="menu__tab"></div>\n</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression,s=this.lambda,l='<div id="left-menu-profile" class="menu-header ';return o=e["if"].call(t,null!=t?t.showExapandedHeader:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='">\n  <div class="menu-header__profile">\n    '+a((e.widget||t&&t.widget||r).call(t,"avatar",{name:"widget",hash:{size:"s",model:null!=t?t.user:t},data:i}))+'\n    <div class="menu-header__name"><p>'+a(s(null!=(o=null!=t?t.user:t)?o.displayName:o,t))+"</p></div>\n",o=e.unless.call(t,null!=t?t.isMobile:t,{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='  </div>\n</div>\n<div class="nano  menu-content" id="left-menu-scroll">\n  <div class="content  nano-content  menu-content__wrapper" style="outline: none">\n    <div class="menu-list" id="list-mega">\n      <div class=\'menu-list__item\' id="recentTroupesList">\n        <div class="menu-list__header">All Conversations</div>\n        <div class="list-favourites  menu-list__section--fav" id="list-favs">\n          <ul class="room-list">\n',o=e.each.call(t,null!=(o=null!=t?t.rooms:t)?o.favourites:o,{name:"each",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='          </ul>\n        </div>\n        <div class="list-recents  menu-list__section--recent" id="list-recents">\n          <ul class="room-list">\n',o=e.each.call(t,null!=(o=null!=t?t.rooms:t)?o.recents:o,{name:"each",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='</ul>\n        </div>\n      </div>\n      <div class=\'menu-list__item\' id="left-menu-list-suggested"></div>\n      <div class=\'menu-list__item\' id="left-menu-list-orgs">\n        <div class="menu-list__section--orgs" id="list">\n          <div class="menu-list__header">Your Organizations</div>\n          <ul class="room-list">',o=e.each.call(t,null!=t?t.orgs:t,{name:"each",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+="</ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n",o=e["if"].call(t,null!=t?t.showFooterButtons:t,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=o&&(l+=o),o=e["if"].call(t,null!=t?t.showUnreadTab:t,{name:"if",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(){return"    <div class='menu-list__header__details'>\n      <a href='#' class='js-hide hide-rooms'><i class='icon-cancel-circle'></i></a>\n    </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a="function",s=e.helperMissing,l=this.escapeExpression,c='<div class="menu-list__header">\n  <p>'+l((r=null!=(r=e.header||(null!=t?t.header:t))?r:s,typeof r===a?r.call(t,{name:"header",hash:{},data:i}):r))+"</p>\n";return o=e["if"].call(t,null!=t?t.canHide:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+"</div>\n<div class='menu-list__section--orgs' id=\"list\"></div>\n"},useData:!0})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t){t.exports=["_s","about","api","explore","home","login","mobile","settings","logout","apps"]},,,function(t){"use strict";t.exports=function(t){return t.toJSON?t.toJSON():t}},,,function(t,e,n){"use strict";var i=n(12);t.exports=function(){var t=Object.prototype,e=t.toString,n=function(t,o,r,a){if(t===o)return 0!==t||1/t===1/o;if(null==t||null==o)return t===o;t instanceof i&&(t=t._wrapped),o instanceof i&&(o=o._wrapped);var s=e.call(t);if(s!==e.call(o))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+o;case"[object Number]":return t!=+t?o!=+o:0==t?1/t==1/o:t==+o;case"[object Date]":case"[object Boolean]":return+t===+o}if("object"!=typeof t||"object"!=typeof o)return!1;for(var l=r.length;l--;)if(r[l]===t)return a[l]===o;var c=t.constructor,u=o.constructor;if(c!==u&&"constructor"in t&&"constructor"in o&&!(i.isFunction(c)&&c instanceof c&&i.isFunction(u)&&u instanceof u))return!1;r.push(t),a.push(o);var h=0,d=!0;if("[object Array]"===s){if(h=t.length,d=h===o.length)for(;h--&&(d=n(t[h],o[h],r,a)););}else if(i.isFunction(t.valueOf)&&i.isFunction(o.valueOf)){var f=t.valueOf(),p=o.valueOf();d=n(f,p,r,a)}else{for(var m in t)if(i.has(t,m)&&(h++,!(d=i.has(o,m)&&n(t[m],o[m],r,a))))break;if(d){for(m in o)if(i.has(o,m)&&!h--)break;d=!h}}return r.pop(),a.pop(),d};return function(t,e){return n(t,e,[],[])}}()},function(t,e,n){"use strict";var i=n(4),o=n(12),r=n(6),a=(n(133),n(286)),s=n(322);t.exports=function(){function t(t){for(var e=0;t&&t!=document;){var n=window.getComputedStyle(t,null);if(n){var i=n.getPropertyValue("z-index");i&&"auto"!==i&&(i=parseInt(i,10),i>e&&(e=i))}t=t.parentNode}return e}var e=10,n=750,l={animation:!0,selector:!1,title:"",footerView:null,delay:300,container:!1,placement:"right",scroller:null,width:"",minHeight:""},c=r.ItemView.extend({template:s,className:"popover",initialize:function(e){o.bindAll(this,"leave","enter"),this.options=o.extend({},l,e),this.view=this.options.view,this.titleView=this.options.titleView,this.title=this.options.title,this.footerView=this.options.footerView,this.options.scroller&&(this.$scroller=i(this.options.scroller),this.scroller=this.$scroller[0]),this.targetElement=this.options.targetElement,this.$targetElement=i(this.targetElement),this.zIndex=t(this.targetElement),this.$targetElement.on("mouseenter",this.enter),this.$targetElement.on("mouseleave",this.leave),this.once("close",function(){this.mutant&&this.mutant.disconnect()})},serializeData:function(){return this.options},onRender:function(){var t=this.$el;this.view.parentPopover=this,this.zIndex&&(this.el.style.zIndex=this.zIndex+1),this.titleView?t.find(".popover-title").append(this.titleView.render().el):t.find(".popover-title").text(this.title),t.find(".popover-content").append(this.view.render().el),t.find(".popover-inner").css("width",this.options.width).css("min-height",this.options.minHeight);var e=this.footerView;e&&(e.parentPopover=this,t.find(".popover-footer-content").append(e.render().el)),t.on("mouseenter",this.enter),t.on("mouseleave",this.leave),t.addClass("popover-hidden"),t.removeClass("fade top bottom left right in")},enter:function(){this.timeout&&clearTimeout(this.timeout)},leave:function(){if(!this.options.delay)return t.hide();var t=this;this.timeout=setTimeout(function(){t.hide()},t.options.delay)},onClose:function(){this.$el.off("mouseenter",this.enter),this.$el.off("mouseleave",this.leave),this.$targetElement.off("mouseenter",this.enter),this.$targetElement.off("mouseleave",this.leave),this.view.close()},show:function(){var t=this.render().$el,e=this.el;t.detach().css({left:"auto",display:"block"}),t.appendTo(i("body")),this.reposition(),t.removeClass("popover-hidden"),this.mutant=new a(e,this.reposition,{scope:this,timeout:20,transitions:!0,observers:{attributes:!0,characterData:!0}})},reposition:function(){try{var t=this.$el,n=this.el,i=this.getTargetPosition(),o=n.offsetWidth,r=n.offsetHeight,a=this.options.placement;switch(a){case"vertical":a=this.selectBestVerticalPlacement(t,this.targetElement);break;case"horizontal":a=this.selectBestHorizontalPlacement(t,this.targetElement)}var s;switch(a){case"bottom":s={top:i.top+i.height,left:i.left+i.width/2-o/2};break;case"top":s={top:i.top-r,left:i.left+i.width/2-o/2-2};break;case"left":s={top:i.top+i.height/2-r/2,right:document.body.clientWidth-i.left+e};break;case"right":s={top:i.top+i.height/2-r/2,left:i.left+i.width}}this.applyPlacement(s,a)}finally{this.mutant&&this.mutant.takeRecords()}},selectBestVerticalPlacement:function(t,e){var n=i(e);if(this.scroller){var o=this.scroller.scrollTop,r=this.scroller.scrollTop+this.scroller.clientHeight,a=(o+r)/2;return e.offsetTop>a?"top":"bottom"}var s=n.offsetParent();return s&&n.offset().top+t.height()+20>=s[0].clientHeight?"top":"bottom"},selectBestHorizontalPlacement:function(t,e){var n=e.getBoundingClientRect();return n.left<document.body.clientWidth/2?"right":"left"},applyPlacement:function(t,e){var n,i,o,r=this.$el,a=r[0],s=a.offsetWidth,l=a.offsetHeight,c=0;if("bottom"==e||"top"==e)t.left<0&&(c=-2*t.left,t.left=0);else if(t.top<0)c=-2*t.top,t.top=0;else{var u=this.scroller?this.scroller.clientHeight:window.innerHeight;t.top+l>u&&(c=2*(u-t.top-l-10),t.top=u-l-10)}var h={top:t.top};t.right?(h.left="initial",h.right=t.right):(h.left=t.left,h.right="initial"),r.css(h).addClass(e).addClass("in"),n=a.offsetWidth,i=a.offsetHeight,"top"==e&&i!=l&&(t.top=t.top+l-i,o=!0),"bottom"==e||"top"==e?this.replaceArrow(c-s+n,n,"left"):this.replaceArrow(c-l+i,i,"top"),o&&r.offset(t)},replaceArrow:function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},hide:function(){this.timeout&&clearTimeout(this.timeout);var t=this.$el;return t.removeClass("in"),t.addClass("popover-hidden"),setTimeout(function(){t.detach()},350),t.trigger("hidden"),this.trigger("hide"),this.close(),this},getTargetPosition:function(){var t=this.targetElement,e=o.extend({},t.getBoundingClientRect(),this.$targetElement.offset());return e},getTitle:function(){return this.options.title},arrow:function(){return this.$arrow||(this.$arrow=this.$el.find(".arrow")),this.$arrow}});return c.hoverTimeout=function(t,e,o){var r=setTimeout(function(){r&&e.call(o,t)},n);i(t.target).one("mouseout click",function(){clearTimeout(r),r=null})},c.singleton=function(t,e){t.popover=e,t.listenToOnce(e,"hide",function(){t.popover=null})},c}()},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return"  <div class='invited'>\n    <p><small>"+s((o=null!=(o=e.login||(null!=t?t.login:t))?o:a,typeof o===r?o.call(t,{name:"login",hash:{},data:i}):o))+" is not on Gitter yet.</small></p>\n  </div>\n"},3:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return"      <li>\n        <div class='trpUserDetails__icon'>\n          <i class='octicon octicon-organization'></i>\n        </div>\n        <span>"+s((o=null!=(o=e.company||(null!=t?t.company:t))?o:a,typeof o===r?o.call(t,{name:"company",hash:{},data:i}):o))+"</span>\n      </li>\n"},5:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return"      <li>\n        <div class='trpUserDetails__icon'>\n          <i class='octicon octicon-location'></i>\n        </div>\n        <span>"+s((o=null!=(o=e.location||(null!=t?t.location:t))?o:a,typeof o===r?o.call(t,{name:"location",hash:{},data:i}):o))+"</span>\n      </li>\n"},7:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return"      <li>\n        <div class='trpUserDetails__icon'>\n          <i class='octicon octicon-mail'></i>\n        </div>\n        <a class=\"email\" href=\"mailto:"+s((o=null!=(o=e.email||(null!=t?t.email:t))?o:a,typeof o===r?o.call(t,{name:"email",hash:{},data:i}):o))+'">'+s((o=null!=(o=e.email||(null!=t?t.email:t))?o:a,typeof o===r?o.call(t,{name:"email",hash:{},data:i}):o))+"</a>\n      </li>\n"},9:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return"      <li>\n        <div class='trpUserDetails__icon'>\n          <i class='octicon octicon-link'></i>\n        </div>\n        <a target=\"_blank\" href=\""+s((o=null!=(o=e.blogUrl||(null!=t?t.blogUrl:t))?o:a,typeof o===r?o.call(t,{name:"blogUrl",hash:{},data:i}):o))+'" class="url" rel="nofollow me">'+s((o=null!=(o=e.blog||(null!=t?t.blog:t))?o:a,typeof o===r?o.call(t,{name:"blog",hash:{},data:i}):o))+"</a>\n      </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a="function",s=e.helperMissing,l=this.escapeExpression,c="";return o=e["if"].call(t,null!=t?t.inactive:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+='<div style="float: left"><img src="'+l((r=null!=(r=e.avatarUrl||(null!=t?t.avatarUrl:t))?r:s,typeof r===a?r.call(t,{name:"avatarUrl",hash:{},data:i}):r))+'" class="avatar-l"/></div>\n<div class="trpPopoverDetails">\n  <h1>'+l((r=null!=(r=e.name||(null!=t?t.name:t))?r:s,typeof r===a?r.call(t,{name:"name",hash:{},data:i}):r))+'</h1>\n  <h2><a href="http://github.com/'+l((r=null!=(r=e.login||(null!=t?t.login:t))?r:s,typeof r===a?r.call(t,{name:"login",hash:{},data:i}):r))+'">'+l((r=null!=(r=e.login||(null!=t?t.login:t))?r:s,typeof r===a?r.call(t,{name:"login",hash:{},data:i}):r))+'</a></h3>\n  <div class="vcard-stats">\n      <strong class="vcard-stat-count">'+l((r=null!=(r=e.followers||(null!=t?t.followers:t))?r:s,typeof r===a?r.call(t,{name:"followers",hash:{},data:i}):r))+'</strong>\n      followers &nbsp;\n      <strong class="vcard-stat-count">'+l((r=null!=(r=e.public_repos||(null!=t?t.public_repos:t))?r:s,typeof r===a?r.call(t,{name:"public_repos",hash:{},data:i}):r))+'</strong>\n      repos &nbsp;\n      <strong class="vcard-stat-count">'+l((r=null!=(r=e.following||(null!=t?t.following:t))?r:s,typeof r===a?r.call(t,{name:"following",hash:{},data:i}):r))+'</strong>\n      following &nbsp;\n  </div>\n\n  <ul class="trpUserDetails">\n',o=e["if"].call(t,null!=t?t.company:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+="\n",o=e["if"].call(t,null!=t?t.location:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+="\n",o=e["if"].call(t,null!=t?t.email:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+="\n",o=e["if"].call(t,null!=t?t.blog:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+"  </ul>\n</div>\n"},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'  <button class="trpBtnLightGrey trpButtonSmall" id="button-mention">\n    Mention\n  </button>\n  <a href="'+s((o=null!=(o=e.html_url||(null!=t?t.html_url:t))?o:a,typeof o===r?o.call(t,{name:"html_url",hash:{},data:i}):o))+'" target="_blank" class="trpBtnBlue trpButtonSmall open-in-github">Open in GitHub</a>\n'},3:function(){return'  <button class="trpBtnGreen trpButtonSmall" id="button-onetoone">\n    Chat Privately\n  </button>\n'},5:function(){return'  <button class="trpBtnRed trpButtonSmall" id="button-remove">\n    Remove\n  </button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r="";return o=e["if"].call(t,null!=t?t.mentionable:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(r+=o),o=e["if"].call(t,null!=t?t.chatPrivately:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(r+=o),o=e["if"].call(t,null!=t?t.removable:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r},useData:!0})},function(t,e,n){"use strict";var i=n(6);t.exports=function(){var t={};return i.Behaviors.behaviorsLookup=function(){return t},{register:function(e,n){t[e]=n}}}()},,,,,,,,function(t,e,n){"use strict";var i=n(16),o=n(134),r=n(12),a=n(9);t.exports=function(){var t=o.cmd,e=o.room,n=o.gitter;a.filter=function(t){var e,n=t.target||t.srcElement;return"on"===n.getAttribute("data-prevent-keys")?!1:(e="chat-input-textarea"===n.id?"input.chat":"list-search-input"===n.id||n.classList.contains("js-search-input")?"input.search":/^trpChatInput/.test(n.className)?"input.chat.edit":/^(INPUT|TEXTAREA|SELECT)$/.test(n.tagName)?"input.other":"other",a.setScope(e),!0)};var s={backspace:{name:"backspace",scope:"other"},esc:[{name:"chat.escape",scope:"input.chat"},{name:"chat.edit.escape",scope:"input.chat.edit"},{name:"search.escape",scope:"input.search"},{name:"maininput.escape",scope:["input.chat","input.search"]},{name:"input.escape",scope:"input.other"},{name:"document.escape",scope:"other"}],enter:[{name:"search.go",scope:"input.search"},{name:"room.enter",scope:"other"},{name:"chat.compose.auto",scope:"input.chat"}],"shift+enter":[{name:"chat.compose.auto",scope:"input.chat"}],up:[{name:"room.up",scope:"other"},{name:"chat.edit.openLast",scope:"input.chat"},{name:"search.prev",scope:"input.search"}],down:[{name:"room.down",scope:"other"},{name:"search.next",scope:"input.search"}],tab:{name:"maininput.tab.next",scope:["input.chat","input.chat.edit","input.search"]},"+tab":{name:"maininput.tab.prev",scope:["input.chat","input.chat.edit","input.search"]},pageup:"pageUp",pagedown:"pageDown","q, r":{name:"quote",scope:"other"}};
s["enter, "+t+"+enter"]=[{name:"chat.send",scope:"input.chat"},{name:"chat.edit.send",scope:"input.chat.edit"}],s[t+"+/, "+t+"+"+n+"+/"]="chat.toggle",s[t+"++f"]="focus.search",s[t+"+"+n+"+c"]="focus.chat",s[t+"+"+n+"+m"]="help.markdown",s[t+"+"+n+"+k"]="help.keyboard",s[t+"+"+e+"+up"]="room.up",s[t+"+"+e+"+down"]="room.down",s[t+"+"+e+"+enter"]="room.enter",r.each("123456789".split(""),function(e){s[t+"+"+n+"+"+e]="room."+e}),s[t+"+"+n+"+0"]="room.10";var l=function(t,e,n){r.isObject(e)&&(n=e.scope,e=e.name),n=n||"all";var o=function(n){a(t,n,function(t,n){i.trigger("keyboard."+e,t,n),i.trigger("keyboard.all",e,t,n)})};r.isArray(n)?r.each(n,o):o(n)};r.each(s,function(t,e){r.isArray(t)?r.each(t,function(t){l(e,t)}):l(e,t)})}()},,,function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i){var o,r,a,s="function",l=e.helperMissing,c=e.blockHelperMissing,u='<div class="modal-header">\n    <div class="trpModalHeader">\n    	';return r=null!=(r=e.customTitle||(null!=t?t.customTitle:t))?r:l,a={name:"customTitle",hash:{},fn:this.noop,inverse:this.program(2,i),data:i},o=typeof r===s?r.call(t,a):r,e.customTitle||(o=c.call(t,o,a)),null!=o&&(u+=o),u+="\n      ",r=null!=(r=e.customTitle||(null!=t?t.customTitle:t))?r:l,a={name:"customTitle",hash:{},fn:this.program(4,i),inverse:this.noop,data:i},o=typeof r===s?r.call(t,a):r,e.customTitle||(o=c.call(t,o,a)),null!=o&&(u+=o),u+='\n    	<div class="trpModalMenu frame-menu-items">\n    		<div class="trpModalClose">\n',r=null!=(r=e.disableClose||(null!=t?t.disableClose:t))?r:l,a={name:"disableClose",hash:{},fn:this.noop,inverse:this.program(6,i),data:i},o=typeof r===s?r.call(t,a):r,e.disableClose||(o=c.call(t,o,a)),null!=o&&(u+=o),u+"      		</div>\n    	</div>\n    </div>\n</div>\n"},2:function(t,e,n,i){var o=e.helperMissing,r=this.escapeExpression;return'<div class="trpModalLogo"><img src=\''+r((e.cdn||t&&t.cdn||o).call(t,"images/logo-mark-blue-32.png",{name:"cdn",hash:{},data:i}))+'\' width="32" height="32"></div>'},4:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'<div class="trpModalTitleHeader">'+s((o=null!=(o=e.title||(null!=t?t.title:t))?o:a,typeof o===r?o.call(t,{name:"title",hash:{},data:i}):o))+"</div>"},6:function(){return'   		     <a class="close"></a>\n'},8:function(t,e,n,i){var o,r='<div class="modal-footer frame-menu-items">\n';return o=e.each.call(t,null!=t?t.menuItems:t,{name:"each",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r+"</div>\n"},9:function(t,e,n,i){var o,r="";return o=e["if"].call(t,null!=t?t.disabled:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.program(12,i),data:i}),null!=o&&(r+=o),r},10:function(t){var e=this.lambda,n=this.escapeExpression;return'  <button class="trpModalButton trpButtonMedium '+n(e(null!=t?t.className:t,t))+' button" data-action="'+n(e(null!=t?t.action:t,t))+'" disabled>'+n(e(null!=t?t.text:t,t))+"</button>\n"},12:function(t){var e=this.lambda,n=this.escapeExpression;return'  <button class="trpModalButton trpButtonMedium '+n(e(null!=t?t.className:t,t))+' button" data-action="'+n(e(null!=t?t.action:t,t))+'">'+n(e(null!=t?t.text:t,t))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a,s="function",l=e.helperMissing,c=e.blockHelperMissing,u="";return r=null!=(r=e.hideHeader||(null!=t?t.hideHeader:t))?r:l,a={name:"hideHeader",hash:{},fn:this.noop,inverse:this.program(1,i),data:i},o=typeof r===s?r.call(t,a):r,e.hideHeader||(o=c.call(t,o,a)),null!=o&&(u+=o),u+='<div class="modal-body">\n\n</div>\n',r=null!=(r=e.hasMenuItems||(null!=t?t.hasMenuItems:t))?r:l,a={name:"hasMenuItems",hash:{},fn:this.program(8,i),inverse:this.noop,data:i},o=typeof r===s?r.call(t,a):r,e.hasMenuItems||(o=c.call(t,o,a)),null!=o&&(u+=o),u},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="trpLoading"></div>'},useData:!0})},function(t){"use strict";t.exports=function(){return function(){return!!navigator.userAgent.match(/(iPhone|iPod|Android|BlackBerry)/)}}()},function(t){"use strict";t.exports=function(){return function(){var t=navigator.platform;return t.indexOf("Mac")>-1?"Mac":t.indexOf("Win")>-1?"Windows":t.indexOf("Linux")>-1?"Linux":void 0}}()},,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(238);t.exports=function(t){t=i(t);var e=t.githubType&&t.githubType.toLowerCase();return e&&e.indexOf("channel")>-1&&(e="icon-hash"),e&&e.indexOf("onetoone")>-1&&(e="icon-at"),e&&e.indexOf("repo")>-1&&(e="octicon octicon-repo"),e&&e.indexOf("org")>-1&&(e="octicon octicon-organization"),t.favourite&&(e="icon-star-1"),e}},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'  <span class="room-list-item__name '+s((o=null!=(o=e.iconClass||(null!=t?t.iconClass:t))?o:a,typeof o===r?o.call(t,{name:"iconClass",hash:{},data:i}):o))+'" title="'+s((o=null!=(o=e.title||(null!=t?t.title:t))?o:a,typeof o===r?o.call(t,{name:"title",hash:{},data:i}):o))+'">'+s((o=null!=(o=e.name||(null!=t?t.name:t))?o:a,typeof o===r?o.call(t,{name:"name",hash:{},data:i}):o))+"</span>\n"},3:function(t,e,n,i){var o,r,a="function",s=e.helperMissing,l=this.escapeExpression,c='  <div class="room-list-item__icon">\n    <i class=\''+l((r=null!=(r=e.iconClass||(null!=t?t.iconClass:t))?r:s,typeof r===a?r.call(t,{name:"iconClass",hash:{},data:i}):r))+'\'></i>\n  </div>\n  <span class="room-list-item__name" title="'+l((r=null!=(r=e.title||(null!=t?t.title:t))?r:s,typeof r===a?r.call(t,{name:"title",hash:{},data:i}):r))+'">'+l((r=null!=(r=e.name||(null!=t?t.name:t))?r:s,typeof r===a?r.call(t,{name:"name",hash:{},data:i}):r))+"</span>\n";return o=e.unless.call(t,null!=t?t.oneToOne:t,{name:"unless",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=o&&(c+=o),o=e.unless.call(t,null!=t?t.lurk:t,{name:"unless",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=o&&(c+=o),o=e["if"].call(t,null!=t?t.unreadItems:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c},4:function(t,e,n,i){var o,r="";return o=e.unless.call(t,null!=t?t.mentions:t,{name:"unless",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r},5:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'      <i class="room-list-item__action js-leave-button icon-logout" data-id="'+s((o=null!=(o=e.id||(null!=t?t.id:t))?o:a,typeof o===r?o.call(t,{name:"id",hash:{},data:i}):o))+'" title="Leave"></i>\n'},7:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'    <i class="room-list-item__action js-close-button icon-cancel-circle" data-id="'+s((o=null!=(o=e.id||(null!=t?t.id:t))?o:a,typeof o===r?o.call(t,{name:"id",hash:{},data:i}):o))+'" title="Hide"></i>\n'},9:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'    <span class="js-unread-badge room-list-item__unread-badge">'+s((o=null!=(o=e.unreadItems||(null!=t?t.unreadItems:t))?o:a,typeof o===r?o.call(t,{name:"unreadItems",hash:{},data:i}):o))+"</span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r="";return o=e["if"].call(t,null!=t?t.ethereal:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=o&&(r+=o),r},useData:!0})},function(){!function(t,e,n){function i(t,e){var n=Math.max(0,t[0]-e[0],e[0]-t[1]),i=Math.max(0,t[2]-e[1],e[1]-t[3]);return n+i}function o(e,n,i,o){var r=e.length,a=o?"offset":"position";for(i=i||0;r--;){var s=e[r].el?e[r].el:t(e[r]),l=s[a]();l.left+=parseInt(s.css("margin-left"),10),l.top+=parseInt(s.css("margin-top"),10),n[r]=[l.left-i,l.left+s.outerWidth()+i,l.top-i,l.top+s.outerHeight()+i]}}function r(t,e){var n=e.offset();return{left:t.left-n.left,top:t.top-n.top}}function a(t,e,n){e=[e.left,e.top],n=n&&[n.left,n.top];for(var o,r=t.length,a=[];r--;)o=t[r],a[r]=[r,i(o,e),n&&i(o,n)];return a=a.sort(function(t,e){return e[1]-t[1]||e[2]-t[2]||e[0]-t[0]})}function s(e){this.options=t.extend({},d,e),this.containers=[],this.scrollProxy=t.proxy(this.scroll,this),this.dragProxy=t.proxy(this.drag,this),this.dropProxy=t.proxy(this.drop,this),this.options.parentContainer||(this.placeholder=t(this.options.placeholder),e.isValidTarget||(this.options.isValidTarget=n))}function l(e,n){this.el=e,this.options=t.extend({},h,n),this.group=s.get(this.options),this.rootGroup=this.options.rootGroup=this.options.rootGroup||this.group,this.parentContainer=this.options.parentContainer,this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector,this.el.on(c.start,this.handle,t.proxy(this.dragInit,this)),this.options.drop&&this.group.containers.push(this)}var c,u="sortable",h={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},d={afterMove:function(){},containerPath:"",containerSelector:"ol, ul",distance:0,handle:"",itemPath:"",itemSelector:"li",isValidTarget:function(){return!0},onCancel:function(){},onDrag:function(t,e){t.css(e)},onDragStart:function(e){e.css({height:e.height(),width:e.width()}),e.addClass("dragged"),t("body").addClass("dragging")},onDrop:function(e){e.removeClass("dragged").removeAttr("style"),t("body").removeClass("dragging")},onMousedown:function(t,e){e.preventDefault()},placeholder:'<li class="placeholder"/>',pullPlaceholder:!0,serialize:function(e,n,i){var o=t.extend({},e.data());return i?n:(n[0]&&(o.children=n,delete o.subContainer),delete o.sortable,o)},tolerance:0},f={},p=0,m={left:0,top:0,bottom:0,right:0};c={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"},s.get=function(t){return f[t.group]||(t.group||(t.group=p++),f[t.group]=new s(t)),f[t.group]},s.prototype={dragInit:function(e,n){this.$document=t(n.el[0].ownerDocument),n.enabled()?(this.toggleListeners("on"),this.item=t(e.target).closest(this.options.itemSelector),this.itemContainer=n,this.setPointer(e),this.options.onMousedown(this.item,e,d.onMousedown)):this.toggleListeners("on",["drop"]),this.dragInitDone=!0},drag:function(t){if(!this.dragging){if(!this.distanceMet(t))return;this.options.onDragStart(this.item,this.itemContainer,d.onDragStart),this.item.before(this.placeholder),this.dragging=!0}this.setPointer(t),this.options.onDrag(this.item,r(this.pointer,this.item.offsetParent()),d.onDrag);var e=t.pageX,n=t.pageY,i=this.sameResultBox,o=this.options.tolerance;(!i||i.top-o>n||i.bottom+o<n||i.left-o>e||i.right+o<e)&&(this.searchValidTarget()||this.placeholder.detach())},drop:function(){this.toggleListeners("off"),this.dragInitDone=!1,this.dragging&&(this.placeholder.closest("html")[0]?this.placeholder.before(this.item).detach():this.options.onCancel(this.item,this.itemContainer,d.onCancel),this.options.onDrop(this.item,this.getContainer(this.item),d.onDrop),this.clearDimensions(),this.clearOffsetParent(),this.lastAppendedItem=this.sameResultBox=n,this.dragging=!1)},searchValidTarget:function(t,e){t||(t=this.relativePointer||this.pointer,e=this.lastRelativePointer||this.lastPointer);for(var i=a(this.getContainerDimensions(),t,e),o=i.length;o--;){var s=i[o][0],l=i[o][1];if(!l||this.options.pullPlaceholder){var c=this.containers[s];if(!c.disabled){if(!this.$getOffsetParent()){var u=c.getItemOffsetParent();t=r(t,u),e=r(e,u)}if(c.searchValidTarget(t,e))return!0}}}this.sameResultBox&&(this.sameResultBox=n)},movePlaceholder:function(t,e,n,i){var o=this.lastAppendedItem;(i||!o||o[0]!==e[0])&&(e[n](this.placeholder),this.lastAppendedItem=e,this.sameResultBox=i,this.options.afterMove(this.placeholder,t))},getContainerDimensions:function(){return this.containerDimensions||o(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent()),this.containerDimensions},getContainer:function(t){return t.closest(this.options.containerSelector).data(u)},$getOffsetParent:function(){if(this.offsetParent===n){var t=this.containers.length-1,e=this.containers[t].getItemOffsetParent();if(!this.options.parentContainer)for(;t--;)if(e[0]!=this.containers[t].getItemOffsetParent()[0]){e=!1;break}this.offsetParent=e}return this.offsetParent},setPointer:function(t){var e={left:t.pageX,top:t.pageY};if(this.$getOffsetParent()){var n=r(e,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer,this.relativePointer=n}this.lastPointer=this.pointer,this.pointer=e},distanceMet:function(t){return Math.max(Math.abs(this.pointer.left-t.pageX),Math.abs(this.pointer.top-t.pageY))>=this.options.distance},scroll:function(){this.clearDimensions(),this.clearOffsetParent()},toggleListeners:function(e,n){var i=this;n=n||["drag","drop","scroll"],t.each(n,function(t,n){i.$document[e](c[n],i[n+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=n},clearDimensions:function(){this.containerDimensions=n;for(var t=this.containers.length;t--;)this.containers[t].clearDimensions()}},l.prototype={dragInit:function(e){var n=this.rootGroup;n.dragInitDone||1!==e.which||!this.options.drag||t(e.target).is(this.options.exclude)||n.dragInit(e,this)},searchValidTarget:function(t,e){var n=a(this.getItemDimensions(),t,e),i=n.length,o=this.rootGroup,r=!o.options.isValidTarget||o.options.isValidTarget(o.item,this);if(!i&&r)return o.movePlaceholder(this,this.el,"append"),!0;for(;i--;){var s=n[i][0],l=n[i][1];if(!l&&this.hasChildGroup(s)){var c=this.getContainerGroup(s).searchValidTarget(t,e);if(c)return!0}else if(r)return this.movePlaceholder(s,t),!0}},movePlaceholder:function(e,n){var i=t(this.items[e]),o=this.itemDimensions[e],r="after",a=i.outerWidth(),s=i.outerHeight(),l=i.offset(),c={left:l.left,right:l.left+a,top:l.top,bottom:l.top+s};if(this.options.vertical){var u=(o[2]+o[3])/2,h=n.top<=u;h?(r="before",c.bottom-=s/2):c.top+=s/2}else{var d=(o[0]+o[1])/2,f=n.left<=d;f?(r="before",c.right-=a/2):c.left+=a/2}this.hasChildGroup(e)&&(c=m),this.rootGroup.movePlaceholder(this,i,r,c)},getItemDimensions:function(){return this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(.placeholder, .dragged)").get(),o(this.items,this.itemDimensions=[],this.options.tolerance)),this.itemDimensions},getItemOffsetParent:function(){var t,e=this.el;return t="relative"===e.css("position")||"absolute"===e.css("position")||"fixed"===e.css("position")?e:e.offsetParent()},hasChildGroup:function(t){return this.options.nested&&this.getContainerGroup(t)},getContainerGroup:function(e){var i=t.data(this.items[e],"subContainer");if(i===n){var o=this.$getChildren(this.items[e],"container");if(i=!1,o[0]){var r=t.extend({},this.options,{parentContainer:this,group:p++});i=o[u](r).data(u).group}t.data(this.items[e],"subContainer",i)}return i},enabled:function(){return!this.disabled&&(!this.parentContainer||this.parentContainer.enabled())},$getChildren:function(e,n){var i=this.rootGroup.options,o=i[n+"Path"],r=i[n+"Selector"];return e=t(e),o&&(e=e.find(o)),e.children(r)},_serialize:function(e,n){var i=this,o=n?"item":"container",r=this.$getChildren(e,o).not(this.options.exclude).map(function(){return i._serialize(t(this),!n)}).get();return this.rootGroup.options.serialize(e,r,n)},clearDimensions:function(){if(this.itemDimensions=n,this.items&&this.items[0])for(var e=this.items.length;e--;){var i=t.data(this.items[e],"subContainer");i&&i.clearDimensions()}}};var g={enable:function(){this.disabled=!1},disable:function(){this.disabled=!0},serialize:function(){return this._serialize(this.el,!0)}};t.extend(l.prototype,g),t.fn[u]=function(e){var i=Array.prototype.slice.call(arguments,1);return this.map(function(){var o=t(this),r=o.data(u);return r&&g[e]?g[e].apply(r,i)||this:(r||e!==n&&"object"!=typeof e||o.data(u,new l(o,e)),this)})}}(jQuery,window)},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return"<i class='"+s((o=null!=(o=e.repoTypeClass||(null!=t?t.repoTypeClass:t))?o:a,typeof o===r?o.call(t,{name:"repoTypeClass",hash:{},data:i}):o))+" room-list-item__icon'></i> <a href=\""+s((o=null!=(o=e.linkUrl||(null!=t?t.linkUrl:t))?o:a,typeof o===r?o.call(t,{name:"linkUrl",hash:{},data:i}):o))+'" class="room-list-item__name">'+s((o=null!=(o=e.uri||(null!=t?t.uri:t))?o:a,typeof o===r?o.call(t,{name:"uri",hash:{},data:i}):o))+"</a>\n"},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i){var o,r='    <div class="menu-header__state">\n';return o=e["if"].call(t,null!=t?t.menuHeaderExpanded:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=o&&(r+=o),r+"    </div>\n"},2:function(){return'        <i class="octicon octicon-chevron-up"></i>\n'},4:function(){return'        <i class="octicon octicon-chevron-down"></i>\n'},6:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'  <li class="profile-menu__item">\n    <a href="'+s((o=null!=(o=e.billingUrl||(null!=t?t.billingUrl:t))?o:a,typeof o===r?o.call(t,{name:"billingUrl",hash:{},data:i}):o))+'/accounts" target="_blank" class="profile-menu__link" data-disable-routing="1">\n      <div class=\'profile-menu__icon\'>\n        <i class=\'octicon octicon-credit-card\'></i>\n      </div>\n      <span>Billing</span>\n    </a>\n  </li>\n'},8:function(){return'  <li class="profile-menu__item">\n    <a href="/apps" target="_blank" class="profile-menu__link">\n      <div class=\'profile-menu__icon\'>\n        <i class=\'icon-download\'></i>\n      </div>\n      <span>Get Gitter Apps</span>\n    </a>\n  </li>\n'},10:function(){return'  <li class="profile-menu__item">\n    <a id="link-logout" href="/logout" class="profile-menu__link">\n      <div class=\'profile-menu__icon\'>\n        <i class=\'icon-logout\'></i>\n      </div>\n      <span>Signout</span>\n    </a>\n  </li>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=e.helperMissing,s=this.escapeExpression,l="function",c="<div class=\"menu-header__profile\">\n  <div class='menu-header__avatar'>\n    "+s((e.widget||t&&t.widget||a).call(t,"avatar",{name:"widget",hash:{size:"s",model:null!=t?t.user:t},data:i}))+'\n  </div>\n  <div class="menu-header__name">\n    <p>'+s((r=null!=(r=e.displayName||(null!=t?t.displayName:t))?r:a,typeof r===l?r.call(t,{name:"displayName",hash:{},data:i}):r))+"</p>\n  </div>\n";return o=e.unless.call(t,null!=t?t.isMobile:t,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+='</div>\n<ul id="profile-menu" class="profile-menu">\n  <li id="link-home" class="profile-menu__item profile-menu__link">\n    <div class=\'profile-menu__icon\'>\n      <i class=\'octicon octicon-home\'></i>\n    </div>\n    <span>Home</span>\n  </li>\n',o=e["if"].call(t,null!=t?t.showBilling:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=o&&(c+=o),o=e["if"].call(t,null!=t?t.showGetApps:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=o&&(c+=o),o=e["if"].call(t,null!=t?t.showSignout:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+"</ul>\n"},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t){var e,n=this.lambda,i=this.escapeExpression;return"<i class='octicon octicon-organization room-list-item__icon'></i> <span class=\"room-list-item__name\">"+i(n(null!=(e=null!=t?t.org:t)?e.name:e,t))+"</span>\n"},useData:!0})},,,,,,,function(t,e,n){var i,o;!function(r){"use strict";function a(t,e,n){var i,o;return function(){var r=Date.now();i&&i+e>r?(clearTimeout(o),o=setTimeout(function(){i=r,t.apply(n)},e)):(i=r,t.apply(n))}}function s(t,e){return t.bind?t.bind(e):function(){var n=Array.prototype.slice.call(arguments);t.apply(e,n)}}function l(t,e){t||(t={});for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t}function c(t){this._callback=t,this._onModifications=a(function(){this._callback([])},5,this)}function u(t,e,n){this.element=t,this.callback=e,this.context=n,t.addEventListener("load",this,!1),t.addEventListener("error",this,!1)}function h(t){var e=!(1!==t.nodeType||"IMG"!==t.tagName||t.complete||t.getAttribute("width")&&t.getAttribute("height"));return e}function d(t,e){return t.dataset?t.dataset[e]:t.getAttribute("data-"+e)}function f(t,e,n){return t.dataset?void(t.dataset[e]=n):t.setAttribute("data-"+e,n)}function p(t,e){return t.dataset?void delete t.dataset[e]:void t.removeAttribute(attrName)}function m(){var t=v.createElement("fakeelement"),e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in e)if(void 0!==t.style[n])return e[n]}function g(t,e,n){function i(){try{e.apply(r)}finally{o.takeRecords()}}var o=this;n||(n={}),o._eventHandlers={};var r=n.scope||null,c=n.timeout||0;o._transitionInterval=n.timeout||10;var u;u=c?a(i,c):i,o._callback=u,o._findLoadingImages(t),o._mutationCallback=s(o._mutationCallback,o),o.observer=new y(o._mutationCallback);var h=l(n.observers,{attributes:!1,childList:!0,characterData:!1,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1});o.observer.observe(t,h),n.transitions&&(o._transitionEndHandler={target:t,handleEvent:function(t){o.endTransition(t.target),u()}},t.addEventListener(b,o._transitionEndHandler,!1))}c.prototype={observe:function(t){this._target=t,t.addEventListener("DOMSubtreeModified",this._onModifications,!1)},disconnect:function(){this._target&&(this._target.removeEventListener("DOMSubtreeModified",this._onModifications,!1),delete this._target)},takeRecords:function(){var t=this._target;this._target&&(t.removeEventListener("DOMSubtreeModified",this._onModifications,!1),t.addEventListener("DOMSubtreeModified",this._onModifications,!1))}},u.prototype={_detach:function(){this.element&&(this.element.removeEventListener("load",this,!1),this.element.removeEventListener("error",this,!1),this.element=null,this.callback=null,this.context=null)},handleEvent:function(t){this.callback.call(this.context,t,this)}};var v=r.document,y=r.MutationObserver||r.MozMutationObserver||r.WebKitMutationObserver||c,w=0,b=m();return g.prototype={_addListener:function(t){if(!d(t,"gLoadListenerId")){var e=++w;f(t,"gLoadListenerId",e),this._eventHandlers[e]=new u(t,function(t,e){e._detach(),this._callback()},this)}},_removeListener:function(t){var e=d(t,"gLoadListenerId");if(e){p(t,"gLoadListenerId");var n=this._eventHandlers[e];n&&(delete this._eventHandlers[e],n._detach())}},_mutationCallback:function(t){var e=this;t.forEach(function(t){var n;if("childList"===t.type){if(t.addedNodes)for(var i=0;i<t.addedNodes.length;i++)n=t.addedNodes[i],1===n.nodeType&&(n.children.length?e._findLoadingImages(n):h(n)&&e._addListener(n));if(t.removedNodes)for(var o=0;o<t.removedNodes.length;o++)n=t.removedNodes[o],1===n.nodeType&&(n.children.length||"IMG"===n.tagName&&e._removeListener(n))}}),this._callback()},_findLoadingImages:function(t){for(var e=t.querySelectorAll("img"),n=0;n<e.length;n++){var i=e[n];h(i)&&this._addListener(i)}},takeRecords:function(){return this.observer.takeRecords()},startTransition:function(t,e){var n=this,i=n._transitions;i?i.push(t):n._transitions=i=[t],e&&r.setTimeout(function(){n.endTransition(t)},e),1!==i.length||n._transitionTimer||(n._transitionTimer=r.setInterval(n._callback,n._transitionInterval))},endTransition:function(t){var e=this,n=e._transitions;if(n){for(var i=n.length-1;i>=0;i--)n[i]===t&&n.splice(i,1);0===n.length&&(delete e._transitions,r.clearTimeout(e._transitionTimer),delete e._transitionTimer)}},disconnect:function(){if(this.observer.disconnect(),this._transitionEndHandler){var t=this._transitionEndHandler.target;t.removeEventListener(b,this._transitionEndHandler,!1)}r.clearTimeout(self._transitionTimer);var e=this._eventHandlers;Object.keys(e).forEach(function(t){var n=e[t];n&&(delete e[t],n._detach())})}},r.Mutant=g,!0&&n(90)&&(i=[],o=function(){return g}.apply(e,i),!(void 0!==o&&(t.exports=o))),g}(window)},,function(t){t.exports={target:"webpack",isBrowser:!0}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(){return'<div class="popover-footer trpBodySmall">\n  <div class="popover-footer-content"></div>\n</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r='<div>\n  <div class="arrow"></div>\n  <div class="popover-inner">\n    <h5 class="popover-title"></h5>\n    <div class="popover-content"></div>\n  </div>\n</div>\n';return o=e["if"].call(t,null!=t?t.footerView:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r},useData:!0})}]);