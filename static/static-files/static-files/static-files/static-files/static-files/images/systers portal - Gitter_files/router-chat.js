webpackJsonp([11],[function(t,e,n){"use strict";n(28);var i=n(4),o=n(5),r=n(2),a=n(29),s=n(16),l=n(3),u=n(55),c=n(35),h=n(18),d=n(25),f=n(30),p=n(54),m=n(31);n(32),n(50),n(26),n(27),n(79),n(33),n(21),n(34),n(51),n(52),n(23),h(function(){function t(e){"oauth_upgrade_complete"===e.data&&(window.removeEventListener("message",t,!1),f.room.put("",{autoConfigureHooks:1}).then(function(){s.trigger("user_notification",{title:"Thank You",text:"Your integrations have been setup."})}))}function e(){s.trigger("user_notification",{click:function(e){e.preventDefault(),window.addEventListener("message",t,!1),window.open("/login/upgrade?scopes=public_repo")},title:"Authorisation",text:"Your room has been created, but we weren't able to integrate with the repository as we need write access to your GitHub repositories. Click here to give Gitter access to do this.",timeout:12e3})}s.on("navigation",function(t,e,n){m.hasParentFrameSameOrigin()?m.postMessage({type:"navigation",url:t,urlType:e,title:n}):window.parent.location.href=t}),n(24).installLinkHandler(),window.addEventListener("message",function(t){if(t.origin!==r.env("basePath"))return void l.info("rchat: Ignoring message from "+t.origin);var e;try{e=JSON.parse(t.data)}catch(n){return}l.info("rchat: Received message ",e);var i=function(t){var e="app";t.event&&t.event.origin&&(e=t.event.origin),t.event={origin:e,preventDefault:function(){l.warn("rchat: could not use preventDefault() because the event comes from the `"+this.origin+"` frame")},stopPropagation:function(){l.warn("rchat: could not use stopPropagation() because the event comes from the `"+this.origin+"` frame")},stopImmediatePropagation:function(){l.warn("rchat: could not use stopImmediatePropagation() because the event comes from the `"+this.origin+"` frame")}}};switch(e.type){case"keyboard":i(e),s.trigger("keyboard."+e.name,e.event,e.handler),s.trigger("keyboard.all",e.name,e.event,e.handler);break;case"focus":i(e),s.trigger("focus.request."+e.focus,e.event);break;case"permalink.navigate":var o=e.query,a=o&&o.at;a&&d(g.chatCollectionView,a)}}),m.postMessage({type:"context.troupeId",troupeId:r.getTroupeId(),name:r.troupe().get("name")}),s.on("route",function(t){m.postMessage({type:"route",hash:t})}),s.on("permalink.requested",function(t,e,n){if(!r.inOneToOneTroupeContext()){var i=r.troupe().get("url"),o=e.id;if(n&&n.appendInput){var a=r.env("basePath")+i+"?at="+o,l=e.get("sent")&&e.get("sent").format("LLL");s.trigger("input.append",":point_up: ["+l+"]("+a+")")}m.postMessage({type:"permalink.requested",url:i,permalinkType:t,id:o})}}),s.on("realtime.testConnection",function(t){m.postMessage({type:"realtime.testConnection",reason:t})}),s.on("realtime:newConnectionEstablished",function(){m.postMessage({type:"realtime.testConnection",reason:"newConnection"})}),s.on("unreadItemsCount",function(t){var e={type:"unreadItemsCount",count:t,troupeId:r.getTroupeId()};l.info("rchat: Posting unread items count ",e),m.postMessage(e)}),s.on("keyboard.all",function(t,e,n){if(!e.origin||"app"!==e.origin){var i={type:"keyboard",name:t,event:{origin:e.origin},handler:n};m.postMessage(i)}}),s.on("chat.edit.show",function(){m.postMessage({type:"chat.edit.show"})}),s.on("chat.edit.hide",function(){m.postMessage({type:"chat.edit.hide"})}),s.on("focus.request.app.in",function(t){m.postMessage({type:"focus",focus:"in",event:t})}),s.on("focus.request.app.out",function(t){m.postMessage({type:"focus",focus:"out",event:t})}),s.on("ajaxError",function(){m.postMessage({type:"ajaxError"})});var h=function(t){s.triggerParent("user_notification",{title:"Failed to remove user",text:t,className:"notification-error"})};s.on("command.room.remove",function(t){var e=c.users.findWhere({username:t});e?f.room["delete"]("/users/"+e.id,"").then(function(){c.users.remove(e)}).fail(function(t){h(t.status<500?t.responseJSON.error:"")}):h("User "+t+" was not found in this room.")});var g=new u({el:"body"});new p({model:r.troupe(),el:"#header"}),c.users.once("sync",function(){r().permissions.admin&&1===c.users.length&&n.e(12,function(){var t=n(56),e=n(36),o=new e.CollabCollection;o.fetch(),o.once("sync",function(){var e=new t({collection:o});i("#content-frame").prepend(e.render().el)})})});var v=o.Router.extend({routes:{"":"hideModal",share:"share",people:"people",notifications:"notifications",markdown:"markdown",keys:"keys",integrations:"integrations",add:"addPeople"},hideModal:function(){g.dialogRegion.close()},people:function(){!function(){var t=n(65);g.dialogRegion.show(new t.Modal({collection:c.sortedUsers}))}(n)},notifications:function(){n.e(13,function(){var t=n(57);g.dialogRegion.show(new t({}))})},markdown:function(){n.e(14,function(){var t=n(58);g.dialogRegion.show(new t({}))})},keys:function(){n.e(15,function(){var t=n(59);g.dialogRegion.show(new t({}))})},addPeople:function(){n.e(16,function(){var t=n(60);g.dialogRegion.show(new t({}))})},integrations:function(){r().permissions.admin?n.e(17,function(){var t=n(61);g.dialogRegion.show(new t({}))}):window.location="#"},share:function(){n.e(18,function(){var t=n(66);g.dialogRegion.show(new t.Modal({}))})}}),y=new v,w=!1,b=function(){y.navigate("",{trigger:!0}),w=!1};s.on("keyboard.help.markdown",function(t){"markdown"===w?b():(s.trigger("focus.request.out",t),y.navigate("markdown",{trigger:!0}),w="markdown")}),s.on("keyboard.help.keyboard",function(t){"keys"===w?b():(s.trigger("focus.request.out",t),y.navigate("keys",{trigger:!0}),w="keys")}),s.on("keyboard.document.escape",function(){w&&b()}),a.syncRoom(),r.popEvent("hooks_require_additional_public_scope")&&setTimeout(e,1500),r().permalinkChatId&&d(g.chatCollectionView,r().permalinkChatId),o.history.start()})},,,,,,,,,,,,,,,,,,function(t){"use strict";function e(t,e,n,i){t.addEventListener(e,this,!1),this.handleEvent=function(o){t.removeEventListener(e,this,!1),n.call(i,o)}}t.exports=function(t,n){new e(window,"DOMContentLoaded",t,n)}},,,function(t,e,n){"use strict";var i=n(2),o=n(16),r=n(14),a=n(3);t.exports=function(){function t(t){return t.replace(/\/_s\/\w+\//,"/_s/l/")}function e(t,e,n,i,o){a.error(t||o&&o.message||"Unhandler error",{message:t,filename:e,lineno:n,colno:i,error:o})}var n=i.env("ravenUrl");if(n){r.config(n,{dataCallback:function(e){try{e.stacktrace.frames.forEach(function(e){e.filename&&(e.filename=t(e.filename))}),e.culprit&&(e.culprit=t(e.culprit)),o.trigger("stats.event","error")}catch(n){}return e}}).install();var s=i.user();r.setUser({username:s&&s.get("username")}),o.on("bugreport",function(t,e){t instanceof Error?(o.trigger("stats.event","error"),r.captureException(t,e)):(o.trigger("stats.event","warning"),r.captureMessage(t,e))})}else window.onerror=function(t,n,i,r,a){try{e(t,n,i,r,a),o.trigger("stats.event","error")}catch(s){throw window.onerror=null,s}},o.on("bugreport",function(t){t instanceof Error?o.trigger("stats.event","error"):o.trigger("stats.event","warning")})}()},,function(t,e,n){"use strict";var i=n(30),o=n(3),r=6e5;window.setInterval(function(){i.web.get("/api/v1/ping",void 0,{global:!1}).fail(function(){o.info("An error occurred pinging the server")})},r)},function(t,e,n){"use strict";function i(){o(document).on("click","a",function(t){var e=t.currentTarget,n=l.get(e,"disableRouting");if(!n){var i=e.protocol+"//"+e.host,o=i===r.env("basePath"),u=window.location;if(u.scheme===e.scheme&&u.host===e.host&&u.pathname===e.pathname&&u.search===e.search)return t.preventDefault(),window.location=e.href,!0;if(o&&s(e.pathname)){t.preventDefault();var c=e.pathname.substring(1),h="chat";c===r.user().get("username")&&(h="home"),a.trigger("navigation",e.pathname+e.search,h,c)}}})}var o=n(4),r=n(2),a=n(16),s=n(99),l=n(100);t.exports={installLinkHandler:i}},function(t,e,n){"use strict";var i=n(101);t.exports=function(t,e){var n=t.collection;n.ensureLoaded(e,function(e,o){if(!e&&o){var r=i(n,o);r.forEach(function(e){var n=t.children.findByModel(e);n&&n.highlight()}),t.scrollToChat(r[0])}})}},function(t,e,n){var i,o;i=[n(12),n(5)],o=function(t,e){return function(t,e){var n=function(){return!0};e.FilteredCollection=e.Collection.extend({collectionFilter:null,defaultFilter:n,initialize:function(t,e){if(t)throw"models cannot be set directly, unfortunately first argument is the models.";this.collection=e.collection,this.setFilter(e.collectionFilter),this._bindEvents()},resetWith:function(t){return this.stopListening(this.collection),this.collection=t,this.resetCollection(),this._bindEvents(),this},_bindEvents:function(){this.listenTo(this.collection,"sync",this.syncCollection),this.listenTo(this.collection,"add",this.addModel),this.listenTo(this.collection,"remove",this.removeModel),this.listenTo(this.collection,"reset",this.resetCollection),this.listenTo(this.collection,"sort",this.resortCollection),this.listenTo(this.collection,"change",this._modelChanged),this.listenTo(this.collection,"filter-complete",this._filterComplete)},_reset:function(t){e.Collection.prototype._reset.call(this,t),this._mapping=[]},add:function(){throw"Do not invoke directly"},remove:function(){throw"Do not invoke directly"},reset:function(){throw"Do not invoke directly"},_modelChanged:function(t,e,n){n||(n={});var i=this.indexOf(t);if(this.collectionFilter(t))if(0>i){var o=this.collection.indexOf(t);this._forceAddModel(t,{index:o})}else this.trigger("change",t,this);else i>-1&&this._forceRemoveModel(t,{index:i});n.silent||this._filterComplete()},resortCollection:function(){var e=[],n=[],i=this.models;t.each(this.collection.models,function(t,o){i.indexOf(t)>=0&&(e.push(t),n.push(o))}),this.models=e,this._mapping=n,this.trigger("sort",this)},resetCollection:function(){this._mapping=[],this._reset(),this.setFilter(void 0,{silent:!0}),this.trigger("reset",this)},syncCollection:function(){this._mapping=[],this._reset(),this.setFilter(void 0,{silent:!0}),this.trigger("sync",this)},renumberMappings:function(){this._mapping=[];var e=this.collection,n=this._mapping;t(this.models).each(function(t){n.push(e.indexOf(t))})},removeModel:function(e,n,i){var o=this._mapping.indexOf(i.index);o>-1&&this._forceRemoveModel(e,t.extend({index:o},i)),this.renumberMappings()},_forceRemoveModel:function(t,n){this._mapping.splice(n.index,1),e.Collection.prototype.remove.call(this,t,{silent:n.silent}),n.silent||this.trigger("remove",t,this,{index:n.index})},addModel:function(e,n,i){this.collectionFilter(e)&&this._forceAddModel(e,t.extend(i||{},{index:i&&i.at||n.indexOf(e)})),this.renumberMappings()},_forceAddModel:function(n,i){var o=i.index,r=t.sortedIndex(this._mapping,o,function(t){return t});e.Collection.prototype.add.call(this,n,{at:r,silent:i.silent}),this._mapping.splice(r,0,o),i.silent||this.trigger("add",n,this,{index:r})},setFilter:function(e,n){n||(n={}),e===!1&&(e=this.defaultFilter),this.collectionFilter=e||this.collectionFilter||this.defaultFilter;var i=this.collectionFilter,o=this._mapping,r=t.extend({},n);this.collection.each(function(t,e){var n=o.indexOf(e);i(t,e)?-1==n&&(r.index=e,this._forceAddModel(t,r)):n>-1&&(r.index=-1==n?this.length:n,this._forceRemoveModel(t,r))},this),n.silent||this._filterComplete()},_onModelEvent:function(){},_filterComplete:function(){this.trigger("filter-complete",this)}})}(t,e),e.FilteredCollection}.apply(e,i),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var i=n(16),o=n(3);t.exports=function(){var t=12e4,e=1.5*t,n=Date.now();window.setInterval(function(){var t=Date.now(),r=t-n,a=r>e;n=t,a&&(o.info("Sleep detected!"),i.trigger("reawaken",r))},t)}()},function(t,e,n){"use strict";var i=n(5),o=n(6);t.exports=function(){window.__agent&&window.__agent.start(i,o)}()},function(t,e,n){"use strict";var i=n(2),o=n(102),r=n(38),a=n(3),s=n(30);t.exports=function(){function t(t){var e=s.user.channel("/rooms");r.subscribe(e,function(e){var n=e.operation,i=e.model,r=i.id;if(r===t.id){var s=new o.TroupeModel(i,{parse:!0});switch(n){case"create":case"patch":case"update":t.set(s.attributes);break;case"remove":break;default:a.info("Unknown operation "+n+", ignoring")}}},null,{snapshot:!1})}return{syncRoom:function(){var e=i.troupe();e.id?t(e):e.once("change:id",function(){t(e)})}}}()},function(t,e,n){"use strict";var i=n(4),o=n(2),r=n(16);t.exports=function(){function t(t,e){e||(e="");var n=o.env("apiBasePath");return t?n+t()+e:n+e}function e(t,e){return e||(e=""),t?t()+e:e}function n(t,e){return e||(e=""),t?t()+e:e}function a(){var t=i.Deferred();return o.getAccessToken(function(e){t.resolve(e)}),t}function s(t,e,n,o,r,s,l){l=c(l,o),"delete"!==n||s||delete l.contentType;var h;return h=l.contentType===f?JSON.stringify(s):s,a().then(function(o){var a=t(e,r),s=i.ajax({url:a,contentType:l.contentType,dataType:l.dataType,type:n,global:l.global,data:h,context:l.context,timeout:l.timeout,async:l.async,headers:{"x-access-token":o}});return s.fail(function(t){l.global&&u(t,n,a)}),s})}function l(t){for(var e=Object.keys(v),n=0;n<e.length;n++){var i=e[n],o=v[i];if(o.test(t))return i}}function u(t,e,n){var i=t.status,o=l(n);if("error"==t.statusText&&404===i)r.trigger("bugreport","ajaxError: unreachable: "+e+" "+(o||n),{tags:{type:"ajax",subtype:"unreachable",url:n}});else{if(500>i)return;r.trigger("bugreport","ajaxError: HTTP "+i+" on "+e+" "+(o||n),{tags:{type:"ajax",subtype:"HTTP"+i,url:n}})}r.trigger("ajaxError")}function c(t,e){return t||(t={}),Object.keys(e).forEach(function(n){void 0===t[n]&&(t[n]=e[n])}),t}function h(t,e){return g.reduce(function(n,i){var o=i[0],r=i[1];return n[o]=s.bind(n,t,e,o,r),n},{url:function(n){return t(e,n)},urlGenerator:function(n){return function(){return t(e,n)}},channel:function(t){return n(e,t)},channelGenerator:function(t){return function(){return n(e,t)}}})}var d=15e3,f="application/json",p={timeout:d,dataType:"json"},m={timeout:d,dataType:"json",contentType:f},g=[["get",p],["post",m],["patch",m],["put",m],["delete",m]],v={githubIssues:/^\/api\/private\/gh\/[^/]+\/[^/]+\/issues/,githubUsers:/^\/api\/private\/gh\/users\//};return c(h(t),{user:h(t,function(){return"/v1/user/"+o.getUserId()}),room:h(t,function(){return"/v1/rooms/"+o.getTroupeId()}),userRoom:h(t,function(){return"/v1/user/"+o.getUserId()+"/rooms/"+o.getTroupeId()}),priv:h(t,function(){return"/private"}),web:h(e)})}()},function(t,e,n){"use strict";function i(){if(window.parent===window)return!1;try{return window.location.host==window.parent.location.host}catch(t){return!1}}function o(t){try{var e=JSON.stringify(t);a.debug("post: ",e,r.env("basePath")),window.parent.postMessage(e,r.env("basePath"))}catch(n){a.info("frame: unable to post message",n)}}var r=n(2),a=n(3);i()&&o({type:"chatframe:loaded"}),t.exports={hasParentFrameSameOrigin:i,postMessage:o}},function(t,e,n){"use strict";var i=n(12),o=n(16),r=n(30),a=n(3);t.exports=function(){function t(){var t=n;n={};var i=e;e=[],i=i.concat(Object.keys(t).map(function(e){var n={stat:e};return t[e]>0&&(n.count=t[e]),n})),i.length&&r.priv.post("/statsc",i,{dataType:"text"}).fail(function(){a.info("An error occurred while communicating stats")})}var e=[],n={},s=i.throttle(t,1e3,{leading:!1});o.on("stats.event",function(t){n[t]?n[t]++:n[t]=1,s()}),o.on("stats.gauge",function(t,n){e.push({stat:t,value:n}),s()}),o.on("stats.time",function(t,n){e.push({stat:t,time:n}),s()})}()},function(t,e,n){"use strict";var i=n(2),o=n(30),r=n(38),a=n(3),s=n(16);t.exports=function(){function t(t,e){if(r.getClientId()&&i.getTroupeId()){var n=r.getClientId();o.post("/v1/eyeballs",{socketId:n,on:t},{dataType:"text",async:!e,global:!1}).fail(function(t){400!==t.status?a.info("An error occurred while communicating eyeballs"):(a.info("Eyeballs returned 400. Realtime connection may be dead."),s.trigger("eyeballsInvalid",n))})}}function e(e){h&&(c(),h=!1,t(0,e),s.trigger("eyeballStateChange",!1))}function n(){g=Date.now(),v=!1,h||(u(),h=!0,t(1),s.trigger("eyeballStateChange",!0))}function l(){v&&n(),m||(m=setTimeout(function(){m=null,g=Date.now()},100))}function u(){y||(y=window.setInterval(function(){window.setTimeout(function(){Date.now()-g>d-f&&(a.info("inactivity"),v=!0,c(),e())},5)},f))}function c(){y&&(window.clearTimeout(y),y=null)}var h=!0,d=6e4,f=1e4;window.addEventListener("blur",function(){e()},!1),window.addEventListener("focus",function(){n()},!1);var p=window.cordova;p?document.addEventListener("deviceready",function(){function t(){window.setTimeout(function(){var t=r.getClientId();t&&p.exec(function(){},function(){},"EyeballsOff","registerSocket",[t])},0)}s.on("realtime:newConnectionEstablished",t),t(),document.addEventListener("resume",function(){l(),window.setTimeout(function(){n()},0)},!1),document.addEventListener("pause",function(){h=!1},!1)},!1):(window.addEventListener("pageshow",function(){l(),n()},!1),window.addEventListener("pagehide",function(){e()},!1));var m,g=Date.now(),v=!1;document.addEventListener("keydown",l,!1),document.addEventListener("mousemove",l,!1),window.addEventListener("scroll",l,!1),u();var y;return{getEyeBalls:function(){return h}}}()},function(t,e,n){"use strict";var i=n(4),o=n(12),r=n(16);t.exports=function(){var t,e=!1,n=i("#content-frame").hasClass("trpChatContainer")&&"chat"||"app";r.on("chat.edit.show",function(){e=!0}),r.on("chat.edit.hide",function(){e=!1});var a=function(){var t=["chat","search"];return e&&t.push("chat.edit"),t},s=function(t,e){var n=a(),i=t.replace("input.",""),o=n.indexOf(i),r=o+e;return-1!==o&&n[r]?n[r]:-1===e?n[n.length-1]:n[0]},l=function(t,e){r.trigger("focus.request."+s(e.scope,1))},u=function(t,e){r.trigger("focus.request."+s(e.scope,-1))},c=function(e){if(e.origin){if(e.origin!==n)return r.trigger("focus.request."+e.origin+".out",e);if(t)return}/^(INPUT|TEXTAREA)$/.test(document.activeElement.tagName)&&(t=i(document.activeElement),t.blur(),r.trigger("focus.change.out",t))},h=function(e){return e.origin&&e.origin!==n?r.trigger("focus.request."+e.origin+".in",e):void(t&&(t.focus(),r.trigger("focus.change.in",t),t=null))},d={"keyboard.focus.search":"search","keyboard.focus.chat":"chat","keyboard.maininput.tab.next":l,"keyboard.maininput.tab.prev":u,"focus.request.out keyboard.maininput.escape keyboard.input.escape":c,"focus.request.in keyboard.document.escape":h},f=function(t,e){r.on(t,function(t){t.origin||t.preventDefault();var n=Array.prototype.slice.call(arguments);o.isFunction(e)?e.apply(e,n):(n.unshift("focus.request."+e),r.trigger.apply(r,n))})},p=/\s+/;o.each(d,function(t,e){if(p.test(e)){var n=e.split(p);o.each(n,function(e){f(e,t)})}else f(e,t)})}()},function(t,e,n){"use strict";var i=n(43),o=n(42),r=n(103),a=n(16),s=n(2),l=n(44);n(104),t.exports=function(){function t(t){var e=n.get(t.userId);e&&e.set("online","in"===t.status?!0:!1)}var e=new o.ChatCollection(null,{listen:!0}),n=new i.UserCollection(null,{listen:!0}),u=new i.RosterCollection(null,{users:n,limit:21}),c=new i.SortedUserCollection(null,{users:n}),h=new r.EventCollection(null,{listen:!0,snapshot:!0});a.on("userLoggedIntoTroupe",t),a.on("userLoggedOutOfTroupe",t),s.isLoggedIn()&&l.syncCollections({chat:e});var d={chats:e,users:n,sortedUsers:c,roster:u,events:h};return window._intergratedCollections=d,d}()},,,function(t,e,n){"use strict";var i=n(12),o=n(2),r=n(13),a=n(16),s=n(3),l=n(110);t.exports=function(){function t(){return navigator.userAgent.indexOf("Mobile/")>=0}function e(){var t=o.env("websockets"),e=new r.Client(t.fayeUrl,t.options);A&&e.disable("websocket"),e.addExtension(new y),e.addExtension(k),e.addExtension(new M),e.addExtension(new C),e.addExtension(new v);var n;return o.user().watch("change:id",function(t){n&&(n.cancel(),n=null),t.id&&(n=e.subscribe(f+"/v1/user/"+t.id,function(e){"patch"===e.operation&&e.model&&e.model.id===t.id&&t.set(e.model),L[e.notification]&&a.trigger(e.notification,e)}))}),e}function n(t,e){var n=o.env("websockets"),i=t||n.options&&1.2*n.options.timeout||60;S||(S=setTimeout(function(){D||(I=Date.now(),D=!0,s.info("rt: persistent outage"),a.trigger("connectionFailure"),e||A||(s.info("rt: disabling websockets"),E.disable("websockets")))},1e3*i))}function u(){S&&(clearTimeout(S),S=null),D&&(a.trigger("stats.event","faye.outage.restored"),a.trigger("stats.time","faye.outage.restored.time",Date.now()-I),D=!1,I=null,s.info("rt: persistent outage restored"),a.trigger("connectionRestored"))}function c(){return E?E:(E=e(),n(10,!0),E.on("transport:down",function(){s.info("rt: transport down"),n()}),E.on("transport:up",function(){s.info("rt: transport up"),u()}),E)}function h(t){if(E&&m&&!R){"ping"!==t&&(a.trigger("realtime.testConnection",t),s.info("rt: Testing connection due to "+t)),R=!0;var e=m;setTimeout(function(){R&&(a.trigger("stats.event","faye.ping.reset"),R=!1,d(e))},3e4),E.publish(f+"/v1/ping2",{reason:t}).then(function(){R=!1,s.info("rt: Server ping succeeded")},function(t){s.warn("rt: Server ping failed: ",t),a.trigger("stats.event","faye.ping.reset"),R=!1,d(e)})}}function d(t){E&&(t===m?(s.info("rt: Client reset requested"),m=null,E.reset()):s.info("rt: Ignoring reset request as clientId has changed."))}var f="/api";r.logger={};var p=["fatal","error","warn","info","debug"];p.forEach(function(t){var e="fatal"==t?"error":t;r.logger[t]=function(t){s[e]("faye: "+t.substring(0,100))}});var m=null,g=!0;a.on("eyeballStateChange",function(t){s.info("rt: Switching eyeball state to ",t),g=t});var v=function(){};v.prototype.incoming=function(t,e){t.error&&s.error("rt: Bayeux error",t),e(t)};var y=function(){};y.prototype.outgoing=function(e,n){return"/meta/handshake"!==e.channel?n(e):(m=null,s.info("rt: Rehandshaking realtime connection"),void o.getAccessToken(function(i){e.ext||(e.ext={});var r=e.ext,a=t();r.token=i,r.version=o.env("version"),r.troupeId=o.getTroupeId(),r.connType=a?"mobile":"online",r.client=a?"mobweb":"web",r.eyeballs=g?1:0,n(e)}))};var w;y.prototype.incoming=function(t,e){if("/meta/handshake"!==t.channel)return e(t);if(t.successful){var n=t.ext;if(n&&(n.appVersion&&n.appVersion!==o.env("version")?(s.info("rt: Application version mismatch"),w||(w=[setTimeout(function(){a.trigger("app.version.mismatch"),a.trigger("stats.event","reload.warning.10m")},6e5),setTimeout(function(){a.trigger("app.version.mismatch"),a.trigger("stats.event","reload.warning.1hr")},36e5),setTimeout(function(){a.trigger("stats.event","reload.forced"),setTimeout(function(){window.location.reload(!0)},3e4)},216e5)])):w&&(w.forEach(function(t){clearTimeout(t)}),w=null),n.context)){var i=n.context;i.troupe&&o.setTroupe(i.troupe),i.user&&o.setUser(i.user)}m!==t.clientId&&(m=t.clientId,s.info("rt: Realtime reestablished. New id is "+m),a.trigger("realtime:newConnectionEstablished")),u()}e(t)};var b=function(){this._listeners={},this._stateProvider={}},_={},x={};b.prototype.outgoing=function(t,e){if("/meta/subscribe"==t.channel){x[t.subscription]=Date.now(),t.ext||(t.ext={}),t.ext.eyeballs=g?1:0;var n=this._stateProvider[t.subscription];if(n){var o=n();o&&(t.ext||(t.ext={}),t.ext.snapshot=o)}var r=_[t.subscription];r&&(t.ext=i.extend(t.ext,r),delete _[t.channel])}e(t)},b.prototype.incoming=function(t,e){if("/meta/subscribe"==t.channel&&t.ext&&t.ext.snapshot){var n=x[t.subscription];if(n){delete x[t.subscription];var i=Date.now()-n;if(i>400){var o=t.subscription.split(/\//).pop();a.trigger("stats.time","faye.subscribe.time."+o,i),s.info("rt: Subscription to "+t.subscription+" took "+i+"ms")}}var r=this._listeners[t.subscription],l=t.ext.snapshot;if(r)for(var u=0;u<r.length;u++)r[u](l)}e(t)},b.prototype.registerForSnapshots=function(t,e,n){t=f+t;var i=this._listeners[t];i?i.push(e):(i=[e],this._listeners[t]=i),n&&(this._stateProvider[t]&&s.warn("rt: a stateprovider already exists for "+t),this._stateProvider[t]=n)};var k=new b,T=!1,M=function(){};M.prototype.incoming=function(t,e){t.error&&t.advice&&"none"===t.advice.reconnect&&(T||(T=!0,s.error("rt: Access denied",t),window.alert("Realtime communications with the server have been disconnected."),l())),e(t)};var C=function(){this._seq=0,a.on("realtime:newConnectionEstablished",this.reset,this)};C.prototype={incoming:function(t,e){var n=t.ext&&t.ext.c,i=t.channel;if(n&&i&&0!==i.indexOf("/meta")){var o=this._seq;this._seq=n,n!==o+1&&(s.warn("rt: Message on channel "+i+" out of sequence. Expected "+(o+1)+" got "+n),a.trigger("stats.event","faye.sequence"),d(m))}e(t)},reset:function(){this._seq=0}};var E,S,D,I,L={user_notification:1,activity:1},A=t();a.on("eyeballsInvalid",function(t){s.info("rt: Resetting connection after invalid eyeballs"),d(t)}),a.on("reawaken",function(){s.info("rt: Recycling connection after reawaken"),d(m)}),document.addEventListener&&document.addEventListener("deviceReady",function(){document.addEventListener("online",function(){s.info("rt: online"),h("device_ready")},!1)},!1);var R=!1;return{getClientId:function(){return m},subscribe:function(t,e,n,i){return t=f+t,s.info("rt: Subscribing to "+t),_[t]=i,c().subscribe(t,e,n)},testConnection:h,reset:d,getClient:function(){return c()},registerForSnapshots:function(t,e,n){return k.registerForSnapshots(t,e,n)}}}()},,function(t){"use strict";function e(t){window.setTimeout(t,1e3/60)}var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;t.exports=n&&n.bind(window)||e},function(t){"use strict";t.exports=function(){return{currentView:null,show:function(t){this.currentView&&(this.currentView.fade=!1,this.currentView.hideInternal()),this.currentView=t,t.navigable=!0,t.show()},close:function(){this.currentView&&(this.currentView.navigationalHide(),this.currentView=null)}}}()},function(t,e,n){"use strict";var i=n(12),o=n(5),r=n(2),a=n(30),s=n(105),l=n(112),u=n(113),c=n(114),h=n(115),d=n(3);t.exports=function(){function t(t){if(!e)return!1;var n=t.mentions;if(!n)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(!o.group&&o.userId===e)return!0;if(o.group&&o.userIds&&o.userIds.indexOf(e)>=0)return!0}return!1}var e=r.getUserId(),n=s.Model.extend({idAttribute:"id",parse:function(n){return n.sent&&(n.sent=l(n.sent,l.defaultFormat)),n.editedAt&&(n.editedAt=l(n.editedAt,l.defaultFormat)),n.unread&&n.fromUser&&n.fromUser.id===e&&(n.unread=!1),n.mentioned=t(n)?!0:!1,n},toJSON:function(){var t=i.clone(this.attributes),e=this.get("sent");return e&&(t.sent=e.format()),delete t.html,t}}),f=s.LiveCollection.extend({model:n,modelName:"chat",url:a.room.channelGenerator("/chatMessages"),initialSortBy:"sent",sortByMethods:{sent:function(t){var e=t.id?0:3e5,n=t.get("sent");return n?n.valueOf()+e:e}},initialize:function(){this.listenTo(this,"add remove",function(t,e){e.once("sort",function(){u.calc.call(this,t)})}),this.listenTo(this,"sync",function(t){t instanceof o.Model&&this.checkClientClockSkew(t)}),this.listenTo(this,"change:sent",function(t){this.checkClientClockSkew(t)}),this.listenTo(this,"reset sync",function(){u.parse(this)})},parse:function(t){if(t.length&&t[0].limitReached){t.shift(),this.trigger("limitReached",!0);var e=function(t){t||(this.trigger("limitReached",!1),this.stopListening(this,"atTopChanged",e))}.bind(this);this.listenTo(this,"atTopChanged",e)}return u.parse(t)},findModelForOptimisticMerge:function(t){var e=this.find(function(e){return!e.id&&e.get("text")===t.get("text")});return e},checkClientClockSkew:function(t){var e=t.attributes.sent,n=t.previousAttributes().sent;if(e&&n){var i=e.valueOf()-n.valueOf();i>2e4&&d.warn("Clock skew is "+i+"ms"),this.trigger("clock.skew",i)}}});h.mixin(f,c,s.ReversableCollectionBehaviour);var p=s.Model.extend({idAttribute:"id"}),m=s.LiveCollection.extend({model:p,modelName:"chatReadBy",initialize:function(t,e){var n=e.userCollection;n&&(this.transformModel=function(t){var e=n.get(t.id);return e?e.toJSON():t});var i=e.chatMessageId;this.url=a.room.channelGenerator("/chatMessages/"+i+"/readBy")}});return{ReadByModel:p,ReadByCollection:m,ChatModel:n,ChatCollection:f}}()},function(t,e,n){"use strict";var i=n(105),o=n(30),r=n(111);t.exports=function(){var t=i.Model.extend({idAttribute:"id"}),e=i.LiveCollection.extend({model:t,modelName:"user",url:o.room.channelGenerator("/users"),getSnapshotState:function(){return{lean:!0}}});return{RosterCollection:r.SortedAndLimited,SortedUserCollection:r.Sorted,UserCollection:e,UserModel:t}}()},function(t,e,n){"use strict";var i=n(4),o=n(12),r=n(2),a=n(38),s=n(30),l=n(3),u=n(5),c=n(16),h=n(100),d=n(116);t.exports=function(){function t(t,e,n){return o.throttle(t.bind(e),n||30,{leading:!1})}function e(t,e,n){var i=o.keys(t);o.each(i,function(i){"_meta"!==i&&o.each(t[i],function(t){e.call(n,i,t)})})}function n(t,e){var n=r.user();n.id?t.call(e,n.id):n.once("change:id",function(){t.call(e,n.id)})}function f(){if(k)return k;if(r.troupe().id){k=new y,new w(k);var t=new b(k);return t._subscribe(),new x(t),k}return null}function p(){var t=f();if(t)return t;throw new Error("Unable to create an unread items store without a user")}var m=500,g=6e5,v=function(t,e){d.call(this),this._timeout=t,this._onDequeue=e};o.extend(v.prototype,d.prototype,{_onItemAdded:function(t,e){var n=this;window.setTimeout(function(){n._promote(t,e)},this._timeout)},_promote:function(t,e){this._contains(t,e)&&(this._remove(t,e),this._onDequeue&&this._onDequeue(t,e))}});var y=function(){d.call(this),this._maxItems=100,this._lurkMode=!1,this._addTarpit=new v(m,o.bind(this._promote,this)),this._deleteTarpit=new v(g),this._recountLimited=t(this._recount,this,30),this._currentCountValue=void 0};o.extend(y.prototype,u.Events,d.prototype,{_unreadItemAdded:function(t,e){return this._deleteTarpit._contains(t,e)?void this.trigger("itemMarkedRead",t,e):void(this._contains(t,e)||this._addTarpit._add(t,e))},_unreadItemRemoved:function(t,e){this._deleteTarpit._contains(t,e)||(this._deleteTarpit._add(t,e),this._addTarpit._remove(t,e),this._remove(t,e),this.trigger("unreadItemRemoved",t,e),this._recountLimited())},_markItemRead:function(t,e,n){(!this._lurkMode||n)&&(this._unreadItemRemoved(t,e),this.trigger("itemMarkedRead",t,e,n))},_onItemRemoved:function(){this._recountLimited()},_onItemAdded:function(){this._recountLimited()},_promote:function(t,e){this._add(t,e),this.trigger("add",t,e)},_recount:function(){var t=this._count();return this._currentCountValue=t,this.trigger("newcountvalue",t),c.trigger("unreadItemsCount",t),t},_currentCount:function(){return this._currentCountValue?this._currentCountValue:0},_unreadItemsAdded:function(t){e(t,function(t,e){this._unreadItemAdded(t,e)},this)},_unreadItemsRemoved:function(t){e(t,function(t,e){this._unreadItemRemoved(t,e)},this)},_hasItemBeenMarkedAsRead:function(t,e){return this._deleteTarpit._contains(t,e)},preload:function(t){e(t,function(t,e){l.info("uic: Preload of "+t+":"+e),this._deleteTarpit._contains(t,e)||this._contains(t,e)||this._promote(t,e)},this)},enableLurkMode:function(){this._lurkMode=!0,this._unreadItemsRemoved(this._addTarpit._marshall()),this._unreadItemsRemoved(this._marshall())},disableLurkMode:function(){this._lurkMode=!1},markAllReadNotification:function(){this._unreadItemsRemoved(this._addTarpit._marshall()),this._unreadItemsRemoved(this._marshall())},markAllRead:function(){var t=this;n(function(){s.userRoom["delete"]("/unreadItems/all").then(function(){t._unreadItemsRemoved(t._addTarpit._marshall()),t._unreadItemsRemoved(t._marshall())})},t)}});var w=function(e){this._buffer=new d,this._sendLimited=t(this._send,this,1e3),o.bindAll(this,"_onItemMarkedRead","_onWindowUnload"),e.on("itemMarkedRead",this._onItemMarkedRead),i(window).on("unload",this._onWindowUnload),i(window).on("beforeunload",this._onWindowUnload)};w.prototype={_onItemMarkedRead:function(t,e){this._add(t,e)},_onWindowUnload:function(){this._buffer._count()>0&&this._send({sync:!0})},_add:function(t,e){this._buffer._add(t,e),this._sendLimited()},_send:function(t){n(function(){var n=this._buffer._marshall();this._buffer=new d;var i=!t||!t.sync,o=this;s.userRoom.post("/unreadItems",n,{async:i,global:!1}).fail(function(){l.info("uic: Error posting unread items to server. Will attempt again in 5s"),setTimeout(function(){e(n,function(t,e){o._buffer._add(t,e)},o),o._sendLimited()},5e3)})},this)}};var b=function(t){this._store=t};o.extend(b.prototype,u.Events,{_subscribe:function(){n(function(t){var e=this._store,n="/v1/user/"+t+"/rooms/"+r.getTroupeId()+"/unreadItems";
a.subscribe(n,function(t){switch(t.notification){case"unread_items":e._unreadItemsAdded(t.items);break;case"unread_items_removed":e._unreadItemsRemoved(t.items);break;case"mark_all_read":e.markAllReadNotification();break;case"lurk_change":t.lurk?e.enableLurkMode():e.disableLurkMode()}}),a.registerForSnapshots(n,function(t){var n=t._meta&&t._meta.lurk;n&&e.enableLurkMode(),e.preload(t)})},this)}});var _=function(e,n){o.bindAll(this,"_getBounds"),this._scrollElement=e[0]||e,this._store=n,this._windowScrollLimited=t(this._windowScroll,this,50);var i=t(this._foldCount,this,50);this._foldCountLimited=i,this._inFocus=!0,c.on("eyeballStateChange",this._eyeballStateChange,this),this._scrollElement.addEventListener("scroll",this._getBounds,!1),c.on("unreadItemDisplayed",this._getBounds),n.on("add",i),n.on("unreadItemRemoved",i),setTimeout(this._getBounds,250)};_.prototype={_getBounds:function(){return this._inFocus?(this._scrollBounds(),void this._windowScrollLimited()):void this._foldCountLimited()},_scrollBounds:function(){var t=this._scrollElement.scrollTop,e=t+this._scrollElement.clientHeight;(!this._scrollTop||t<this._scrollTop)&&(this._scrollTop=t),(!this._scrollBottom||e>this._scrollBottom)&&(this._scrollBottom=e)},_windowScroll:function(){if(this._inFocus){this._scrollBounds();var t=this,e=this._scrollTop,n=this._scrollBottom;delete this._scrollTop,delete this._scrollBottom;for(var o,r,a,s,l=this._scrollElement.querySelectorAll(".unread"),u=1e3,c=0,d=0;d<l.length;d++){var f=l[d],p=h.get(f,"itemId"),m="true"===h.get(f,"mentioned");if(p){var g=f.offsetTop;if(g>=e&&n>=g){var v=i(f);t._store._markItemRead("chat",p,m),v.removeClass("unread").addClass("reading"),this._addToMarkReadQueue(v),u+=150}else g>n?(c++,r?s>g&&(r=f,s=g):(r=f,s=g)):e>g&&(o?g>a&&(o=f,a=g):(o=f,a=g))}}this._foldCount()}},_foldCount:function(){var t=this._store._getItemsOfType("chat");if(!t.length)return T.set("unreadAbove",0),void T.set("unreadBelow",0);var e=0,n=0,i=this._scrollElement.scrollTop,r=i+this._scrollElement.clientHeight,a=this._scrollElement.querySelectorAll(".chat-item"),s=o.sortedIndex(a,i-1,function(t){return"number"==typeof t?t:t.offsetTop+t.offsetHeight}),l=a[s];if(l){var u=h.get(l,"itemId");u&&t.forEach(function(t){u>=t&&e++})}var c=o.sortedIndex(a,r+1,function(t){return"number"==typeof t?t:t.offsetTop}),d=a[c];if(d){var f=h.get(d,"itemId");f&&t.forEach(function(t){t>=f&&n++})}T.set("unreadAbove",e),T.set("unreadBelow",n)},_scheduleMarkRead:function(){if(0!==this._markQueue.length&&!this._timer){var t=300/this._markQueue.length;this._timer=setTimeout(this._markRead.bind(this),t)}},_addToMarkReadQueue:function(t){this._markQueue||(this._markQueue=[]),this._markQueue.push(t),this._scheduleMarkRead()},_markRead:function(){this._timer=null;var t=this._markQueue.shift();t&&t.removeClass("reading").addClass("read"),this._scheduleMarkRead()},_eyeballStateChange:function(t){this._inFocus=t,t&&this._getBounds()}};var x=function(t){t.on("unreadItemRemoved",this._onUnreadItemRemoved)};x.prototype={_onUnreadItemRemoved:function(t,e){var n=i(".model-id-"+e);n.removeClass("unread").addClass("read")}};var k,T=new u.Model({defaults:{unreadAbove:0,unreadBelow:0}}),M={acrossTheFold:function(){return T},hasItemBeenMarkedAsRead:function(t,e){var n=p();return n?n._hasItemBeenMarkedAsRead(t,e):!1},markAllRead:function(){var t=p();t.markAllRead()},syncCollections:function(t){var e=p();e.on("unreadItemRemoved",function(e,n){var i=t[e];if(i){var o={unread:!1,mentioned:!1};i.patch(n,o)}})},monitorViewForUnreadItems:function(t){var e=p();return new _(t,e)}};return M.getStore=function(){return k},M.DoubleHash=d,M.Tarpit=v,M.UnreadItemStore=y,window._unreadItems=M,M}()},,,,,,function(t,e,n){n(51),n(52),t.exports=void 0},function(t,e,n){"use strict";var i=n(5),o=n(6),r=n(2),a=n(185),s=n(118),l=n(119),u=n(80);n(120),t.exports=function(){var t=o.ItemView.extend({tagName:"span",template:a,events:{mouseover:"showDetailIntent",click:"showDetail"},modelEvents:{change:"update"},initialize:function(t){this.user=t.user?t.user:{},this.showEmail=t.showEmail||{},this.showBadge=t.showBadge,this.showStatus=t.showStatus,this.avatarSize=t.size?t.size:"s",this.showTooltip=t.showTooltip!==!1,this.tooltipPlacement=t.tooltipPlacement||"vertical"},showDetailIntent:function(t){s.hoverTimeout(t,function(){this.showDetail(t)},this)},showDetail:function(t){if(!this.compactView&&(t.preventDefault(),!this.popover)){this.$el.find(":first-child").tooltip("hide");var e=this.model||new i.Model(this.user),n=new s({model:e,targetElement:t.target});n.show(),s.singleton(this,n)}},update:function(){var t=this.serializeData();this.updatePresence(t),this.updateAvatar(t),this.updateTooltip(t)},updatePresence:function(t){this.showStatus&&(this.$el.find(".trpDisplayPicture").toggleClass("online",t.online),this.$el.find(".trpDisplayPicture").toggleClass("offline",!t.online))},updateAvatar:function(t){this.$el.find(".trpDisplayPicture").css({"background-image":"url('"+t.avatarUrl+"')"})},updateTooltip:function(t){this.showTooltip&&this.$el.find(".trpDisplayPicture").attr("data-original-title",t.tooltip)},getUserId:function(){return this.model?this.model.id:this.user?this.user.id:null},serializeData:function(){var t,e=r.getUserId(),n=this.model?this.model.toJSON():this.user,i=u({username:n.username,version:n.gv,size:"m"==this.avatarSize?60:32}),o=n.id===e||!!n.online;return t=this.showStatus?o?"online":"offline":"",{id:n.id,showBadge:this.showBadge,showStatus:this.showStatus,userDisplayName:n.displayName,avatarUrl:i,avatarSize:this.avatarSize,showTooltip:this.showTooltip,presenceClass:t,online:o,offline:!o,role:n.role,invited:n.invited,removed:n.removed,inactive:n.removed||n.invited}},onRender:function(){var t;this.model?t=this.model.get("displayName"):this.user&&(t=this.user.displayName),this.showTooltip&&!window._troupeCompactView&&t&&this.$el.find(":first-child").tooltip({html:!1,placement:this.tooltipPlacement,container:"body"})}});return l.register({avatar:t}),t}()},function(t,e,n){"use strict";var i=n(6),o=n(112),r=n(2),a=n(121),s=n(119);t.exports=function(){var t=1,e=r.lang(),n=i.ItemView.extend({tagName:"span",initialize:function(e){function n(){var e=o.duration(Date.now()-i.time.valueOf());i.render(e);var r;if(e.asDays()>=1&&e.asDays()<t){var a=e.asHours(),s=1-(a-Math.floor(a));r=1e3*Math.round(86400*s+1)}else if(e.asHours()>=1){var l=e.asHours(),u=1-(l-Math.floor(l));r=1e3*Math.round(3600*u+1)}else{var c=e.asMinutes(),h=1-(c-Math.floor(c));r=1e3*Math.round(60*h+1)}100>r&&(r=1e3),window.setTimeout(n,r)}this.time=o(e.time),this.compact=e.compact,this.position=e.position||"top",this.tooltipFormat=e.tooltipFormat||"LLL";var i=this;n()},render:function(n){this.$el.find("[title]").tooltip("destroy"),n||(n=o.duration(Date.now()-this.time.valueOf()));var i;i=n.asDays()>=t?this.compact?this.time.format("MMM DD",{lang:e}):this.time.format("LL",{lang:e}):this.compact?this.time.format("H:mm",{lang:e}):a("%s ago",n.humanize());var r=this.time.format(this.tooltipFormat,{lang:e});this.$el.html("<span title='"+r+"'>"+i+"</span>"),window._troupeCompactView||this.$el.find("[title]").tooltip({container:"body",placement:this.position,html:!0})}});return s.register({timeago:n}),n}()},,function(t,e,n){"use strict";var i=n(4),o=n(2),r=n(30),a=n(6),s=n(5),l=n(136),u=n(98),c=n(137),h=n(16);n(120),t.exports=function(){function t(t){if("PUBLIC"===t.get("security"))return"Anyone can join";var e;switch(t.get("githubType")){case"REPO":e="All repo collaborators can join";break;case"ORG":e="All org members can join";break;case"REPO_CHANNEL":var n=t.get("uri").split("/")[1],i="PRIVATE"===t.get("security")?"Only invited users":"Anyone in"+n;e=i+" can join";break;case"ORG_CHANNEL":var o=t.get("uri").split("/")[0],r="PRIVATE"===t.get("security")?"Only invited users":"Anyone in "+o;e=r+" can join";break;case"USER_CHANNEL":e="Only invited users can join";break;default:e=t.get("oneToOne")?"This chat is just between you two":"Only invited users can join"}return e}return a.ItemView.extend({modelEvents:{change:"redisplay"},ui:{cog:".js-chat-settings",dropdownMenu:"#cog-dropdown",topic:".js-chat-topic",name:".js-chat-name",favourite:".js-favourite-button"},events:{"click @ui.cog":"showDropdown","click #leave-room":"leaveRoom","click @ui.favourite":"toggleFavourite","dblclick @ui.topic":"showInput","keydown textarea":"detectKeys"},initialize:function(){this.bindUIElements(),this.showActivity=!0,o.isLoggedIn()?(this.dropdown=new c({allowClickPropagation:!0,collection:new s.Collection(this.createMenu()),targetElement:this.ui.cog[0],placement:"right"}),this.listenTo(this.dropdown,"selected",function(t){var e=t.get("href");"#leave"===e?this.leaveRoom():"#notifications"===e&&this.requestBrowserNotificationsPermission()})):this.ui.favourite.css({visibility:"hidden"}),i(".js-chat-name").attr("title",t(o.troupe())),i(".js-chat-name").tooltip({placement:"right"}),this.redisplay()},showDropdown:function(){this.dropdown.show()},createMenu:function(){var t=[{title:"Add people to this room",href:"#add"}],e=o(),n=this.model.get("url");t.push({title:"Share this chat room",href:"#share"}),t.push({divider:!0}),t.push({title:"Notifications",href:"#notifications"}),e.permissions&&e.permissions.admin&&t.push(e.isNativeDesktopApp?{title:"Integrations",href:o.env("basePath")+n+"#integrations",target:"_blank",dataset:{disableRouting:1}}:{title:"Integrations",href:"#integrations"}),t.push({divider:!0}),t.push({title:"Archives",href:"archives/all",target:"_blank"});var i=this.model.get("githubType");return("REPO"===i||"ORG"===i)&&t.push({title:"Open in GitHub",href:"https://www.github.com"+n,target:"_blank"}),t.push({title:"Leave this room",href:"#leave"}),t},leaveRoom:function(){o.isLoggedIn()&&r.room["delete"]("/users/"+o.getUserId(),{}).then(function(){h.trigger("navigation",o.getUser().url,"home","")})},toggleFavourite:function(){if(o.isLoggedIn()){this.ui.favourite.toggleClass("favourite");var t=this.ui.favourite.hasClass("favourite");r.userRoom.put("",{favourite:t})}},saveTopic:function(){var t=this.$el.find("textarea").val();o.troupe().set("topic",t),r.room.put("",{topic:t}),this.editingTopic=!1},cancelEditTopic:function(){this.editingTopic=!1,this.redisplay()},detectKeys:function(t){this.detectReturn(t),this.detectEscape(t)},detectReturn:function(t){13!==t.keyCode||t.ctrlKey||t.shiftKey||(this.saveTopic(),t.stopPropagation(),t.preventDefault())},detectEscape:function(t){27===t.keyCode&&this.cancelEditTopic()},showInput:function(){if(o().permissions.admin&&this.editingTopic!==!0){this.editingTopic=!0;var t=this.$el.find(".js-chat-topic"),e=t.text();this.oldTopic=e,t.html("<textarea class='topic-input'></textarea>");var n=t.find("textarea").val(e);setTimeout(function(){n.select()},10)}},requestBrowserNotificationsPermission:function(){o().desktopNotifications&&u.enable()},redisplay:function(){var t=this.model;this.ui.topic.text(t.get("topic")),l(this.ui.topic[0]),this.ui.favourite.toggleClass("favourite",!!t.get("favourite"))}})}()},function(t,e,n){"use strict";function i(t,e){if(!t)return!1;for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}var o=n(4),r=n(12),a=n(2),s=n(6),l=n(16),u=n(30),c=n(127),h=n(74),d=n(35),f=n(41),p=n(122),m=n(115),g=n(128),v=n(73),y=n(123),w=n(124),b=n(125),_=n(126),x=n(75),k=n(129),T=n(130),M=n(44),C=n(64);n(131);var E=62.5;t.exports=function(){function t(t){t.stopPropagation(),t.preventDefault()}var e={keypress:"onKeyPress","click @ui.scrollToBottom":l.trigger.bind(l,"chatCollectionView:scrollToBottom")},n={"click .js-favourite-button":"toggleFavourite",paste:"handlePaste","click @ui.scrollToBottom":l.trigger.bind(l,"chatCollectionView:scrollToBottom"),dragenter:"onDragEnter",dragleave:"onDragLeave",dragover:"onDragOver",drop:"onDrop"},S=s.Layout.extend({el:"body",ui:{scrollToBottom:".js-scroll-to-bottom",progressBar:"#file-progress-bar",dragOverlay:".js-drag-overlay"},events:c.isMobile?e:n,keyboardEvents:{backspace:"onKeyBackspace",quote:"onKeyQuote"},dragCount:0,initialize:function(){this.bindUIElements();var t=new v({el:"#chat-container",collection:d.chats,userCollection:d.users,decorators:[y,w,b,_,x]});t.bindUIElements(),this.listenTo(d.chats,"atBottomChanged",function(t){this.ui.scrollToBottom.toggleClass("u-scale-zero",t)}.bind(this)),this.rightToolbar=new C({el:"#right-toolbar-layout"}),this.chatInputView=new h.ChatInputView({el:"#chat-input",collection:d.chats,chatCollectionView:t,userCollection:d.users,rollers:t.rollers}).render();var e=M.acrossTheFold();d.chats.once("sync",function(){M.monitorViewForUnreadItems(o("#content-frame"))}),new k.Top({el:"#unread-banner",model:e,chatCollectionView:t}).render(),new k.Bottom({el:"#bottom-unread-banner",model:e,chatCollectionView:t}).render(),new T({el:"#limit-banner",collection:d.chats,chatCollectionView:t}).render(),this.chatCollectionView=t,this.dialogRegion=f,p()&&(o(".primary-scroll").addClass("scroller"),o(".js-chat-input-container").addClass("scrollpush"),o("#room-content").addClass("scroller"))},onKeyBackspace:function(t){t.stopPropagation(),t.preventDefault()},onKeyQuote:function(t){t.preventDefault(),t.stopPropagation(),this.quoteText()},getSelectionText:function(){var t="";return window.getSelection?t=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(t=document.selection.createRange().text),t},quoteText:function(){var t=this.getSelectionText();t.length>0&&l.trigger("input.append","> "+t,{newLine:!0})},updateProgressBar:function(t){var e=this.ui.progressBar,n=t.value&&t.value.toFixed(0)+"%",i=t.timeout||200;setTimeout(function(){e.css("width",n)},i)},resetProgressBar:function(){this.ui.progressBar.hide(),this.updateProgressBar({value:0,timeout:0})},handleUploadProgress:function(t,e){this.updateProgressBar({value:E+t/e*(100-E),timeout:0})},handleUploadStart:function(){this.ui.progressBar.show()},handleUploadSuccess:function(t){this.resetProgressBar();var e=parseInt(t.fields.numberOfFiles,10);l.triggerParent("user_notification",{title:"Upload complete",text:(e>1?e+" files":"file")+" uploaded successfully."})},handleUploadError:function(t){l.triggerParent("user_notification",{title:"Error Uploading File",text:t.message}),this.resetProgressBar()},isTextDrag:function(t){var e=t.dataTransfer;if(i(e.types,"Files"))return!1;if(!e.files&&e.files.length>0)return!1;var n=e.items;if(!n)return!0;for(var o=0;o<n.length;o++){var r=n[o].kind;if("string"!==r)return!1}return!0},onDragEnter:function(e){e.originalEvent&&(e=e.originalEvent),this.isTextDrag(e)||(this.dragCounter++,this.ui.dragOverlay.toggleClass("hide",!1),t(e))},onDragLeave:function(e){e.originalEvent&&(e=e.originalEvent),this.isTextDrag(e)||(this.dragCounter--,this.ui.dragOverlay.toggleClass("hide",0===this.dragCounter),t(e))},onDragOver:function(e){e.originalEvent&&(e=e.originalEvent),this.isTextDrag(e)||t(e)},onDrop:function(e){if(e.originalEvent&&(e=e.originalEvent),!this.isTextDrag(e)){this.dragCounter=0,this.ui.dragOverlay.toggleClass("hide",!0),t(e);var n=e.dataTransfer.files;this.upload(n)}},isImage:function(t){return/image\//.test(t.type)},handlePaste:function(t){t=t.originalEvent||t;var e=t.clipboardData,n=null;if(e&&e.items&&1===e.items.length){if(n=e.items[0].getAsFile(),!n||!this.isImage(n))return;t.preventDefault(),this.upload([n])}},upload:function(t){if(t.length){this.ui.progressBar.show(),this.updateProgressBar({value:0,timeout:0}),this.updateProgressBar({value:E,timeout:200});for(var e={wait:!0,modal:!1,autoSubmit:!1,debug:!1,onStart:this.handleUploadStart.bind(this),onProgress:this.handleUploadProgress.bind(this),onSuccess:this.handleUploadSuccess.bind(this),onError:this.handleUploadError.bind(this)},n=new FormData,i="",s=0;s<t.length;s++){var l=t[s],c=l.type.split("/").shift();s?c!==i&&(i=""):i=c,n.append("file",l)}n.append("numberOfFiles",t.length),u.priv.get("/generate-signature",{room_uri:a.troupe().get("oneToOne")?a.user().get("username"):a.troupe().get("uri"),room_id:a.getTroupeId(),type:i}).then(function(t){n.append("signature",t.sig);var i=o("#upload-form");i.find('input[name="params"]').attr("value",t.params),i.unbind("submit.transloadit"),i.transloadit(r.extend(e,{formData:n})),i.submit()})}}});return m.mixin(S,g),S}()},,,,,,,,,function(t,e,n){"use strict";{var i=n(4),o=n(5),r=n(6),a=n(2),s=n(35),l=n(65),u=n(138),c=n(139),h=n(140),d=n(141);n(122)}t.exports=function(){var t=r.Layout.extend({regions:{search:"#search-results",repo_info:"#repo-info"},events:{"click #upgrade-auth":"onUpgradeAuthClick","click #people-header":"showPeopleList","click #info-header":"showRepoInfo","submit #upload-form":"upload"},toggleSearch:function(){},initialize:function(){if(new l.ExpandableRosterView({rosterCollection:s.roster,userCollection:s.sortedUsers,el:i("#people-roster")}),"REPO"===a.troupe().get("githubType")){var t=new h.model;t.fetch({data:{repo:a.troupe().get("uri")}}),this.repo_info.show(new h.view({model:t}))}new d({el:i("#activity"),collection:s.events});var e=new o.Model({searchTerm:"",active:!1,isLoading:!1});new c({el:i(".js-search"),model:e}).render();var n=new u({el:i("#search-results"),model:e}).render();n.on("search:expand",function(){i(".right-toolbar").addClass("right-toolbar--expanded")}),n.on("search:collapse",function(){i(".right-toolbar").removeClass("right-toolbar--expanded")}),n.on("search:show",function(){i("#toolbar-top-content").hide(),i("#zendesk-footer").hide()}.bind(this)),n.on("search:hide",function(){i("#toolbar-top-content").show(),i("#zendesk-footer").show()}.bind(this)),s.events.on("add reset sync",function(){s.events.length>0?(this.$el.find("#activity-header").show(),s.events.off("add reset sync",null,this)):a().permissions.admin&&this.$el.find("#activity-header").show()},this)},showPeopleList:function(){i("#repo-info").hide(),i("#people-roster").show(),i("#people-header").addClass("selected"),i("#info-header").removeClass("selected")},showRepoInfo:function(){i("#people-roster").hide(),i("#repo-info").show(),i("#people-header").removeClass("selected"),i("#info-header").addClass("selected")}});return t}()},function(t,e,n){"use strict";var i=n(6),o=n(2),r=n(133),a=n(51),s=n(197),l=n(198);t.exports=function(){var t=i.CollectionView.extend({tagName:"ul",className:"roster",itemView:a,itemViewOptions:function(){return{tagName:"li",showStatus:!0,tooltipPlacement:"left"}},initialize:function(){this.listenTo(this.collection,"sort reset",this.render)}}),e=i.ItemView.extend({ui:{showMore:".js-show-more",addMore:".js-add-more"},className:"remaining",template:l,initialize:function(t){this.rosterCollection=t.rosterCollection,this.userCollection=t.userCollection,this.listenTo(this.rosterCollection,"add remove reset",this.render),this.listenTo(this.userCollection,"add remove reset",this.render)},serializeData:function(){var t=this.userCollection.length-this.rosterCollection.length;return{showAddBadge:o.isLoggedIn()&&!o.inOneToOneTroupeContext(),remainingCount:t,plural:t>1}},onRender:function(){var t=this.userCollection.length-this.rosterCollection.length;this.ui.showMore.hide(),this.$el.toggleClass("showMid",this.rosterCollection.length>10),t>0&&(this.ui.showMore.show(),this.$el.toggleClass("showFull"))}}),n=i.Layout.extend({template:s,regions:{roster:"#roster",remaining:"#remaining"},initialize:function(t){this.rosterCollection=t.rosterCollection,this.userCollection=t.userCollection,this.listenTo(this.rosterCollection,"all",this.render),this.listenTo(this.userCollection,"all",this.render)},onRender:function(){this.roster.show(new t({collection:this.rosterCollection})),this.remaining.show(new e({rosterCollection:this.rosterCollection,userCollection:this.userCollection}))}}),u=r.Modal.extend({initialize:function(e){e=e||{},e.title="People",r.Modal.prototype.initialize.call(this,e),this.view=new t(e)}});return{ExpandableRosterView:n,Modal:u}}()},,,,,,,,function(t,e,n){"use strict";var i=n(4),o=n(12),r=n(3),a=n(6),s=n(133),l=n(16),u=n(153),c=n(154),h=n(115);n(155),t.exports=function(){function t(t){var e=t.previousSibling;return e?3===e.nodeType&&!e.previousSibling&&e.textContent.match(/^[\s\n\r]*$/):!0}function e(t){var e=t.nextSibling;return e?3===e.nodeType&&!e.nextSibling&&e.textContent.match(/^[\s\n\r]*$/):!0}function n(e,n){for(;t(n)&&n!==e;)n=n.parentElement;return n===e}function d(t,n){for(;e(n)&&n!==t;)n=n.parentElement;return n===t}function f(t,e,n){for(var i,o=[],r=0,a=t.children;r<a.length&&(i=a.findByIndex(r),i.el!==e);)r++;for(;r<a.length;){if(i=a.findByIndex(r),o.push(i.model),i.el===n)return o;r++}return[]}function p(t){var e=t.map(function(e){var n;if(t.length>1&&e.get("burstStart")){var i=e.get("fromUser"),o=i&&i.username;o&&(o="@"+o),n=o+"\n"+e.get("text")}else n=e.get("text");return n?("\n"!==n.charAt(n.length-1)&&(n+="\n"),n):""}).join("");return"\n"===e.charAt(e.length-1)?e.substring(0,e.length-1):e}var m=20,g="#content-frame",v=a.CollectionView.extend({behaviors:{InfiniteScroll:{reverseScrolling:!0,scrollElementSelector:g,contentWrapper:"#chat-container"}},events:{copy:"onCopy"},itemView:u.ChatItemView,itemViewOptions:function(t){var e={userCollection:this.userCollection,decorators:this.decorators,rollers:this.rollers};if(t&&t.id){var n=this.$el.find(".model-id-"+t.id)[0];n&&(e.el=n)}return e},adjustTopPadding:function(){var t=i("#header-wrapper").outerHeight()+"px",e=document.styleSheets[2];try{e.insertRule?e.insertRule(".trpChatContainer > div:first-child { padding-top: "+t+" }",e.cssRules.length):e.addRule&&e.addRule(".trpChatContainer > div:first-child","padding-top:"+t)}catch(n){}},initialize:function(t){this.adjustTopPadding();var e,n=this;i(window).resize(function(){clearTimeout(e),e=setTimeout(n.adjustTopPadding,100)}),this.listenTo(l,"chatCollectionView:scrollToBottom",function(){this.collection.fetchLatest({},function(){this.rollers.scrollToBottom(),this.clearHighlight()},this)}),this.listenTo(l,"chatCollectionView:selectedChat",function(t,e){var n=this.collection.get(t);this.clearHighlight(),n&&(this.highlightChat(n,e.highlights),this.highlighted=n,this.scrollToChatId(n))}),this.listenTo(l,"chatCollectionView:clearHighlight",this.clearHighlight.bind(this));var o=document.querySelector(g);this.rollers=new c(o,this.el),this.userCollection=t.userCollection,this.decorators=t.decorators||[],this.listenTo(l,"chat.send",function(){this.rollers.scrollToBottom(),this.collection.fetchLatest({},function(){},this)}),this.listenTo(this.collection,"fetch.started",function(){this.rollers.stable(),this.rollers.setModeLocked(!0)}),this.listenTo(this.collection,"fetch.completed",function(){this.rollers.setModeLocked(!1)}),this.listenTo(l,"command.collapse.chat",this.collapseChats),this.listenTo(l,"command.expand.chat",this.expandChats)},scrollToFirstUnread:function(){var t=this;this.collection.fetchFromMarker("first-unread",{},function(){var e=t.collection.findWhere({unread:!0});if(e){var n=t.children.findByModel(e);n&&t.rollers.scrollToElement(n.el)}})},scrollToFirstUnreadBelow:function(){var t=document.querySelector(g),e=t.querySelectorAll(".unread"),n=this.rollers.getScrollBottom()+1,i=o.sortedIndex(e,n,function(t){return t.offsetTop}),r=e[i];r&&this.rollers.scrollToElement(r)},scrollToBottom:function(){this.rollers.scrollToBottom()},isScrolledToBottom:function(){return this.rollers.isScrolledToBottom()},onAfterItemAdded:function(){1===this.collection.length&&this.adjustTopPadding()},pageUp:function(){var t=this.$el.scrollTop(),e=Math.floor(.8*this.$el.height());this.$el.scrollTop(t-e),0===t&&this.scroll.trigger("approaching.end")},pageDown:function(){var t=this.$el.scrollTop(),e=Math.floor(.8*this.$el.height());this.$el.scrollTop(t+e)},scrollToChat:function(t){var e=this.children.findByModel(t);if(e)return this.rollers.scrollToElement(e.el,{centre:!0}),!0},scrollToChatId:function(t){var e=this.collection.get(t);e&&this.scrollToChat(e)},highlightChat:function(t,e){t.set("highlights",e||[])},clearHighlight:function(){var t=this.highlighted;if(t)try{this.highlightChat(t)}catch(e){r.info("Could not clear previously highlighted item")}},getFetchData:function(){r.info("Loading next message chunk.");var t=this.collection.map(function(t){return t.get("id")}),e=o.min(t,function(t,e){return e>t?-1:t>e?1:0});return 1/0===e?void r.info("No messages loaded, cancelling pagenation (!!)"):{beforeId:e,limit:m}},findLastCollapsibleChat:function(){for(var t=this.collection,e=t.length-1;e>=0;e--){var n=t.at(e);if(n.get("isCollapsible"))return n}},setLastCollapsibleChat:function(t){var e=this.findLastCollapsibleChat();if(e){var n=this.children.findByModel(e);n&&n.setCollapse(t)}},collapseChats:function(){this.setLastCollapsibleChat(!0)},expandChats:function(){this.setLastCollapsibleChat(!1)},onCopy:function(t){if(window.getSelection){t.originalEvent&&(t=t.originalEvent);var e=window.getSelection();if(e&&e.rangeCount&&e.getRangeAt){var o=e.getRangeAt(0),r=""+e,a=i(o.startContainer).parents(".chat-item")[0],s=i(o.endContainer).parents(".chat-item")[0];if(a&&s){var l=i(o.startContainer).parents(".js-chat-item-text")[0],u=i(o.endContainer).parents(".js-chat-item-text")[0];if(l&&u&&l===u){if(o.startOffset>0||o.endOffset<o.endContainer.textContent.length)return;var c=n(l,o.startContainer),h=d(l,o.endContainer);if(!c||!h)return}var m=f(this,a,s);if(o.startContainer.textContent.length&&o.startContainer.textContent.length===o.startOffset&&m.shift(),0===o.endOffset&&m.pop(),m.length){var g=p(m);t.clipboardData.setData("text/plain",r),t.clipboardData.setData("text/x-markdown",g),t.preventDefault()}}}}}});return h.mixin(v,s.SortableMarionetteView),v}()},function(t,e,n){"use strict";var i=(n(3),n(5)),o=n(6),r=n(4),a=n(2),s=n(16),l=n(30),u=n(206),c=n(207),h=n(208),d=n(112),f=n(122),p=n(146),m=n(156),g=n(157),v=n(95),y=n(158),w=n(115),b=n(128),_=n(134);n(120),n(159),t.exports=function(){function t(){var t=r("#header-wrapper");t.length||(t=r("header"));var e=t.height();return r(document).height()-e-140}var e=p()?3:10,n=6e5,x=["smile","worried","+1","-1","fire","sparkles","clap","shipit"],k="Touch here to type a chat message.",T="Click here to type a chat message. Supports GitHub flavoured markdown.",M=T+" "+_.cmd+"+Enter to send.",C=function(){var t=window.localStorage.getItem("compose_mode_enabled")||"false";this.disabled=JSON.parse(t)},E=function(t,e){if(t.setSelectionRange)return t.focus(),void t.setSelectionRange(e,e);if(t.createTextRange){var n=t.createTextRange();return n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),void n.select()}};C.prototype.toggle=function(){this.disabled=!this.disabled;var t=JSON.stringify(this.disabled);window.localStorage.setItem("compose_mode_enabled",t)},C.prototype.isEnabled=function(){return this.disabled};var S=o.ItemView.extend({template:u,behaviors:{Widgets:{}},ui:{composeToggle:".js-toggle-compose-mode",textarea:"#chat-input-textarea",mdHelp:".js-md-help"},events:{"click @ui.composeToggle":"toggleComposeMode",paste:"onPaste"},keyboardEvents:{"chat.compose.auto":"composeModeAutoFillCodeBlock","chat.toggle":"toggleComposeMode"},initialize:function(t){this.bindUIElements(),this.rollers=t.rollers,this.chatCollectionView=t.chatCollectionView,this.composeMode=new C,this.userCollection=t.userCollection,this.compactView=t.compactView,this.listenTo(s,"input.append",function(t,e){this.inputBox&&this.inputBox.append(t,e)}),this.listenTo(s,"focus.request.chat",function(){this.inputBox&&(this.inputBox.$el.focus(),s.trigger("focus.change.chat"))})},getComposeModeTitle:function(){var t=this.composeMode.isEnabled()?"chat":"compose";return"Switch to "+t+" mode ("+_.cmd+" + /)"},serializeData:function(){var t,e=this.composeMode.isEnabled();return t=this.compactView?k:e?M:T,{user:a.user(),isComposeModeEnabled:this.composeMode.isEnabled(),placeholder:t,autofocus:!this.compactView,composeModeToggleTitle:this.getComposeModeTitle(),showMarkdownTitle:"Markdown help ("+_.cmd+" + "+_.gitter+" + m)",value:r("#chat-input-textarea").val()}},onRender:function(){var t=this.ui.textarea;this.compactView||E(t[0],t.val().length);var n=new I({el:t,rollers:this.rollers,chatCollectionView:this.chatCollectionView,composeMode:this.composeMode,autofocus:!this.compactView,value:t.val()});this.inputBox=n,this.ui.composeToggle.tooltip({placement:"left"}),this.ui.mdHelp.tooltip({placement:"left"});var o=this.userCollection;p()||t.textcomplete([{match:/(^|\s)(([\w-_]+\/[\w-_]+)?#(\d*))$/,maxCount:e,search:function(t,e){var n=t.split("#"),i=n[0],o=n[1],r={};i&&(r.repoName=i),o&&(r.issueNumber=o),l.room.get("/issues",r).then(function(t){e(t)}).fail(function(){e([])})},template:function(t){return c({name:t.number,description:t.title})},replace:function(t){return"$1$3#"+t.number+" "}},{match:/(^|\s)@(\/?[a-zA-Z0-9_\-]*)$/,maxCount:e,search:function(t,e){var n=t.toLowerCase(),r=a.user().get("username").toLowerCase(),s=o&&o.filter(function(t){var e=t.get("username").toLowerCase();if(e===r)return!1;var i=(t.get("displayName")||"").toLowerCase();return 0===e.indexOf(n)||0===i.indexOf(n)});n&&0!=="/all".indexOf(n)||a().permissions.admin&&s.unshift(new i.Model({username:"/all",displayName:"Group"})),e(s)},template:function(t){return c({name:t.get("username"),description:t.get("displayName")})},replace:function(t){return"$1@"+t.get("username")+" "}},{match:/(^|\s):([\-+\w]*)$/,maxCount:e,search:function(t,e){if(t.length<1)return e(x);var n=m.named.filter(function(e){return 0===e.indexOf(t)});e(n)},template:function(t){return h({emoji:t,emojiUrl:v("images/emoji/"+t+".png")})},replace:function(t){return"$1:"+t+": "}},{match:/(^)\/(\w*)$/,maxCount:y.size,search:function(t,e){var n=y.getSuggestions(t);e(n)},template:function(t){return c({name:t.command,description:t.description})},replace:function(t){return"$1/"+t.completion}}]),t.on("textComplete:show",function(){t.attr("data-prevent-keys","on")}),t.on("textComplete:hide",function(){setTimeout(function(){t.attr("data-prevent-keys","off")},0)}),t.on("touchend",function(){return window.setTimeout(function(){t.focus()},300),!0}),this.listenTo(this.inputBox,"save",this.send),this.listenTo(this.inputBox,"subst",this.subst),this.listenTo(this.inputBox,"editLast",this.editLast)},toggleComposeMode:function(t){t&&!t.origin&&t.preventDefault(),this.composeMode.toggle();var e=this.composeMode.isEnabled();this.ui.composeToggle.attr("title",this.getComposeModeTitle()).tooltip("fixTitle").tooltip("hide");var n=this.ui.composeToggle.find("i");n.removeClass(),n.addClass(e?"icon-keyboard-1":"icon-chat-alt");var i=e?M:T;this.$el.find("textarea").attr("placeholder",i).focus()},composeModeAutoFillCodeBlock:function(t){var e=this.inputBox.$el;if("```"===e.val()){var n=!this.composeMode.isEnabled();t.preventDefault(),n&&(this.toggleComposeMode(t),this.listenToOnce(this.inputBox,"save",this.toggleComposeMode.bind(this,null))),e.val(function(t,e){return e+"\n\n```"}),E(e[0],4)}},isStatusMessage:function(t){return/^\/me /.test(t)},textToStatus:function(t){return t.replace(/^\/me /,"@"+a.getUser().username+" ")},send:function(t){if(t){var e={text:t,fromUser:a.getUser(),sent:d()};this.isStatusMessage(e.text)&&(e.text=this.textToStatus(e.text),e.status=!0);var n=this.collection.create(e);s.trigger("chat.send",n)}return!1},getLastEditableMessage:function(){var t=this.collection.filter(function(t){var e=t.get("fromUser");return e&&e.id===a.getUserId()});return t.sort(function(t,e){var n=t.get("sent");n=n?n.valueOf():0;var i=e.get("sent");return i=i?i.valueOf():0,i-n}),t[0]},subst:function(t,e,i){var o=this.getLastEditableMessage();if(o&&Date.now()-o.get("sent").valueOf()<=n){var r=t.replace(/(^|[^\[])\^/g,"$1"),a=new RegExp(r,i?"gi":"i"),s=o.get("text").replace(a,e);o.set({text:s,html:null}).save()}},editLast:function(){if(this.chatCollectionView){var t=this.getLastEditableMessage();if(t){var e=this.chatCollectionView.children.findByModel(t);e&&e.toggleEdit()}}},onPaste:function(t){if(t.originalEvent&&(t=t.originalEvent),t.clipboardData){var e=t.clipboardData.getData("text/x-markdown");if(e){var n=this.ui.textarea.val(),i=this.ui.textarea[0],o=i.selectionStart,r=i.selectionEnd;i.value=n.substring(0,o)+e+n.substring(r),i.selectionStart=i.selectionEnd=o+e.length,t.preventDefault()
}}}});w.mixin(S,b);var D=function(e){function n(t){i&&(t?i.adjustScroll(500):i.adjustScrollContinuously(500))}var i=e.rollers,o=e.el,a=r(o);this.resetInput=function(t){a.css({height:"","overflow-y":""}),n(t)},this.resizeInput=function(){var e=t(),i=o.scrollHeight,r=i>e?e:i,s=o.offsetHeight;s!=r&&(a.height(r),n())}},I=o.ItemView.extend({events:{keyup:"onKeyUp",blur:"onBlur"},keyboardEvents:{"chat.edit.openLast":"onKeyEditLast","chat.send":"onKeySend",pageUp:"onKeyPageUp",pageDown:"onKeyPageDown"},initialize:function(t){this.autofocus=t.autofocus,f()&&this.$el.addClass("scroller");var e=new D({el:this.el,rollers:t.rollers});this.chatResizer=e,this.listenTo(this,"change",function(){e.resizeInput()}),this.drafty=g(this.el),e.resetInput(!0),this.chatCollectionView=t.chatCollectionView,this.composeMode=t.composeMode,this.chatResizer.resizeInput()},onBlur:function(){p()&&!this.isTypeaheadShowing()&&this.processInput()},onKeyUp:function(){this.chatResizer.resizeInput()},onKeyEditLast:function(){this.$el.val()||this.trigger("editLast")},onKeySend:function(t,e){var n=this.composeMode&&this.composeMode.isEnabled(),i=e.mods.length||!n;return!this.isTypeaheadShowing()&&i?(this.hasVisibleText()&&this.processInput(),t.preventDefault(),!1):void 0},onKeyPageUp:function(){this.chatCollectionView&&this.chatCollectionView.pageUp()},onKeyPageDown:function(){this.chatCollectionView&&this.chatCollectionView.pageDown()},processInput:function(){var t=y.findMatch(this.$el.val());t&&t.action?t.action(this):this.send()},send:function(){this.trigger("save",this.$el.val()),this.reset()},reset:function(){r("#chatInputForm").trigger("reset"),this.el.value="",this.drafty.reset(),this.chatResizer.resetInput()},append:function(t,e){var n=this.$el.val(),i=n.length;!n||n.match(/\s+$/)?n+=t:e&&e.newLine?(i++,n=n+"\n"+t):n=n+" "+t,this.chatResizer.resizeInput(),this.$el.val(n),this.el.setSelectionRange(n.length,n.length),this.el.focus(),this.el.scrollTop=this.el.clientHeight},isTypeaheadShowing:function(){return this.$el.parent().find(".dropdown-menu").is(":visible")},hasVisibleText:function(){return!this.$el.val().match(/^\s+$/)}});return w.mixin(I,b),{ChatInputView:S,ChatInputBoxView:I}}()},function(t,e,n){"use strict";var i=n(156);t.exports=function(){var t=i.emojify,e={decorate:function(e){t.run(e.$el.find(".js-chat-item-text")[0])}};return e}()},,,,function(t,e,n){"use strict";n(162),n(163),n(164),t.exports=function(){return null}()},function(t,e,n){"use strict";function i(t){if(!t||!t.length)return 1;for(var e=5381,n=0;n<t.length&&8>n;n++)e=(e<<5)+e+t.charCodeAt(n);return(e>0?e:-e)%6}function o(t){if(!t||!t.username)return"https://avatars1.githubusercontent.com/u/0";var e=t.username,n=t.version,o=t.size||30;return a+i(e)+s+e+"?"+(n?"v="+n:"")+"&s="+o}var r=n(288),a="https://avatars",s=".githubusercontent.com/",l=r.isBrowser?function(){return window.devicePixelRatio||1}:function(){return 1};t.exports=function(t){var e=l();t.size=(t.size||30)*e;var n=o(t);return n}},,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(2);t.exports=function(){function t(t){return"../"+t}function e(t){return"/_s/l/"+t}function n(t,e){var n=e&&e.nonrelative,i=n?"https://":"//";return e&&e.notStatic===!0?i+r[0]+"/"+t:i+r[0]+l+"/"+t}function o(t,e){for(var n=0,i=0;i<t.length;i+=3)n+=t.charCodeAt(i);var o=r[n%a],s=e&&e.nonrelative,u=s?"https://":"//";return e&&e.notStatic===!0?u+o+"/"+t:u+o+l+"/"+t}var r=i.env("cdns"),a=r&&r.length,s=i.env("assetTag"),l=s?"/_s/"+s:"";return"file:"===window.location.protocol?t:a?1==a?n:o:e}()},,,function(t,e,n){"use strict";var i=n(16),o=n(95);t.exports=function(){function t(){if(n){if(n.permission)return n.permission;switch(r.checkPermission()){case 0:return"granted";case 1:return"default";case 2:return"denied"}}}function e(t){var e=t.link,i=t.title,r=t.text,a=o("images/icon-logo-red-64.png"),s=new n(i,{body:r,icon:a});s.onshow=function(){setTimeout(function(){s.close()},1e4)},s.onclick=function(){if(window.focus(),e){if(e==window.location.pathname)return;if(e.split("#")[0]==window.location.pathname)return void window.location.replace("#"+e.split("#",2)[1]);window.location.replace(e)}}}var n=window.Notification,r=window.webkitNotifications;return{hasNotBeenSetup:function(){return"default"===t()},hasBeenDenied:function(){return"denied"===t()},hasBeenGranted:function(){return"granted"===t()},enable:function(){n&&("granted"===t()?i.on("user_notification",function(t){e(t)}):n.requestPermission(function(){i.on("user_notification",function(t){e(t)})}))}}}()},function(t,e,n){"use strict";var i=new RegExp("^\\/("+n(235).join("|")+")\\b");t.exports=function(t){return t?i.test(t)?!1:/\/archives\/(all|\d{4}\/\d{2}\/\d{2})/.test(t)?!1:/\/[^]+/.test(t):!1}},function(t){"use strict";function e(t){var e=t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()});return"data-"+e.toLowerCase()}t.exports=document.documentElement.dataset?{get:function(t,e){return t&&t.dataset&&t.dataset[e]},set:function(t,e,n){t.dataset[e]=n}}:{get:function(t,n){return t&&t.getAttribute(e(n))},set:function(t,n,i){return t.setAttribute(e(n),i)}}},function(t,e,n){"use strict";var i=n(236),o=n(237);t.exports=function(t,e){return o(i,t,e)}},function(t,e,n){"use strict";var i=n(30),o=n(5),r=n(105),a=n(112);t.exports=function(){var t=r.Model.extend({idAttribute:"id",initialize:function(t){var e=!!t.url;if(e){var n=this.get("lastAccessTime");n&&this.set("lastAccessTimeNoSync",n.clone()),this.get("unreadItems")&&this.set("hasHadUnreadItemsAtSomePoint",!0),this.get("mentions")&&this.set("hasHadMentionsAtSomePoint",!0)}this.listenTo(this,"change:unreadItems",function(t,e){e&&this.set("hasHadUnreadItemsAtSomePoint",!0)}),this.listenTo(this,"change:mentions",function(t,e){e&&this.set("hasHadMentionsAtSomePoint",!0)})},parse:function(t){return"string"==typeof t.lastAccessTime&&(t.lastAccessTime=a(t.lastAccessTime,a.defaultFormat)),t}},{modelType:"troupe"}),e=o.Collection.extend({model:t,url:i.user.channelGenerator("/rooms?suggested=1")}),n=r.LiveCollection.extend({model:t,url:i.user.channelGenerator("/rooms"),initialize:function(){this.listenTo(this,"change:favourite",this.reorderFavs),this.listenTo(this,"change:lastAccessTime change:lurk",this.resetActivity)},resetActivity:function(t){t.changed.lastAccessTime&&t.get("lastAccessTime")&&t.unset("activity"),t.changed.lurk&&!t.get("lurk")&&t.unset("activity")},reorderFavs:function(t){if(t.changed&&t.changed.favourite&&!this.reordering){this.reordering=!0;var e=t.changed.favourite,n=this.map(function(t){return{id:t.id,favourite:t.get("favourite")}}).filter(function(n){return n.favourite>=e&&n.id!==t.id});n.sort(function(t,e){return t.favourite-e.favourite});for(var i=e,o=0;o<n.length;o++){var r=n[o];if(r.favourite>i){n.splice(o,n.length);break}r.favourite++,i=r.favourite}for(var a=this,s=n.length-1;s>=0;s--){var l=n[s],u=l.id,c=l.favourite,h=a.get(u);h.set("favourite",c,{silent:!0})}delete this.reordering}}});return{SuggestedTroupeCollection:e,TroupeCollection:n,TroupeModel:t}}()},function(t,e,n){"use strict";var i=n(12),o=n(30),r=n(105),a=n(112),s=n(115);t.exports=function(){var t=r.Model.extend({idAttribute:"id",parse:function(t){return t.sent&&(t.sent=a(t.sent,a.defaultFormat)),t},toJSON:function(){var t=i.clone(this.attributes),e=this.get("sent");return e&&(t.sent=e.format()),delete t.html,t}}),e=r.LiveCollection.extend({model:t,initialize:function(){this.on("add reset",this.trim,this)},trim:function(){for(;this.length>20;)this.pop()},modelName:"event",url:o.room.channelGenerator("/events"),initialSortBy:"-sent",sortByMethods:{sent:function(t){var e=t.id?0:3e5,n=t.get("sent");return n?n.valueOf()+e:e}},findModelForOptimisticMerge:function(t){var e=this.find(function(e){return!e.id&&e.get("text")===t.get("text")});return e}});return s.mixin(e,r.ReversableCollectionBehaviour),{EventModel:t,EventCollection:e}}()},function(t,e,n){"use strict";var i=n(2),o=n(38),r=n(16),a=n(30);t.exports=function(){var t;i.troupe().watch("change:id",function(e){if(t&&(t.cancel(),t=null),e.id){var n=o.getClient(),i="/api"+a.room.channel();t=n.subscribe(i,function(t){"presence"===t.notification&&("in"===t.status?r.trigger("userLoggedIntoTroupe",t):"out"===t.status&&r.trigger("userLoggedOutOfTroupe",t))})}})}()},function(t,e,n){"use strict";var i=n(12),o=n(30),r=n(5),a=n(38),s=n(3),l=n(241);t.exports=function(){function t(t){return function(e,n){var i=t(e),o=t(n);return void 0===i?1:void 0===o?-1:o>i?-1:i>o?1:0}}function e(t){return function(e,n){return-1*t(e,n)}}var n=2e3;r.isEqual=l;var u={firstLoad:!1},c={create:"post",update:"put",patch:"patch","delete":"delete",read:"get"};return r.sync=function(t,e,n){var r=n.url||i.result(e,"url");if(!r)throw new Error("URL required");var a,s=c[t];return a="get"===s?o[s](r,n.data):o[s](r,e),n.success&&(a=a.then(n.success)),n.error&&(a=a.fail(n.error)),e.trigger("request",e,null,n),a},u.Model=r.Model.extend({constructor:function(){function t(t){e.syncStatus=t,e.trigger("syncStatusChange",t)}r.Model.prototype.constructor.apply(this,Array.prototype.slice.apply(arguments));var e=this;this.syncStatus=null,this.listenTo(this,"sync",function(){t("synced")}),this.listenTo(this,"request",function(){t("syncing")}),this.listenTo(this,"error",function(){t("syncerror")})},convertArrayToCollection:function(t,e){var n=this.get(t);i.isArray(n)&&this.set(t,new e(n,{parse:!0}))},set:function(t,e,n){var o,a;if(!t)return this;i.isObject(t)?(a=t,n=e):(a={})[t]=e;var s={};n||(n={});var l=!1;for(o in a){e=a[o];var u=this.get(o);u instanceof r.Collection&&(e instanceof r.Collection&&(e=e.toJSON()),u.reset(e),this.changed[o]=e,s[o]=!0,this.trigger("change:"+o,this,this.changed[o]),delete a[o],l=!0)}return l&&this.trigger("change",this,n),r.Model.prototype.set.call(this,a,n)}}),u.LiveCollection=r.Collection.extend({modelName:"",constructor:function(t,e){var n={snapshot:!0};e=i.extend(n,e),r.Collection.prototype.constructor.call(this,t,e),this._loading=!1,this.once("sync",this._onInitialLoad,this),this.on("sync",this._onSync,this),this.on("request",this._onRequest,this),e&&e.listen&&this.listen(e)},addWaiter:function(t,e,n){function i(n){return clearTimeout(u),s.info("coll: Waitor completed with model",n),r.off("add",o,t),r.off("change:id",o,t),l?void s.info("coll: Warning: waitor function called twice."):(l=!0,void(n?e.apply(r,[n]):e.apply(r,[])))}function o(e){e&&e[a]===t&&i(e)}if(s.info("coll: Waiting for id",t),t){var r=this,a=this.model.prototype.idAttribute||"id",l=!1,u=setTimeout(function(){i()},n);this.on("add",o,t),this.on("change:id",o,t)}},_onSync:function(){this._loading=!1},_onRequest:function(){this._loading=!0},_onInitialLoad:function(){this._initialLoadCalled||(this._initialLoadCalled=!0,this.trigger("loaded"))},listen:function(t){function e(){return n.getSnapshotState()}if(!this.subscription){var n=this,o=i.result(this,"url");if(!o)throw new Error("URL is required");this.subscription=a.subscribe(o,function(t){n._onDataChange(t)});var r=this.getSnapshotState&&e;t&&t.snapshot&&a.registerForSnapshots(o,function(t){n.trigger("request");var e={parse:!0,remove:!0,add:!0,merge:!0};if(n.length>0){var i=n.where({presnapshot:void 0});n.set(t.concat(i),e)}else n.reset(t,e);n._onInitialLoad(),n.trigger("sync"),n.trigger("snapshot")},r),this.subscription.errback(function(t){s.info("coll: Subscription error for "+o,t)})}},isLoading:function(){return this._loading},hasLoaded:function(){return this._initialLoadCalled},unlisten:function(){this.subscription&&(this.subscription.cancel(),this.subscription=null)},findExistingModel:function(t,e){var n=this.get(t);return n?n:(this.findModelForOptimisticMerge&&(n=this.findModelForOptimisticMerge(e)),n)},operationIsUpToDate:function(t,e,n){var i=e.get("v")?e.get("v"):0,o=n.v?n.v:0;return"create"===t?!0:i?o?"patch"===t?o>=i:o>i:"patch"===t:!0},applyUpdate:function(t,e,n,i,o){this.operationIsUpToDate(t,e,n)?(s.info("coll: Performing "+t,n),e.set(i.attributes,o||{})):s.info("coll: Ignoring out-of-date update",e.toJSON(),n)},patch:function(t,e,i){s.info("coll: Request to patch "+t+" with ",e,i);var o=this;this.transformModel&&(e=this.transformModel(e));var r=new this.model(e,{parse:!0}),a=this.findExistingModel(t,r);return a?void this.applyUpdate("patch",a,e,r,i):void this.addWaiter(t,function(n){return n?void o.applyUpdate("patch",n,e,r,i):void s.info("coll: Unable to find model "+t)},n)},_onDataChange:function(t){var e=this,i=t.operation,o=t.model,r=this.model.prototype.idAttribute||"id",a=o[r];if(!this.ignoreDataChange||!this.ignoreDataChange(t)){this.transformModel&&(o=this.transformModel(o));var l=new this.model(o,{parse:!0}),u=this.findExistingModel(a,l);switch(i){case"create":case"patch":case"update":if(u){this.applyUpdate(i,u,o,l);break}"patch"===i?this.addWaiter(a,function(t){return t?void e.applyUpdate("patch",t,o,l):void s.info("coll: Unable to find model "+a)},n):this.add(l);break;case"remove":u&&this.remove(u);break;default:s.info("coll: Unknown operation "+i+", ignoring")}}}}),u.LoadingMixin={initialize:function(){0===this.length&&(this.loading=!0,this.listenToOnce(this,"add reset sync",this.loadComplete))},loadComplete:function(){delete this.loading,this.trigger("loaded")}},u.UnderlyingLoadingMixin={initialize:function(){this.collection.loading&&(this.loading=!0,this.listenToOnce(this.collection,"loaded",this.loadComplete))},loadComplete:function(){delete this.loading,this.trigger("loaded")}},u.SearchResultsCollection={parse:function(t){var e=t.limit;return t.results.length<e&&(this._noMoreData=!0),t.results},query:function(t){t?"string"==typeof t&&(t={q:t}):t={},i.isEqual(t,this._currentQuery)||(this._currentQuery=t,this._skip=0,this._noMoreData=!1,this.fetchNext({remove:!0}),this.trigger("search:newquery"))},fetchNext:function(t){function e(){}if(t||(t={}),!this._noMoreData){var n=t.context,o=t.done||e,r=t.noMore||e;n&&(o=o.bind(n),r=r.bind(n));var a=i.extend({},this._currentQuery,{skip:this._skip}),l=this;this.trigger("search:next"),s.info("coll: Fetch next: ",a),this.fetch({remove:"remove"in t?t.remove:!1,add:"add"in t?t.add:!0,merge:"merge"in t?t.merge:!0,data:a,success:function(){l._skip=l.length,l._noMoreData&&(l.trigger("search:nomore"),r()),l.trigger("search:fetch:complete"),o()},error:function(){l.trigger("search:fetch:complete"),o()}})}}},u.ReversableCollectionBehaviour={initialize:function(){this.initialSortBy&&this.setSortBy(this.initialSortBy)},setSortBy:function(n){var i=!1;n===this.currentSortByField&&(n=0===n.indexOf("-")?n.substring(1):"-"+n);var o;0===n.indexOf("-")?(o=n.substring(1),i=!0):o=n;var r;r=this.sortByMethods&&this.sortByMethods[o]?this.sortByMethods[o]:function(t){return t.get(o)},this.currentSortByField=n;var a=t(r);return i&&(a=e(a)),this.comparator=a,this.sort()}},u}()},,,,,function(t,e,n){"use strict";function i(t){try{window.parent.location.href=t}catch(e){window.location.href=t}}var o=n(30);t.exports=function(){return o.web.post("/logout").then(function(t){i(t&&t.redirect?t.redirect:"/")}).fail(function(){i("/")})}},function(t,e,n){"use strict";var i=n(5),o=n(12),r=(n(3),n(239));t.exports=function(){var t=i.Collection.extend({initialize:function(t,e){var n=e.users;this.sortLimited=o.debounce(function(){this.sort()}.bind(this),10),this.listenTo(n,"add",this.parentAdd),this.listenTo(n,"remove",this.parentRemove),this.listenTo(n,"reset",this.parentReset)},disconnect:function(){this.stopListening()},parentAdd:function(t){this.add(t)},parentRemove:function(t){this.remove(t)},parentReset:function(t){this.reset(t.models)},comparator:r}),e=i.Collection.extend({initialize:function(e,n){var i=new t([],{users:n.users});this.underlying=i,this.limit=n.limit||10,this.comparator=function(t){return t._sortIndex},this.listenTo(i,"add",this.underlyingAdd),this.listenTo(i,"remove",this.underlyingRemove),this.listenTo(i,"reset",this.underlyingReset),this.listenTo(i,"sort",this.underlyingSort)},setLimit:function(t){t!==this.limit&&(this.limit=t,this.underlyingSort())},underlyingAdd:function(t,e){var n=e.indexOf(t);if(!(n>=this.limit))for(t._sortIndex=n,this.add(t,{at:n});this.length>=this.limit;)this.pop()},underlyingRemove:function(){this.underlyingSort()},underlyingReset:function(){this.underlyingSort()},analyse:function(){for(var t=0,e=-1,n=this.comparator(this.models[0]),i=1;i<this.models.length;i++){var o=this.comparator(this.models[i]);if(n>o)if(t++,1==t)e=i;else if(t>1)break}return{breaks:t,first:e}},underlyingSort:function(){var t=this.underlying.take(this.limit),e=t.reduce(function(t,e,n){return t[e.id]=n,t},{});t=o.chain(t);var n=this,i=[];n.forEach(function(n){var o=e[n.id];o>=0?(t=t.without(n),n._sortIndex=o):i.push(n)}),i.length&&this.remove(i),t.forEach(function(t){var i=e[t.id];t._sortIndex=i,n.add(t,{at:i})}),n.sort()}});return{SortedAndLimited:e,Sorted:t}}()},function(t,e,n){"use strict";var i=n(15),o=n(2);t.exports=function(){return i.calendar={lastDay:"[Yesterday at] LT",sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",lastWeek:"[last] dddd [at] LT",nextWeek:"dddd [at] LT",sameElse:"LL"},i.lang(o.lang()),i.defaultFormat="YYYY-MM-DDTHH:mm:ss.SSSZ",i}()},function(t,e,n){"use strict";var i=n(12),o=n(5);t.exports=function(){function t(t){return i.isArray(t)?new o.Collection(t):t}function e(t){var e=null;if(0===t)return t;for(;t--&&(e=this.at(t),!e.get("burstStart")););return t}function n(t){if(t===this.length-1)return t;for(var e=null;t<this.length&&(e=this.at(t),!e.get("burstStart"));)t++;return t}function r(t){if(!("burstStart"in t.attributes)){var i=this.indexOf(t),o=e.call(this,i),r=n.call(this,i);s(this,o,r)}}function a(t,e){var n=t.get("fromUser"),i=t.get("sent"),o=n&&n.username,r=i&&new Date(i).valueOf();if(t.get("status"))return e.burstStart=!0,e.prevFinal=!0,void(e.time=r);if(!e.user)return e.burstStart=!0,e.prevFinal=!0,e.user=o,void(e.time=r);var a=r-e.time>l?!0:!1;return e.prevIsStatus||o!==e.user||a?(e.burstStart=!0,e.prevFinal=!0,e.user=o,void(e.time=r)):(e.burstStart=!1,e.prevFinal=!1,void(e.user=o))}function s(e,n,i){var o=t(e);if(o){n="undefined"!=typeof n?n:0,i="undefined"!=typeof i?i:o.length-1;var r={user:null,burstStart:!1,prevFinal:!1,prevIsStatus:!1,time:null};return o.slice(n,i+1).forEach(function(t,e){e+=n,e>0&&(r.prevIsStatus=o.at(e-1).get("status")),a(t,r),t.set("burstStart",r.burstStart),e>0&&o.at(e-1).set("burstFinal",r.prevFinal)}),o.toJSON()}}var l=3e5;return{calc:r,parse:s}}()},function(t,e,n){"use strict";var i=n(12),o=n(240),r=n(2);t.exports=function(){return{initialize:function(){this.atTop=!1,this.atBottom=!0},getLoadLimit:function(){return Math.round((window.screen.height-150)/20)},getCollectionLimit:function(){return 5*this.getLoadLimit()},ignoreDataChange:function(t){return"create"===t.operation?!this.atBottom:!1},fetchLatest:function(t,e,n){var r=this;if(!this.atBottom&&!this._isFetching){var a=this.getLoadLimit(),s=this.getQuery&&this.getQuery()||{};s=i.defaults(s,{limit:a});var l=o.index(this.pluck("id"),o.identityTransform);this.fetch({remove:"remove"in t?t.remove:!1,add:"add"in t?t.add:!0,merge:"merge"in t?t.merge:!0,data:s,success:function(t,i){delete r._isFetching,r.setAtBottom(!0);var s=i.map(o.idTransform),u=s.some(function(t){return l[t]});if(!u){var c=Object.keys(l).map(function(t){return r.get(t)});r.remove(c)}i.length<a?r.setAtTop(!0):r.trimTop(),r.trigger("scroll.fetch","previous"),e&&e.call(n)},error:function(t){e&&e.call(n||null,t)}})}},fetchMoreBefore:function(t,e,n){if(!this.atTop&&!this._isFetching){this._isFetching=!0;var r;this.length&&(r=o.min(this.pluck("id")));var a=this.getLoadLimit(),s=this.getQuery&&this.getQuery()||{};s=i.defaults(s,{beforeId:r,limit:a});var l=this;this.fetch({remove:"remove"in t?t.remove:!1,add:"add"in t?t.add:!0,merge:"merge"in t?t.merge:!0,data:s,success:function(t,i){delete l._isFetching,i.length<a&&l.setAtTop(!0),l.trimBottom(),l.trigger("scroll.fetch","previous"),e&&e.call(n)},error:function(t){e&&e.call(t)}})}},fetchMoreAfter:function(t,e,n){var r=this;if(!this.atBottom&&!this._isFetching){this._isFetching=!0;var a;this.length&&(a=o.max(this.pluck("id")));var s=this.getLoadLimit(),l=this.getQuery&&this.getQuery()||{};l=i.defaults(l,{afterId:a,limit:s}),this.trigger("fetch.started"),this.fetch({remove:"remove"in t?t.remove:!1,add:"add"in t?t.add:!0,merge:"merge"in t?t.merge:!0,data:l,success:function(t,i){r.trigger("fetch.completed"),delete r._isFetching,i.length<s&&r.setAtBottom(!0),r.trimTop(),r.trigger("scroll.fetch","next"),e&&e.call(n)},error:function(t){r.trigger("fetch.completed"),e&&e.call(t)}})}},fetchAtPoint:function(t,e,n,r){if(e||(e={}),!this._isFetching){this._isFetching=!0;var a=this.getLoadLimit(),s=o.index(this.pluck("id"),o.identityTransform),l=this.getQuery&&this.getQuery()||{};l=i.defaults(l,t,{limit:a});var u=this;this.fetch({remove:"remove"in e?e.remove:!1,add:"add"in e?e.add:!0,merge:"merge"in e?e.merge:!0,data:l,success:function(t,e){delete u._isFetching;var i=e.map(o.idTransform),a=i.some(function(t){return s[t]});if(!a){u.setAtBottom(!1),u.setAtTop(!1);var l=Object.keys(s).map(function(t){return u.get(t)});u.remove(l)}u.trimBottom(),u.trigger("scroll.fetch","marker"),n&&n.call(r)},error:function(t){n&&n.call(t)}})}},fetchFromMarker:function(t,e,n,i){return this.fetchAtPoint({marker:t},e,n,i)},ensureLoaded:function(t,e,n){function i(t,i){e&&e.call(n,t,i)}var o=this.get(t);return o?i(null,o):void this.fetchAtPoint({aroundId:t},{},function(e){return e?i(e):i(null,this.get(t))},this)},trimTop:function(){var t=this.getCollectionLimit();if(this.length>t){var e=this.slice(0,-t);this.remove(e),this.setAtTop(!1)}},trimBottom:function(){var t=this.getCollectionLimit();if(this.length>t){var e=this.slice(t);this.remove(e),this.setAtBottom(!1)}},getSnapshotState:function(){var t=r().snapshots;if(t){var e=t[this.modelName];return e&&(this.setAtTop(!1),this.setAtBottom(!e.aroundId),this.listenToOnce(this,"snapshot",function(){delete t[this.modelName]})),e}if(this.length){if(this.atBottom)return{limit:this.length};var n=this.at(this.length-1).get("id");return{limit:this.length,beforeInclId:n}}},setAtTop:function(t){!!t!=!!this.atTop&&(this.atTop=!!t,this.trigger("atTopChanged",this.atTop))},setAtBottom:function(t){!!t!=!!this.atBottom&&(this.atBottom=!!t,this.trigger("atBottomChanged",this.atBottom))}}}()},function(t,e,n){var i,o;i=[n(12)],o=function(t){return function(n){var i;i=e,i.mixins={},i.mixin=function(e){var n=t.chain(arguments).toArray().rest().flatten().value(),o={};t(n).each(function(n){t.isString(n)&&(n=i.mixins[n]),t(n).each(function(n,i){t.isFunction(n)?(e.prototype[i]&&(o[i]=o[i]||[e.prototype[i]],o[i].push(n)),e.prototype[i]=n):t.isObject(n)&&(e.prototype[i]=t.extend({},n,e.prototype[i]||{}))})}),t(o).each(function(n,i){e.prototype[i]=function(){var e=this,i=arguments,o=void 0;return t(n).each(function(n){var r=t.isFunction(n)?n.apply(e,i):n;o=void 0===r?o:r}),o}})};var o;return i.patch=function(e){o=e.Model.extend;var n=function(t,e){var n=o.call(this,t,e),r=n.prototype.mixins;return r&&n.prototype.hasOwnProperty("mixins")&&i.mixin(n,r),n};t([e.Model,e.Collection,e.Router,e.View]).each(function(e){e.mixin=function(){i.mixin(this,t.toArray(arguments))},e.extend=n})},i.unpatch=function(e){t([e.Model,e.Collection,e.Router,e.View]).each(function(t){t.mixin=void 0,t.extend=o})},i}(window),window.Cocktail}.apply(e,i),!(void 0!==o&&(t.exports=o))},function(t,e,n){"use strict";var i=n(12),o=n(240);t.exports=function(){var t=function(){this._data={}};return t.prototype={_add:function(t,e){var n=this,r=n._data[t];r||(r=n._data[t]={});var a=r[e];if(a)return!1;if(r[e]=!0,n._maxItems){var s=i.keys(r);if(s.length>n._maxItems){s.sort(o.naturalComparator);var l=s.slice(0,-n._maxItems);l.forEach(function(e){n._remove(t,e)})}}return n._onItemAdded&&n._onItemAdded(t,e),!0},_remove:function(t,e){var n=this._data[t];if(!n)return!1;var o=n[e];return o?(delete n[e],0===i.keys(n).length&&delete this._data[t],this._onItemRemoved&&this._onItemRemoved(t,e),!0):!1},_contains:function(t,e){var n=this._data[t];return n?!!n[e]:!1},_count:function(){var t=i.keys(this._data);return i.reduce(t,function(t,e){var n=i.keys(this._data[e]);return t+n.length},0,this)},_getItemsOfType:function(t){var e=this._data[t];return e?Object.keys(e):[]},_marshall:function(){var t=this,e={},n=i.keys(t._data);return i.each(n,function(n){var o=[];i.each(i.keys(t._data[n]),function(t){o.push(t)}),e[n]=o}),e}},t}()},,function(t,e,n){"use strict";var i=n(6),o=n(5),r=n(80),a=n(242),s=n(243),l=n(244),u=n(16),c=n(2);t.exports=function(){function t(t){return r({username:t.login,size:128})}var e=i.ItemView.extend({template:s,modelEvents:{change:"render"},serializeData:function(){var e=this.model.toJSON();return e.blog&&(e.blogUrl=e.blog.match(/^https?:\/\//)?e.blog:"http://"+e.blog),e.inactive=e.invited||e.removed,e.avatarUrl=t(e),e}}),n=i.ItemView.extend({template:l,modelEvents:{change:"render"},events:{"click #button-onetoone":function(){this.parentPopover.hide();var t=this.model.get("login");u.trigger("navigation","/"+t,"chat",t,this.model.id)},"click #button-mention":function(){this.parentPopover.hide();var t=this.model.get("login");u.trigger("input.append","@"+t+" ")},"click #button-remove":function(){this.parentPopover.hide();var t=this.model.get("login");u.trigger("command.room.remove",t)}},serializeData:function(){var t=this.model.toJSON(),e=t.login!==c.user().get("username"),n=t.has_gitter_login&&e,i=e,o=e&&c().permissions.admin;return c.inOneToOneTroupeContext()&&c.troupe().get("user").username===t.login&&(n=!1),t.inactive=t.invited||t.removed,t.chatPrivately=n,t.mentionable=i,t.removable=o,t}}),h=a.extend({initialize:function(t){t.placement="horizontal",t.minHeight="88px";var i,r;this.model?(i=this.model.get("username"),r=this.model.get("displayName")):(i=t.username,r=t.displayName);var s=new o.Model({login:i,name:r});s.url="/private/gh/users/"+i,s.fetch(),t.footerView=new n({model:s}),a.prototype.initialize.apply(this,arguments),this.view=new e({model:s,userCollection:t.userCollection})}});return h}()},function(t,e,n){"use strict";var i=n(4),o=n(12),r=n(6),a=n(245);t.exports=function(){function t(t){var e=o.keys(t);o.each(e,function(e){var n=t[e];l[e]=n})}function e(){this._widgets=[]}function n(t,e,n,o){var r=new e(o.model);return r.render(),i(t).replaceWith(r.el),n.add(r),r}function s(t,o){if(!t)throw new Error("Cannot render the template since it's false, null or undefined.");var a;a="function"==typeof t?t:r.TemplateCache.get(t);var s=a(o),u=o._view;if(!o.renderViews||!u)return s;var c=i(i.parseHTML(s));c.addClass("view");var h=c.find("view"),d=u.widgetManager;return h.length&&!d&&(d=new e,u.widgetManager=d),h.each(function(){var t=this.getAttribute("data-id"),e=o.renderViews[t],i=l[e.widgetName];i&&n(this,i,d,e)}),c}var l={};e.prototype.add=function(t){this._widgets.push(t)},e.prototype.close=function(){o.each(this._widgets,function(t){t.close()}),this._widgets=[]};var u=r.Behavior.extend({initialize:function(){if(this.view.templateHelpers)throw new Error("Cannot use templateHelpers with Widgets");this.view.templateHelpers=function(){return{_view:this}}},onBeforeClose:function(){this.widgetManager&&(this.widgetManager.close(),this.widgetManager=null)}});return r.Renderer={render:s},a.register("Widgets",u),{register:t,Behavior:u}}()},function(t,e,n){"use strict";var i=n(4),o=n(127);t.exports=function(){return!function(t){var e=function(t,e){this.init("tooltip",t,e)};e.prototype={constructor:e,init:function(e,n,i){var r,a,s,l,u;for(this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.enabled=!o.isMobile,s=this.options.trigger.split(" "),u=s.length;u--;)l=s[u],"click"==l?this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this)):"manual"!=l&&(r="hover"==l?"mouseenter":"focus",a="hover"==l?"mouseleave":"blur",this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.onenter,this)),this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.onleave,this)));this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return e=t.extend({},t.fn[this.type].defaults,this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},onenter:function(t){this.enter(t.currentTarget)},enter:function(e){e=e||this.$element[0];var n,i=t.fn[this.type].defaults,o={};return this._options&&t.each(this._options,function(t,e){i[t]!=e&&(o[t]=e)},this),n=t(e)[this.type](o).data(this.type),n.hoverState="in",n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),void(this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show))):n.show()},onleave:function(t){this.leave(t.currentTarget)},leave:function(e){e=e||this.$element[0];var n=t(e)[this.type](this._options).data(this.type);if("in"===n.hoverState)return n.hoverState="out",this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?void(this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},show:function(){var n,i,o,r,a,s,l=t.Event("show");if(e.prev&&e.prev!==this&&e.prev.hide(),e.prev=this,this.hasContent()&&this.enabled){if(this.$element.trigger(l),l.isDefaultPrevented())return;n=this.tip(),this.setContent(),this.options.animation&&n.addClass("fade"),a="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,n.detach().css({top:0,left:0,display:"block"}),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element),i=this.getPosition(),o=n[0].offsetWidth,r=n[0].offsetHeight;var a=this.options.placement;"vertical"===a&&(a=this.selectBestVerticalPlacement(n,this.$element))}switch(a){case"bottom":s={top:i.top+i.height,left:i.left+i.width/2-o/2};break;case"top":s={top:i.top-r,left:i.left+i.width/2-o/2};break;case"left":s={top:i.top+i.height/2-r/2,left:i.left-o};break;case"right":s={top:i.top+i.height/2-r/2,left:i.left+i.width}}this.applyPlacement(s,a),this.$element.trigger("shown")},selectBestVerticalPlacement:function(t,e){var n=e[0].getBoundingClientRect();return n.top<60?"bottom":"top"},applyPlacement:function(t,e){var n,i,o,r,a=this.tip(),s=a[0].offsetWidth,l=a[0].offsetHeight;a.offset(t).addClass(e).addClass("in"),n=a[0].offsetWidth,i=a[0].offsetHeight,"top"==e&&i!=l&&(t.top=t.top+l-i,r=!0),"bottom"==e||"top"==e?(o=0,t.left<0&&(o=-2*t.left,t.left=0,a.offset(t),n=a[0].offsetWidth,i=a[0].offsetHeight),this.replaceArrow(o-s+n,n,"left")):this.replaceArrow(i-l,i,"top"),r&&a.offset(t)},replaceArrow:function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){function e(){var e=setTimeout(function(){n.off(t.support.transition.end).detach()},500);n.one(t.support.transition.end,function(){clearTimeout(e),n.detach()})}var n=this.tip(),i=t.Event("hide");return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?e():n.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},getTitle:function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},tip:function(){return this.$tip=this.$tip||t(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled
},toggle:function(e){var n=e?t(e.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var i=t(this),o=i.data("tooltip"),r="object"==typeof n&&n;o||i.data("tooltip",o=new e(this,r)),"string"==typeof n&&o[n]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(window.jQuery),i}()},function(t,e,n){"use strict";var i=n(2);t.exports=function(){function t(t,e){for(var n=e.shift();n;n=e.shift())t=t.replace("%s",n);return t}var e=i().locale;return function(n){var i=Array.prototype.slice.call(arguments,1),o=e&&e[n]||n;return t(o,i)}}()},function(t){"use strict";t.exports=function(){function t(){var t=document.createElement("div");t.className="scrollbar-measure",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e>0}var e,n=!1;return function(){return n?e:(n=!0,e=t())}}()},function(t,e,n){"use strict";var i=n(4),o=n(5),r=n(6),a=n(2),s=n(30),l=n(16),u=n(112),c=n(242),h=n(246),d=n(247),f=n(248);t.exports=function(){function t(){var t=a.troupe();return"REPO"===t.get("githubType")?t.get("uri"):""}function e(t,e){return new c({titleView:new m({model:t}),view:new p({model:t}),footerView:new g({model:t}),targetElement:e,placement:"horizontal"})}function n(t,e,n){var i=t+"/"+e,o=v[i];return o?void setTimeout(function(){n(o)},0):void s.priv.get("/issue-state",{q:i}).then(function(t){v[i]=t[0],setTimeout(function(){delete v[i]},6e4),n(t[0])})}var p=r.ItemView.extend({className:"issue-popover-body",template:h,modelEvents:{change:"render"},serializeData:function(){var t=this.model.toJSON();return t.date=u(t.created_at).format("LLL"),t}}),m=r.ItemView.extend({className:"issue-popover-title",modelEvents:{change:"render"},template:d}),g=r.ItemView.extend({className:"commit-popover-footer",template:f,events:{"click button.mention":"onMentionClick"},modelEvents:{change:"render"},onMentionClick:function(){var e=t(),n=this.model.get("repo"),i=this.model.get("number"),o=n===e?"#"+i:n+"#"+i;l.trigger("input.append",o),this.parentPopover.hide()}}),v={},y=o.Model.extend({idAttribute:"number",urlRoot:function(){var t=this.get("repo");return"/private/gh/repos/"+t+"/issues/"}}),w={decorate:function(o){var r=t();o.$el.find('*[data-link-type="issue"]').each(function(){function t(){var t=new y({repo:u,number:h,html_url:"https://github.com/"+u+"/issues/"+h});return t.fetch({data:{renderMarkdown:!0},error:function(){t.set({error:!0})}}),t}function a(n,i){i||(i=t());var r=e(i,n.target);r.show(),c.singleton(o,r)}function s(e){var n=t();c.hoverTimeout(e,function(){a(e,n)})}var l=i(this),u=l.data("issueRepo")||r,h=l.data("issue");n(u,h,function(t){l.hasClass("open")||l.hasClass("closed")||l.addClass(t)}),l.on("click",a),l.on("mouseover",s),o.once("close",function(){l.off("click",a),l.off("mouseover",s)})})}};return w}()},function(t,e,n){"use strict";var i=n(4),o=n(5),r=n(16),a=n(30),s=n(242),l=n(249),u=n(250),c=n(248),h=n(15);t.exports=function(){function t(t){if(1===t.split("/").length)return t.substring(0,d-1)+"";for(var e=t;e.length>d-2;){var n=e.split("/");1===n.length?n[0]=n[0].substring(0,d-3)+"":n.shift(),e=n.join("/")}return"/"+e}function e(t,e){return new s({titleView:new p({model:t}),view:new f({model:t}),footerView:new m({model:t}),targetElement:e,placement:"horizontal"})}function n(t,e,n){var i="/private/gh/repos/"+t+"/commits/"+e;a.get(i,{renderPatchIfSingle:!0}).then(function(t){n.set(t)}).fail(function(t){n.set("error",t.status)})}var d=40,f=o.View.extend({className:"commit-popover-body",initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){var e=this.model.toJSON();return e.author&&(e.date=h(e.commit.author.date).format("LLL"),e.files.forEach(function(e){e.filename.length>d&&(e.fullFilename=e.filename,e.filename=t(e.filename))}),1===e.files.length&&(e.isFileLengthSingular=!0,e.files[0].patch_html&&(e.firstPatchHtml=e.files[0].patch_html)),1===e.stats.additions&&(e.isAdditionsSingular=!0),1===e.stats.deletions&&(e.isDeletionsSingular=!0)),this.$el.html(l(e)),this}}),p=o.View.extend({className:"commit-popover-title",initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){var t=this.model.toJSON();return t.shortSha=t.sha.substring(0,7),this.$el.html(u(t)),this}}),m=o.View.extend({className:"commit-popover-footer",initialize:function(){this.listenTo(this.model,"change",this.render)},events:{"click button.mention":"onMentionClick"},render:function(){return this.$el.html(c(this.model.toJSON())),this},onMentionClick:function(){var t=this.model.get("repo")+"@"+this.model.get("sha").substring(0,7);r.trigger("input.append",t),this.parentPopover.hide()}}),g={decorate:function(t){t.$el.find('*[data-link-type="commit"]').each(function(){function r(i){n(u,c,h);var o=e(h,i.target);o.show(),s.singleton(t,o)}function a(i){n(u,c,h),s.hoverTimeout(i,function(){var n=e(h,i.target);n.show(),s.singleton(t,n)})}var l=i(this),u=l.data("commitRepo"),c=l.data("commitSha");if(u&&c){var h=new o.Model({repo:u,sha:c,html_url:"https://github.com/"+u+"/commit/"+c});l.on("click",r),l.on("mouseover",a),t.once("close",function(){l.off("click",r),l.off("mouseover",a)})}})}};return g}()},function(t,e,n){"use strict";var i=n(2),o=n(118),r=n(100);t.exports=function(){function t(t){var e=t.model.get("mentions"),n=i.user();if(e&&n){var o=i.user().get("username");o&&e.some(function(t){return t.userId===i.getUserId()})&&t.$el.find(".trpChatBox").addClass("mention")}}var e={decorate:function(e){function n(t){var n=r.get(t.target,"screenName");if(n){var i=new o({username:n,targetElement:t.target});i.show(),o.singleton(e,i)}}function i(t){o.hoverTimeout(t,function(){n(t)})}var a=e.$el.find(".mention");a.on("click",n),a.on("mouseover",i),e.once("close",function(){a.off("click",n),a.off("mouseover",i)}),t(e)}};return e}()},function(t,e,n){"use strict";var i=n(251),o=n(252);t.exports=function(){function t(t){var e=t.model;if(e.get("collapsed"))return void e.set("isCollapsible",!0);var n=!1;t.$el.find("a.link").each(function(r,a){0===a.childElementCount&&(a.innerText||a.textContent)===a.href&&o.parse(a.href,function(o){if(o&&o.html){n||(e.set("isCollapsible",!0),n=!0);var r;r="string"==typeof o.html?i(i.parseHTML(o.html,null,!0)):o.html;var s=i(document.createElement("div"));s.addClass("embed"),t.expandFunction&&t.expandFunction(s),o.maxWidth&&s.css({"max-width":o.maxWidth+"px"}),s.html(r),i(a).after(s),i.iframely.registerIframesIn(s)}})})}var e={decorate:function(e){t(e)}};return e}()},function(t){"use strict";t.exports=function(){return{panelWidthValue:"280px",menuSlideValue:"320px",hidePanelValue:"-280px",shiftedPanelValue:"-200px",shiftedMarginValue:"200px",isMobile:navigator.userAgent.match(/mobile/i)?!0:!1}}()},function(t,e,n){"use strict";var i=n(12),o=n(16);n(253),t.exports=function(){return{initialize:function(){var t;if(t=i.result(this,"keyboardEvents")){var e=this,n=/\s+/,r=function(t,n){i.isFunction(n)||(n=e[n]),n&&e.listenTo(o,"keyboard."+t,n,e)};i.each(t,function(t,e){if(n.test(e)){var o=e.split(n);i.each(o,function(e){r(e,t)})}else r(e,t)})}}}}()},function(t,e,n){"use strict";var i=(n(4),n(5)),o=(n(2),n(254)),r=n(44);t.exports=function(){var t=i.View.extend({events:{"click button.main":"onMainButtonClick"},initialize:function(t){this.chatCollectionView=t.chatCollectionView,this.listenTo(this.model,"change:unreadBelow",this.render)},render:function(){this.getUnreadCount()>0&&!this.chatCollectionView.isScrolledToBottom()?this.showBanner():this.hideBanner()},getUnreadCount:function(){return this.model.get("unreadBelow")},showBanner:function(){var t,e=this.$el,n=this.getUnreadCount();t=1===n?"1 unread message":n>99?"99+ unread messages":n+" unread messages",e.html(o({message:t})),e.parent().show(),setTimeout(function(){e.removeClass("slide-away")},0)},hideBanner:function(){var t=this.$el,e=this;t.addClass("slide-away"),setTimeout(function(){0===e.getUnreadCount()&&t.parent().hide()},500)},onMainButtonClick:function(){this.getUnreadCount()<1||this.chatCollectionView.scrollToFirstUnreadBelow()}}),e=t.extend({events:{"click button.main":"onMainButtonClick","click button.side":"onSideButtonClick"},initialize:function(t){this.chatCollectionView=t.chatCollectionView,this.listenTo(this.model,"change:unreadAbove",this.render)},render:function(){this.getUnreadCount()>0?this.showBanner():this.hideBanner()},getUnreadCount:function(){return this.model.get("unreadAbove")},onMainButtonClick:function(){this.getUnreadCount()<1||this.chatCollectionView.scrollToFirstUnread()},onSideButtonClick:function(){r.markAllRead()}});return{Top:e,Bottom:t}}()},function(t,e,n){"use strict";var i=n(4),o=n(6),r=n(2),a=n(255);t.exports=function(){return o.ItemView.extend({template:a,events:{"click button.main":"onMainButtonClick"},initialize:function(t){this.chatCollectionView=t.chatCollectionView,this.listenTo(this.chatCollectionView,"near.top.changed",function(t){this.nearTop=t,this.showHide()}),this.listenTo(this.collection,"limitReached",function(t){this.atLimit=t,this.showHide()})},showHide:function(){this.atLimit&&this.nearTop?this.showBanner():this.hideBanner()},showBanner:function(){if(!this.showing){this.showing=!0;var t=this.$el;i(document.body).addClass("banner-top"),t.parent().show(),clearTimeout(this.removeTimeout),setTimeout(function(){t.removeClass("slide-away")},0)}},hideBanner:function(){if(this.showing){this.showing=!1;var t=this.$el;t.addClass("slide-away"),i(document.body).removeClass("banner-top"),this.removeTimeout||(this.removeTimeout=setTimeout(function(){t.parent().hide()},500))}},onMainButtonClick:function(){window.open(r.env("billingUrl")+"/bill/"+r.troupe().get("uri"))}})}()},function(t,e,n){var i,o;i=[n(4)],o=function(t){/** @license jquery.transloadit2.js: Copyright (c) 2013 Transloadit Ltd | MIT License: http://www.opensource.org/licenses/mit-license.php
	 *
	 * Fork this on Github: http://github.com/transloadit/jquery-sdk
	 *
	 * Transloadit servers allow browsers to cache jquery.transloadit2.js for 1 hour.
	 * keep this in mind when rolling out fixes.
	 */
return function(t){function e(){}function n(t){a=[t]}function i(t,e,n){return t&&t.apply(e.context||e,n)}function o(t){return/\?/.test(t)?"&":"?"}function r(r){function f(t){J++||(K(),j&&(C[W]={s:[t]}),V&&(t=V.apply(r,[t])),i(O,r,[t,_,r]),i(H,r,[r,_]))}function L(t){J++||(K(),j&&t!=x&&(C[W]=t),i(P,r,[r,t]),i(H,r,[r,t]))}r=t.extend({},S,r);var A,R,N,$,B,O=r.success,P=r.error,H=r.complete,V=r.dataFilter,z=r.callbackParameter,F=r.callback,U=r.cache,j=r.pageCache,q=r.charset,W=r.url,Y=r.data,G=r.timeout,J=0,K=e;return T&&T(function(t){t.done(O).fail(P),O=t.resolve,P=t.reject}).promise(r),r.abort=function(){!J++&&K()},i(r.beforeSend,r,[r])===!1||J?r:(W=W||u,Y=Y?"string"==typeof Y?Y:t.param(Y,r.traditional):u,W+=Y?o(W)+Y:u,z&&(W+=o(W)+encodeURIComponent(z)+"=?"),!U&&!j&&(W+=o(W)+"_"+(new Date).getTime()+"="),W=W.replace(/=\?(&|$)/,"="+F+"$1"),j&&(A=C[W])?A.s?f(A.s[0]):L(A):(k[F]=n,N=t(b)[0],N.id=d+E++,q&&(N[l]=q),D&&D.version()<11.6?($=t(b)[0]).text="document.getElementById('"+N.id+"')."+m+"()":N[s]=s,I&&(N.htmlFor=N.id,N.event=p),N[g]=N[m]=N[v]=function(t){if(!N[y]||!/i/.test(N[y])){try{N[p]&&N[p]()}catch(e){}t=a,a=0,t?f(t[0]):L(c)}},N.src=W,K=function(){B&&clearTimeout(B),N[v]=N[g]=N[m]=null,M[w](N),$&&M[w]($)},M[h](N,R=M.firstChild),$&&M[h]($,R),B=G>0&&setTimeout(function(){L(x)},G)),r)}var a,s="async",l="charset",u="",c="error",h="insertBefore",d="_jqjsp",f="on",p=f+"click",m=f+c,g=f+"load",v=f+"readystatechange",y="readyState",w="removeChild",b="<script>",_="success",x="timeout",k=window,T=t.Deferred,M=t("head")[0]||document.documentElement,C={},E=0,S={callback:d,url:location.href},D=k.opera,I=!!t("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;r.setup=function(e){t.extend(S,e)},t.jsonp=r}(t),!function(t){function e(){this.assemblyId=null,this.instance=null,this.documentTitle=null,this.timer=null,this._options={},this.uploads=[],this.results={},this.ended=null,this.pollStarted=null,this.pollRetries=0,this.seq=0,this.started=!1,this.assembly=null,this.params=null,this.bytesReceivedBefore=0,this.lastPoll=0,this.$params=null,this.$form=null,this.$files=null,this.$fileClones=null,this.$iframe=null,this._lastMSecs=0,this._lastNSecs=0,this._clockseq=0}var n="https:"==document.location.protocol?"https://":"http://",i=n+"api2.transloadit.com/",o={service:i,assets:n+"assets.transloadit.com/",onFileSelect:function(){},onStart:function(){},onProgress:function(){},onUpload:function(){},onResult:function(){},onCancel:function(){},onError:function(){},onSuccess:function(){},interval:2500,pollTimeout:8e3,poll404Retries:15,pollConnectionRetries:3,wait:!1,processZeroFiles:!0,triggerUploadOnFileSelection:!1,autoSubmit:!0,exclude:"",fields:!1,params:null,signature:null,region:"us-east-1",debug:!0};t.fn.transloadit=function(){var n,i,o,r=Array.prototype.slice.call(arguments);if(0!==this.length){if(this.length>1)return void this.each(function(){t.fn.transloadit.apply(t(this),r)});if((1==r.length&&"object"==typeof r[0]||void 0===r[0])&&r.unshift("init"),n=r.shift(),"init"==n?(i=new e,r.unshift(this),this.data("transloadit.uploader",i)):i=this.data("transloadit.uploader"),!i)throw new Error("Element is not initialized for transloadit!");return o=i[n].apply(i,r),void 0===o?this:o}},e.prototype.init=function(e,n){this.$form=e,this.options(t.extend({},o,n||{}));var i=this;e.bind("submit.transloadit",function(){return i.validate(),i.detectFileInputs(),i.checkFileTypes(),i._options.processZeroFiles||0!==i.$files.length?i.getBoredInstance():i.submitForm(),!1}),this._options.triggerUploadOnFileSelection&&e.on("change",'input[type="file"]',function(){e.trigger("submit.transloadit")}),e.on("change",'input[type="file"]',function(){i._options.onFileSelect(t(this).val(),t(this))})},e.prototype.getBoredInstance=function(){function e(){t.jsonp({url:r,timeout:o._options.pollTimeout,callbackParameter:"callback",success:function(t){return t.error?(o.ended=!0,t.url=r,void o._options.onError(t)):(o.instance=t.api2_host,void o.start())},error:function(t,s){if(a&&o._options.service===i&&"https://"!==n)return a=!1,void o._findBoredInstanceUrl(function(t,i){return t?(o.ended=!0,t={error:"BORED_INSTANCE_ERROR",message:"Could not find a bored instance. "+t.message},void o._options.onError(t)):(r=n+"api2."+i+"/instances/bored",void e())});o.ended=!0;var l={error:"CONNECTION_ERROR",message:"There was a problem connecting to the upload server",reason:"JSONP request status: "+s,url:r};o._options.onError(l)}})}var o=this;this.instance=null;var r=this._options.service+"instances/bored",a=!0;e()},e.prototype._findBoredInstanceUrl=function(e){var n=this,i="http://infra-"+this._options.region+".transloadit.com.s3.amazonaws.com/cached_instances.json";t.ajax({url:i,datatype:"json",timeout:3e3,success:function(t){var i=n._shuffle(t.uploaders);n._findResponsiveInstance(i,0,e)},error:function(){var t=new Error("Could not query S3 for cached uploaders");e(t)}})},e.prototype._findResponsiveInstance=function(e,i,o){if(!e[i]){var r=new Error("No responsive uploaders");return o(r)}var a=this,s=e[i];t.jsonp({url:n+s,timeout:3e3,callbackParameter:"callback",success:function(){o(null,s)},error:function(){a._findResponsiveInstance(e,i+1,o)}})},e.prototype._shuffle=function(t){for(var e,n=[],i=0;i<t.length;i++)e=Math.floor(Math.random()*(i+1)),n[i]=n[e],n[e]=t[i];return n},e.prototype.start=function(){var e=this;this.started=!1,this.ended=!1,this.bytesReceivedBefore=0,this.pollRetries=0,this.seq=0,this.uploads=[],this.results={},this.assemblyId=this._genUuid(),this.$fileClones=t().not(document),this.$files.each(function(){var n=t(this).clone(!0);e.$fileClones=e.$fileClones.add(n),n.insertAfter(this)}),this.$iframe=t('<iframe id="transloadit-'+this.assemblyId+'" name="transloadit-'+this.assemblyId+'"/>').appendTo("body").hide();var i=n+this.instance+"/assemblies/"+this.assemblyId+"?redirect=false";if(this._options.formData){this._options.formData.append("params",this.$form.find("input[name=params]").val());var o=new XMLHttpRequest;o.open("POST",i),o.send(this._options.formData)}else{this.$uploadForm=t('<form enctype="multipart/form-data" />').attr("action",i).attr("target","transloadit-"+this.assemblyId).attr("method","POST").append(this.$files).appendTo("body").hide();var r="[name=params], [name=signature]";this._options.fields===!0?r="*":"string"==typeof this._options.fields&&(r+=", "+this._options.fields);var a=this.$form.find(":input[type!=file]").filter(r),s=a.filter("select");a=a.filter(function(){return!t(this).is("select")}),a=a.filter("[type!=submit]");var l=this.clone(a);if(this._options.params&&!this.$params&&(l=l.add('<input name="params" value=\''+JSON.stringify(this._options.params)+"'>")),this._options.signature&&(l=l.add('<input name="signature" value=\''+this._options.signature+"'>")),"object"==typeof this._options.fields)for(var u in this._options.fields){var c=this._options.fields[u];l=l.add('<input name="'+u+"\" value='"+c+"'>")}l.prependTo(this.$uploadForm),s.each(function(){t('<input type="hidden"/>').attr("name",t(this).attr("name")).attr("value",t(this).val()).prependTo(e.$uploadForm)}),this.$uploadForm.submit()}this.lastPoll=+new Date,setTimeout(function(){e._poll()},300)},e.prototype.clone=function(e){for(var n=e.clone(),i=e.filter("textarea"),o=n.filter("textarea"),r=0;r<i.length;++r)t(o[r]).val(t(i[r]).val());return n},e.prototype.checkFileTypes=function(){function e(t){return/image\/jpg/g.test(t)&&!/image\/jpeg/g.test(t)&&(t+=",image/jpeg"),/image\/jpeg/g.test(t)&&!/image\/jpg/g.test(t)&&(t+=",image/jpg"),-1!==t.indexOf("video/*")&&(t=t.replace(/video\/\*/g,"video/mp4,video/flv,video/avi,video/mpg,video/mov,video/wmv,video/h264,video/mkv,video/ogv")),-1!==t.indexOf("image/*")&&(t=t.replace(/image\/\*/g,"image/png,image/jpeg,image/gif,image/jpg,image/ico")),-1!==t.indexOf("audio/*")&&(t=t.replace(/audio\/\*/g,"audio/aac,audio/mp3,audio/flac,audio/m4a,audio/mmf,audio/3gp,audio/mp4,audio/mpeg,audio/ogg,audio/wav,audio/webm")),t.split(",")}var n=this;this.$files=this.$files.filter(function(){var i=t(this).attr("accept");if(!i)return!0;i=e(i);for(var o=this.value.split(".").pop().toLowerCase(),r=0;r<i.length;r++)if(o==i[r].split("/")[1])return!0;var a={error:"INVALID_FILE_TYPE",message:"Sorry, we don't accept "+o+" files.",reason:"Invalid file selected"};return n._options.onError(a),!1})},e.prototype.detectFileInputs=function(){var t=this.$form.find("input[type=file]").not(this._options.exclude);this._options.processZeroFiles||(t=t.filter(function(){return""!==this.value})),this.$files=t},e.prototype.validate=function(){if(this._options.params)this.params=this._options.params;else{var t=this.$form.find("input[name=params]");if(!t.length)return void alert("Could not find input[name=params] in your form.");this.$params=t;try{this.params=JSON.parse(t.val())}catch(e){return void alert("Error: input[name=params] seems to contain invalid JSON.")}}if(this.params.redirect_url)this.$form.attr("action",this.params.redirect_url);else if(this._options.autoSubmit&&this.$form.attr("action")==this._options.service+"assemblies")return void alert("Error: input[name=params] does not include a redirect_url")},e.prototype._poll=function(e){var i=this;if(!this.ended){var o=/(mozilla)(?:.*? rv:([\w.]+))?/.exec(navigator.userAgent),r=o&&o[1];this.documentTitle=document.title,r&&!this.documentTitle&&(document.title="Loading..."),this.pollStarted=+new Date;var a=n+this.instance+"/assemblies/"+this.assemblyId+(e||"?seq="+this.seq);t.jsonp({url:a,timeout:i._options.pollTimeout,callbackParameter:"callback",success:function(t){if(!i.ended){if(i.assembly=t,"ASSEMBLY_NOT_FOUND"==t.error)return i.pollRetries++,i.pollRetries>i._options.poll404Retries?(document.title=i.documentTitle,i.ended=!0,void i._options.onError(t)):void setTimeout(function(){i._poll()},400);if(t.error)return i.ended=!0,document.title=i.documentTitle,void i._options.onError(t);i.seq=t.last_seq,i.started||(i.started=!0,i._options.onStart(t)),i.pollRetries=0;var e=("ASSEMBLY_UPLOADING"===t.ok,"ASSEMBLY_EXECUTING"===t.ok),n="ASSEMBLY_CANCELED"===t.ok,o="ASSEMBLY_COMPLETED"===t.ok;i._options.onProgress(t.bytes_received,t.bytes_expected,t);for(var r=0;r<t.uploads.length;r++)i._options.onUpload(t.uploads[r],t),i.uploads.push(t.uploads[r]);for(var a in t.results){i.results[a]=i.results[a]||[];for(var s=0;s<t.results[a].length;s++)i._options.onResult(a,t.results[a][s],t),i.results[a].push(t.results[a][s])}if(n)return i.ended=!0,document.title=i.documentTitle,void i._options.onCancel(t);if(o||!i._options.wait&&e)return i.ended=!0,document.title=i.documentTitle,t.uploads=i.uploads,t.results=i.results,i._options.onSuccess(t),void i.submitForm();var l=i.pollStarted-+new Date,u=l<i._options.interval?i._options.interval:l;i.timer=setTimeout(function(){i._poll()},u),i.lastPoll=+new Date}},error:function(t,e){if(!i.ended){if(i.pollRetries++,i.pollRetries>i._options.pollConnectionRetries){document.title=i.documentTitle,i.ended=!0;var n={error:"CONNECTION_ERROR",message:"There was a problem connecting to the upload server",reason:"JSONP request status: "+e,url:a};return void i._options.onError(n)}setTimeout(function(){i._poll()},350)}}})}},e.prototype.stop=function(){document.title=this.documentTitle,this.ended=!0},e.prototype.cancel=function(){if(!this.ended){var e=this;this.$params&&this.$params.prependTo(this.$form),this.$fileClones.each(function(n){var i=t(e.$files[n]).clone(!0),o=t(this);i.insertAfter(o),o.remove()}),clearTimeout(e.timer),this._poll("?method=delete"),"Microsoft Internet Explorer"==navigator.appName&&this.$iframe[0].contentWindow.document.execCommand("Stop"),setTimeout(function(){e.$iframe.remove()},500)}},e.prototype.submitForm=function(){null!==this.assembly&&t("<textarea/>").attr("name","transloadit").text(JSON.stringify(this.assembly)).prependTo(this.$form).hide(),this._options.autoSubmit&&this.$form.unbind("submit.transloadit").submit()},e.prototype.getUTCDatetime=function(){var t=new Date,e=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()),n=function(t){return 10>t?"0"+t:t},i=e.getTimezoneOffset(),o=(i>0?"-":"+")+n(parseInt(i/60,10));return i%60!==0&&(o+=n(i%60)),0===i&&(o="Z"),e.getFullYear()+"-"+n(e.getMonth()+1)+"-"+n(e.getDate())+"T"+n(e.getHours())+":"+n(e.getMinutes())+":"+n(e.getSeconds())+o},e.prototype._genUuid=function(t,e,n){function i(t,e){var n=e||0,i=h;return i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]}t=t||{};var o=e&&n||0,r=e||[],a=new Array(16),s=function(){for(var t,e=0;16>e;e++)0===(3&e)&&(t=4294967296*Math.random()),a[e]=t>>>((3&e)<<3)&255;return a},l=s(),u=[1|l[0],l[1],l[2],l[3],l[4],l[5]];this._clockseq=16383&(l[6]<<8|l[7]);for(var c=null!=t.clockseq?t.clockseq:this._clockseq,h=[],d={},f=0;256>f;f++)h[f]=(f+256).toString(16).substr(1),d[h[f]]=f;var p=null!=t.msecs?t.msecs:(new Date).getTime(),m=null!=t.nsecs?t.nsecs:this._lastNSecs+1,g=p-this._lastMSecs+(m-this._lastNSecs)/1e4;if(0>g&&null==t.clockseq&&(c=c+1&16383),(0>g||p>this._lastMSecs)&&null==t.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");this._lastMSecs=p,this._lastNSecs=m,this._clockseq=c,p+=122192928e5;var v=(1e4*(268435455&p)+m)%4294967296;r[o++]=v>>>24&255,r[o++]=v>>>16&255,r[o++]=v>>>8&255,r[o++]=255&v;var y=p/4294967296*1e4&268435455;r[o++]=y>>>8&255,r[o++]=255&y,r[o++]=y>>>24&15|16,r[o++]=y>>>16&255,r[o++]=c>>>8|128,r[o++]=255&c;for(var w=t.node||u,b=0;6>b;b++)r[o+b]=w[b];return e?e:i(r)},e.prototype.options=function(e){return 0===arguments.length?this._options:void t.extend(this._options,e)},e.prototype.option=function(t,e){return 1==arguments.length?this._options[t]:void(this._options[t]=e)}}(t),t}.apply(e,i),!(void 0!==o&&(t.exports=o))},,function(t,e,n){"use strict";var i=n(4),o=n(12),r=n(5),a=n(6),s=n(256),l=n(257),u=n(3),c=n(258);n(79),t.exports=function(){var t={},e=window._troupeCompactView=c(),n=-1!==window.navigator.userAgent.indexOf("MSIE 9.0"),h=navigator.userAgent.match(/(iPad)/);return e&&i("body").addClass("trpCompactView"),window._troupeIsIE9=n,h&&(window._troupeIsTablet=!0),t.Modal=a.ItemView.extend({template:s,className:"modal",events:{"click .button":"onMenuItemClicked"},initialize:function(t){this.options={keyboard:!0,backdrop:!0,fade:!0,autoRemove:!0,menuItems:[],disableClose:!1,hideHeader:!1,title:null,navigable:!1},o.bindAll(this,"hide","onMenuItemClicked"),o.extend(this.options,t),this.view=this.options.view||this.view},serializeData:function(){var t=this.menuItems||this.options.menuItems;return{hideHeader:this.options.hideHeader,customTitle:!!this.options.title,title:this.options.title,hasMenuItems:!!t.length,menuItems:t,disableClose:this.options.disableClose}},onMenuItemClicked:function(t){t.preventDefault();var e=i(t.target).attr("data-action");this.view.trigger("menuItemClicked",e),this.trigger("menuItemClicked",e)},onRender:function(){var t=this;this.$el.hide();var n=this.$el.find(".modal-body");n.append(this.view.render().el),this.$el.find(".close").on("click",this.hide),e||this.disableAutoFocus||window.setTimeout(function(){try{var e=t.$el.find("input[type=text], input[type=url], input[type=tel], input[type=number], input[type=color], input[type=email]")[0];e&&(e.focus(),e.select())}catch(n){}},100)},setButtonState:function(t,e){var n=this.$el.find(".modal-footer button[data-action="+t+"]");e?n.removeAttr("disabled"):n.attr("disabled",!0)},hideActions:function(){var t=this.$el.find(".modal-footer .action");t.hide()},showActions:function(){var t=this.$el.find(".modal-footer .action");t.show()},showPremium:function(){var t=this.$el.find(".modal-footer .premium");t.removeClass("hidden"),t.show()},hidePremium:function(){var t=this.$el.find(".modal-footer .premium");t.addClass("hidden"),t.hide()},onClose:function(){this.view.close(),this.view.dialog=null,this.$el.find(".close").off("click")},prepare:function(){this.rendered||(this.render(),this.rendered=!0)},setTitle:function(t){this.options.title=t,this.$el.find(".trpModalTitleHeader").text(t)},supportsModelReplacement:function(){return this.view&&this.view.supportsModelReplacement&&this.view.supportsModelReplacement()},replaceModel:function(t){return this.view.replaceModel(t)},show:function(){this.view.dialog=this;var t=this;this.isShown||(this.prepare(),i("body").addClass("modal-open"),this.isShown=!0,this.$el.trigger("show"),this.trigger("show"),this.escape(),this.backdrop(function(){var e=i.support.transition&&t.$el.hasClass("fade");if(t.$el.parent().length||t.$el.appendTo(document.body),t.$el.show(),e){var n=t.$el[0].offsetWidth;n++}t.$el.addClass("in"),e?t.$el.one(i.support.transition.end,function(){t.$el.trigger("shown"),t.trigger("shown")}):(t.$el.trigger("shown"),t.trigger("shown"))}))},hide:function(t){return t&&t.preventDefault(),this.navigable?void(window.location="#"):void this.hideInternal()},navigationalHide:function(){this.options.fade=!1,this.hideInternal()},hideInternal:function(){this.isShown&&(this.isShown=!1,i("body").removeClass("modal-open"),this.escape(),this.$el.trigger("hide").removeClass("in"),this.trigger("hide"),i.support.transition&&this.options.fade?this.hideWithTransition(this):this.hideModal())},transitionTo:function(t){t.options.backdrop=!1;var e=this.$backdrop;this.$backdrop=null,this.hide(),e.modal=t,t.show(),t.$backdrop=e},hideWithTransition:function(){var t=this,e=setTimeout(function(){t.$el.off(i.support.transition.end),t.hideModal()},500);this.$el.one(i.support.transition.end,function(){clearTimeout(e),t.hideModal()})},hideModal:function(){this.$el.hide().trigger("hidden"),this.trigger("hidden"),this.backdrop(),this.options.autoRemove&&this.close()},backdrop:function(t){var e=this.options.fade?"fade":"";if(this.isShown&&this.options.backdrop){var n=i.support.transition&&e;if(this.$backdrop=i('<div class="modal-backdrop '+e+'" />').appendTo(document.body),"static"!=this.options.backdrop&&!this.options.disableClose){var o=this.$backdrop;this.$backdrop.click(function(){o.modal.hide()})}if(this.$backdrop.modal=this,n){var r=this.$backdrop[0].offsetWidth;r++}this.$backdrop.addClass("in"),n?this.$backdrop.one(i.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),i.support.transition&&this.options.fade?this.$backdrop.one(i.support.transition.end,i.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},escape:function(){function t(t){27==t.which&&e.hide()}if(!this.options.disableClose){var e=this;this.isShown&&this.options.keyboard?i(document).on("keydown",t):this.isShown||i(document).off("keydown",t)}}}),t.Modal.wrapView=function(e,n){var i=t.Modal.extend(n);return i.prototype.initialize=function(n){n=n||{},t.Modal.prototype.initialize.apply(this,arguments),this.view=new e(n)},i},t.SortableMarionetteView={initialize:function(){this.listenTo(this,"before:render",this.onBeforeRenderSort),this.listenTo(this,"render",this.onRenderSort)},onBeforeRenderSort:function(){this.isRendering=!0,this.footerElement=this.footer?this.$el.children(this.footer)[0]:null},onRenderSort:function(){delete this.isRendering},appendHtml:function(t,e,n){function o(e){for(var n=1,i=r(e+1);!i&&e+n+1<t.collection.length;)n+=1,i=r(e+n);return i}function r(e){if(!(e>=t.collection.length)){var n=t.children.findByModel(t.collection.at(e));return n}}var a=this.footerElement,s=t.itemViewContainer||t.el,l=t.itemViewContainer?i(t.itemViewContainer):t.$el;if(this.isRendering)return void(a?e.$el.insertBefore(a):l.append(e.el));var c;return 0===n?(c=o(0),void(c?e.$el.insertBefore(c.el):a?e.$el.insertBefore(a):e.$el.appendTo(s))):n==t.collection.length-1?void(a?e.$el.insertBefore(a):e.$el.appendTo(s)):(c=r(n-1),void(c?e.$el.insertAfter(c.$el):(c=o(n),c?e.$el.insertBefore(c.el):(u.info("Inserting *after* the bottom for collection ",t.collection.url,c,e),a?e.$el.insertBefore(a):e.$el.appendTo(s)))))}},t.LoadingView=a.ItemView.extend({template:l}),t.LoadingCollectionMixin={loadingView:t.LoadingView,initialize:function(){this.showEmptyView=this.showLoadingView},showLoadingView:function(){if(this.collection.loading){var t=a.getOption(this,"loadingView");this.loadingModel||(this.loadingModel=new r.Model);var e=this.children.findByModel(this.loadingModel);return t&&!e&&(this.addItemView(this.loadingModel,t,0),this.listenToOnce(this.collection,"loaded",function(){return this.removeItemView(this.loadingModel),0===this.collection.length?(this.constructor.prototype.showEmptyView.call(this),!0):void 0})),!0}return this.constructor.prototype.showEmptyView.call(this),!0}},t.DelayedShowLayoutMixin={show:function(t,e){var n=e.collection,i=this;return n.hasLoaded&&!n.hasLoaded()?void n.once("sync reset",function(){i[t].show(e)}):void i[t].show(e)}},t}()},function(t,e,n){"use strict";var i=n(259);t.exports=function(){switch(i()){case"Mac":return{cmd:"",room:"ctrl",gitter:"ctrl"};case"Windows":return{cmd:"ctrl",room:"",gitter:""};default:return{cmd:"ctrl",room:"",gitter:"alt"}}}()},,function(t,e,n){var i,o;!function(r){function a(t){for(var e,n=document.createNodeIterator(t,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,function(t){return 1!==t.nodeType?NodeFilter.FILTER_ACCEPT:"A"===t.tagName?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP},!1);null!==(e=n.nextNode());){var i=/\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>'"]+|\(([^\s()<>'"]+|(\([^\s()<>'"]+\)))*\))+(?:\(([^\s()<>'"]+|(\([^\s()<>'"]+\)))*\)|[^\s`!()\[\]{};:.,<>?'"]))/i,o=i.exec(e.data);if(o){var r=o[0],a=document.createElement("a");a.setAttribute("target","_blank"),a.setAttribute("rel","nofollow"),a.textContent=r,r.match(/^https?:\/\//)?a.setAttribute("href",r):a.setAttribute("href","http://"+r);var s=e.splitText(o.index);s.nodeValue=s.nodeValue.substr(r.length),e.parentNode.insertBefore(a,s),n.nextNode()}}}return r.autolink=a,!0&&n(90)&&(i=[],o=function(){return a}.apply(e,i),!(void 0!==o&&(t.exports=o))),a}(window)},function(t,e,n){"use strict";var i=n(4),o=n(12),r=n(6),a=n(133),s=n(115),l=n(286),u=n(270),c=n(314),h=n(100);t.exports=function(){function t(t){for(var e=0;t&&t!=document;){var n=window.getComputedStyle(t,null);if(n){var i=n.getPropertyValue("z-index");i&&"auto"!==i&&(i=parseInt(i,10),i>e&&(e=i))}t=t.parentNode}return e}var e=160,n=".dropdown-backdrop",d=r.ItemView.extend({tagName:"li",template:c,initialize:function(t){t&&t.template&&(this.template=t.template)},className:function(){return this.model.get("divider")?"divider":""},onRender:function(){var t=this.model.get("dataset");if(t){var e=this.el.querySelector("a");e&&Object.keys(t).forEach(function(n){h.set(e,n,t[n])})}h.set(this.el,"cid",this.model.cid)}}),f=null,p={placement:"left"},m=r.CollectionView.extend({itemView:d,tagName:"ul",className:"dropdown dropdown-hidden selectable",ui:{menu:"ul.dropdown"},events:{keydown:"keydown","click li a":"clicked"},itemViewOptions:function(){var t={};return this.options.itemTemplate&&(t.template=this.options.itemTemplate),t},initialize:function(t){this.targetElement=t.targetElement,this.$targetElement=i(this.targetElement),this.options=o.extend({},p,t),this.listenTo(this,"selectClicked",function(){this.hide()})},active:function(){return!this.$el.hasClass("dropdown-hidden")},onRender:function(){var e=t(this.targetElement)+5;100>e&&(e=100),this.el.style.zIndex=e},onClose:function(){this.mutant&&this.mutant.disconnect()},clicked:function(){this.collection||this.hide()},getPosition:function(){var t=this.targetElement,e=o.extend({},t.getBoundingClientRect(),this.$targetElement.offset());return e},hasItems:function(){return this.collection?this.collection.length>0:!0},onAfterItemAdded:function(){setTimeout(function(){!this.active()&&this.showWhenItems&&this.hasItems()&&this.show()}.bind(this),10)},onItemRemoved:function(){setTimeout(function(){this.hasItems()||(this.hide(),this.showWhenItems=!0)}.bind(this),10)},show:function(){if(!this.active()){if(!this.hasItems())return void(this.showWhenItems=!0);var t=this.render().$el,e=this.el;i(n).remove(),f&&f.hide(),f=this;var o=parseInt(this.el.style.zIndex,10);i('<div class="dropdown-backdrop"/>').css({zIndex:o-1}).insertAfter(i("body")).on("click",function(){if(i(n).remove(),f){var t=f;f=null,t.hide()}}),this.setActive(this.selectedModel),t.detach().css({top:0,left:0,display:"block"}),t.appendTo(i("body")),this.reposition(),t.removeClass("dropdown-hidden"),this.mutant||(this.mutant=new l(e,this.mutationReposition,{scope:this,timeout:20,transitions:!0,observers:{attributes:!0,characterData:!0}}))}},hide:function(){var t=this.$el;this.showWhenItems=!1,this.active()&&(t.addClass("dropdown-hidden"),i(n).remove(),window.setTimeout(function(){t.css({display:"none"})},e),f=null)},mutationReposition:function(){try{if(!this.active())return;this.reposition()}finally{this.mutant&&this.mutant.takeRecords()}},reposition:function(){var t,e=this.el,n=this.getPosition(),i=e.offsetWidth;t="left"===this.options.placement?n.left:n.left-i+n.width;var o={top:n.top+n.height,left:t};this.applyPlacement(o)},applyPlacement:function(t){var e,n,i,o=this.$el,r=o[0],a=0;"left"in t&&t.left<0&&(a=-2*t.left,t.left=0),o.css(t),e=r.offsetWidth,n=r.offsetHeight,i&&o.offset(t)},toggle:function(){var t=this.active();t?this.hide():this.show()},keydown:function(t){switch(t.keyCode){case 13:return void this.selected();case 27:this.hide();break;default:return}t.preventDefault(),t.stopPropagation()}});return s.mixin(m,a.SortableMarionetteView,u),m}()},function(t,e,n){"use strict";var i=n(4),o=n(30),r=n(2),a=n(16),s=n(154),l=n(80),u=n(5),c=n(6),h=n(12),d=n(115),f=n(35),p=n(261),m=n(289),g=n(290),v=n(291),y=n(292),w=n(293),b=n(262),_=n(128);n(119),n(263),t.exports=function(){var t=c.ItemView.extend({className:"result-empty",template:v}),e=c.ItemView.extend({className:"result-empty",events:{"click .js-create-room":"showCreateRoomModal"},showCreateRoomModal:function(){parent.location.hash="#createroom"},template:y}),n=c.ItemView.extend({events:{click:"handleSelect"},modelEvents:{select:"handleSelect","change:selected":"toggleSelected"},template:g,className:"result",initialize:function(){this.toggleSelected()},toggleSelected:function(){var t=this.model.get("selected");this.$el.toggleClass("selected",!!t)},handleSelect:function(){a.trigger("track-event","search_result_selected"),this.selectItem()}}),x=n.extend({serializeData:function(){var t={},e=this.model.get("url").replace(/^\//,"");return t.selected=this.model.get("selected"),t.detail=this.model.get("githubType"),t.text=e,t.avatarUrl=l({username:e.split("/")[0],size:50}),t},selectItem:function(){this.model.get("exists")?a.trigger("navigation",this.model.get("url"),"chat",this.model.get("uri"),null):parent.location.hash="#confirm/"+this.model.get("uri")}}),k=n.extend({className:"result result-upgrade",template:w,getOrgName:function(t){return t.get("oneToOne")?!1:t.get("uri").split("/")[0]},serializeData:function(){var t,e=this.getOrgName(r.troupe());return t=e?r.env("billingUrl")+"/orgs/"+e:r.env("billingUrl"),{billingUrl:t,orgName:e}},selectItem:function(){}}),T=n.extend({behaviors:{Widgets:{},Highlight:{}},serializeData:function(){var t=this.model,e=t.get("fromUser"),n=e&&e.username||"",i=t.get("sent");return{selected:t.get("selected"),detail:n,sent:i,text:t.get("text"),avatarUrl:e&&e.avatarUrlSmall}},selectItem:function(){var t=this.model.get("id");f.chats.ensureLoaded(t,function(){a.trigger("chatCollectionView:selectedChat",t,{highlights:this.model.get("highlights")})},this)}}),M=c.CollectionView.extend({itemView:x,emptyView:e,initialize:function(){var t=document.querySelector("#search-results");this.rollers=new s(t,this.el,{doNotTrack:!0})},scrollTo:function(t){this.rollers.scrollToElement(t.el,{centre:!0})}}),C=c.CollectionView.extend({emptyView:t,initialize:function(){var t=document.querySelector("#search-results");this.rollers=new s(t,this.el,{doNotTrack:!0})},getItemView:function(t){return t.get("limitReached")?k:T},scrollTo:function(t){this.rollers.scrollToElement(t.el,{centre:!0})}}),E=c.Controller.extend({initialize:function(t){this.collection=t.collection,this.listenTo(this.collection,"add remove reset sync",this.reset)},swap:function(t){t&&(this.selected&&this.selected.set("selected",!1),t.set("selected",!0),this.selected=t)},next:function(){var t=this.collection,e=t.indexOf(this.selected);e<t.length-1&&this.swap(t.at(e+1))},prev:function(){var t=this.collection,e=t.indexOf(this.selected);e>0&&this.swap(t.at(e-1))},current:function(){return this.selected},reset:function(){this.swap(this.collection.at(0))}}),S=c.Controller.extend({initialize:function(){this.cache=new u.Collection([]),this.messages=new p.ChatSearchCollection([],{}),this.cache.comparator=function(t){return-(t.get("boost")+Date.parse(t.get("lastAccessTime")).toString())}},fetchLocalRooms:function(){var t=i.Deferred();return a.triggerParent("troupeRequest",{}),a.once("troupesResponse",t.resolve),t},fetchMessages:function(t){var e=i.Deferred(),n=this.messages,o=t.query,r=this;return n.reset(),n.fetchSearch(o,function(t){if(t)return a.trigger("track-event","search_messages_failed"),e.reject(t);var i=n.models.map(function(t){return t.set("priority",3),t});r.trigger("loaded:messages",i,o),e.resolve()},this),e},fetchRooms:function(t){var e=i.Deferred(),n=t.query,r="undefined"==typeof t.limit?3:t.limit,s=o.get("/v1/user",{q:n,limit:r,type:"gitter"}),l=o.user.get("/repos",{q:n,limit:r}),c=o.get("/v1/rooms",{q:n,limit:r});return i.when(s,l,c).done(function(t,i,o){t[0].results.map(function(t){t.exists=!0}),o[0].results.map(function(t){t.exists=!0});var r=[t,i,o].map(function(t){return t[0].results}).reduce(function(t,e){return t.concat(e)},[]).map(function(t){return t?(t.room&&(t.id=t.room.id),t.url=t.url||"/"+t.uri,t.priority=1,t.query=n,new u.Model(t)):void 0}).filter(this.notCurrentRoom);this.trigger("loaded:rooms",r,n),e.resolve(r)}.bind(this)).fail(function(t){a.trigger("track-event","search_rooms_failed"),e.reject(t)}),e},notCurrentRoom:function(t){return t.id!==r.getTroupeId()},formatRooms:function(t){return t.filter(this.notCurrentRoom).map(function(t){return t.exists=!0,t.priority=t.githubType.match(/^ORG$/)?0:1,t.boost=t.githubType.match(/^ORG$/)?1:0,t})},cacheRooms:function(t){var e=this.cache;return e.set(this.formatRooms(t)),i.Deferred().resolve(e)},clearCache:function(){this.cache.reset(),this.trigger("cache:clear",{})},getLocalRooms:function(){var t=i.Deferred(),e=this.cache;return h.isEmpty(e.models)?this.fetchLocalRooms().then(this.cacheRooms.bind(this)).then(t.resolve):t.resolve(e),t},local:function(t){var e=i.Deferred();return t?(this.getLocalRooms().then(function(n){var i=b({query:t,fields:["url","name"]});n=n.filter(i).slice(0,3).map(function(e){return e.set("query",t),e}),this.trigger("loaded:rooms",n,t),e.resolve()}.bind(this)),e):e.resolve()},remote:function(t){var e=i.Deferred();return t?(i.when(this.fetchMessages({query:t}),this.fetchRooms({query:t})).done(e.resolve).fail(e.reject),e):e.resolve()}}),D=c.Layout.extend({template:m,regions:{roomsRegion:".js-search-rooms",messagesRegion:".js-search-messages"},keyboardEvents:{"focus.search":"activate","search.escape":"onEscape","search.prev":"handlePrev","search.next":"handleNext","search.go":"handleGo"},serializeData:function(){return{isOneToOne:r.troupe().get("oneToOne"),roomName:r.troupe().get("name")}},initialize:function(){var t=h.debounce(this.run.bind(this),250);this.listenTo(this.model,"change:searchTerm",function(){t()}.bind(this)),this.listenTo(this.model,"change:active",function(t,e){e?(this.triggerMethod("search:expand"),window.innerWidth<880&&a.triggerParent("menu:hide")):(this.model.set("searchTerm",""),this.hide(),this.triggerMethod("search:collapse"),a.triggerParent("menu:show"),a.trigger("chatCollectionView:clearHighlight"))});var e=new u.Collection([]);e.comparator="priority",this.rooms=new u.FilteredCollection(null,{model:u.Model,collection:e}),this.chats=new u.FilteredCollection(null,{model:u.Model,collection:e}),this.rooms.setFilter(function(t){return!!t.get("url")
}),this.chats.setFilter(function(t){return!!t.get("text")}),this.navigation=new E({collection:e}),this.search=new S({}),this.listenTo(this.search,"cache:clear",function(){e.reset()}.bind(this)),this.listenTo(this.search,"loaded:rooms",function(t){var n=this.rooms.models.filter(function(t){return t.get("query")!==this.model.get("searchTerm")}.bind(this));e.remove(n),e.add(t),this.rooms.resetWith(e)}.bind(this)),this.listenTo(this.search,"loaded:messages",function(t){e.remove(this.chats.models),e.set(t,{remove:!1}),this.chats.resetWith(e)}.bind(this)),this.roomsView=new M({collection:this.rooms}),this.messagesView=new C({collection:this.chats})},isSearchTermEmpty:function(){return h.isEmpty(this.model.get("searchTerm"))},activate:function(){this.model.set("active",!0)},onEscape:function(){this.model.set("active",!1)},hide:function(){this.triggerMethod("search:hide"),this.$el.hide(),this.search.clearCache()},run:function(){if(this.isSearchTermEmpty())return this.hide();var t=this.model.get("searchTerm"),e=function(){this.model.set("isLoading",!1),a.trigger("track-event","search_complete")}.bind(this);this.model.set("isLoading",!0),i.when(this.search.local(t),this.search.remote(t)).then(e).fail(e),this.showResults(),this.triggerMethod("search:show")},showResults:function(){this.$el.show(),this.roomsRegion.show(this.roomsView),this.messagesRegion.show(this.messagesView)},handlePrev:function(t){t.preventDefault(),this.isSearchTermEmpty()||(this.navigation.prev(),this.scroll())},handleNext:function(t){t.preventDefault(),this.isSearchTermEmpty()||(this.navigation.next(),this.scroll())},handleGo:function(){if(!this.isSearchTermEmpty()){var t=this.navigation.current();t&&t.trigger("select")}},scroll:function(){var t=this.messagesView.children.findByModel(this.navigation.current());t&&this.messagesView.scrollTo(t);var e=this.roomsView.children.findByModel(this.navigation.current());e&&this.roomsView.scrollTo(e)}});return d.mixin(D,_),D}()},function(t,e,n){"use strict";var i=n(6),o=(n(40),n(294)),r=i.ItemView.extend({template:o,ui:{input:".js-search-input",clearIcon:".js-search-clear-icon",searchIcon:".js-search-icon"},events:{"click .js-activate-search":"activate","click @ui.clearIcon":"clearSearchTerm","click @ui.input":"activate","blur @ui.input":"onBlur","change @ui.input":"handleChange","input @ui.input":"handleChange"},modelEvents:{"change:isLoading":"onResultsLoading","change:active":"onActiveChange"},activate:function(){this.model.set("active",!0)},onBlur:function(){this.ui.input.val()||this.model.set("active",!1)},clearSearchTerm:function(){this.model.set("searchTerm",""),this.ui.input.val(""),this.ui.input.focus()},handleChange:function(t){this.model.set("searchTerm",t.target.value.trim())},onResultsLoading:function(t,e){this.ui.searchIcon.toggleClass("fetching",e)},onActiveChange:function(t,e){this.$el.toggleClass("active",e);var n=this.ui.input;e&&!n.is(":focus")?n.focus():n.val("")}});t.exports=r},function(t,e,n){"use strict";var i=n(4),o=n(5),r=n(295);t.exports=function(){var t=o.Model.extend({url:"/v1/repo-info"}),e=o.View.extend({initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){var t=r(this.model.toJSON());return i(this.el).html(t),this}});return{model:t,view:e}}()},function(t,e,n){"use strict";var i=n(12),o=n(6),r=n(16),a=n(133),s=n(123),l=n(124),u=n(125),c=n(3),h=n(296),d=n(297),f=n(298),p=n(299),m=n(300),g=n(301),v=n(302),y=n(303),w=n(304),b=n(305),_=n(306),x=n(307),k=n(308),T=n(309),M=n(310),C=n(311),E=n(312),S=n(115),D=n(313);n(52),n(119),t.exports=function(){function t(t,e){var n=I[t.service],i=n?n(t,e):{};if(e&&e.ref){var o=e.ref.split("/");i.branch_name=o[3]?o[3]:o[2],i.repo=e.repository.owner.name+"/"+e.repository.name}return i}var e={bitbucket:_,huboard:x,jenkins:k,travis:T,sprintly:M,trello:C},n={push:h,issues:d,issue_comment:f,commit_comment:p,pull_request:m,gollum:g,fork:v,member:y,"public":w,watch:b},I={trello:function(t,e){var n={updateCard:"updated",createCard:"created",commentCard:"commented",voteOnCard:"voted"};return{trello_action:n[e.action.type]}},sprintly:function(t,e){var n={};return"Item"==e.model?n.sprintly_action="created":"Comment"==e.model&&(n.sprintly_action="commented on"),n},bitbucket:function(t){var e=t.commits||[];return{first_commit:e[0],is_single_commit:1===e.length,commits_count:e.length}},github:function(t,e){var n={};if("push"==t.event){var i=e.commits||[],o=i.length;n.commits=i,n.commits.forEach(function(t){t.short_sha=t.id.substring(0,7);var e=t.message;t.short_message=e.length>32?e.substr(0,31)+"":e}),o>3&&(n.commits=n.commits.slice(0,3),n.hidden_commit_count=o-3),n.commits_count=o}else"gollum"==t.event?(n.wiki_url=e.pages[0].html_url,n.wiki_page=e.pages[0].page_name):"commit_comment"===t.event&&(n.commit=t.commit||{id:e.comment.commit_id,short_sha:e.comment.commit_id.substring(0,7)});return n},jenkins:function(t,e){var n=e.build.status?e.build.status.toLowerCase():e.build.phase.toLowerCase();return{build_status:n}},travis:function(t,e){var n={},i=e.status_message?e.status_message.toLowerCase():"";return n.build_status="still failing"===i?"failing":i,n},huboard:function(t){var e={},n=t.column,i=t.previousColumn;return t.milestone?e.context="to "+t.milestone:t.status?e.context="to "+t.status:n&&(e.context=i?"from "+i+" to "+n:"in "+n),e}},L=o.ItemView.extend({tagName:"li",modelEvents:{change:"render"},behaviors:{Widgets:{}},initialize:function(){var t=this.model.get("meta"),i=t.service;if("github"==i){var o=t.event;this.template=n[o]}else this.template=t.prerendered?E:e[i]},serializeData:function(){try{var e=this.model.get("meta"),n=this.model.get("payload"),o=this.model.get("sent"),a=this.model.get("html"),s={meta:e,payload:n,sent:o,html:a},l=e.prerendered?{}:t(e,n);return i.extend(s,l)}catch(u){var h=this.model&&this.model.attributes;return r.trigger("bugreport",u,{extra:h}),c.info("ERROR rendering activity item:",u.message,u.stack,h),{}}},onRender:function(){s.decorate(this),l.decorate(this),u.decorate(this)}}),A=o.CompositeView.extend({template:D,itemViewContainer:"ul#activity-events",itemView:L,initialize:function(){this.listenTo(this.collection,"snapshot",this.render)}});return S.mixin(A,a.SortableMarionetteView),A}()},,,,,function(t){"use strict";t.exports=function(){return function(t){var e=t||navigator.userAgent;return e.indexOf("Mobile")>=0}}()},,,,,,,function(t,e,n){"use strict";var i=n(4),o=n(12),r=n(2),a=n(42),s=n(51),l=n(6),u=n(133),c=n(127),h=n(242),d=n(280),f=n(281),p=n(74),m=n(16),g=n(115),v=n(282),y=n(128);n(283),n(119),n(284),n(263),n(120),t.exports=function(){var t=36e5,e=640,n=6e5,w=function(t){return t/6e4},b={"click .js-chat-item-edit":"toggleEdit","click .js-chat-item-collapse":"toggleCollapse","click .js-chat-item-readby":"showReadBy","click .js-chat-item-from":"mentionUser","click .js-chat-item-time":"permalink","mouseover .js-chat-item-readby":"showReadByIntent","click .webhook":"expandActivity",click:"onClick",dblclick:"onDblClick"},_={"click .js-chat-item-edit":"toggleEdit",click:"onTouchClick"},x=l.ItemView.extend({attributes:{"class":"chat-item"},ui:{collapse:".js-chat-item-collapse"},behaviors:{Widgets:{},UnreadItems:{unreadItemType:"chat"},SyncStatus:{},Highlight:{}},isEditing:!1,events:c.isMobile?_:b,keyboardEvents:{"chat.edit.escape":"onKeyEscape","chat.edit.send":"onKeySend"},expandActivity:function(){i(".webhook .commits").slideToggle("fast")},initialize:function(e){this.rollers=e.rollers,this.listenToOnce(this.model,"change:unread",function(){this.model.get("unread")||this.$el.removeClass("unread")}),this._oneToOne=r.inOneToOneTroupeContext(),this.isPermalinkable=!this._oneToOne,this.userCollection=e.userCollection,this.decorators=e.decorators,this.listenTo(this.model,"change",this.onChange);var i=this.timeChange.bind(this);if(this.isInEditablePeriod()){var o=this.model.get("sent").valueOf()+n-Date.now();setTimeout(i,o+50)}if(!this.isOld()){var a=this.model.get("sent").valueOf()+t-Date.now();setTimeout(i,a+50)}},template:function(t){return t.status?f(t):d(t)},serializeData:function(){var t=this.model.toJSON();return t.fromUser&&(t.username=t.fromUser.username),t.readByText=this.getReadByText(t.readBy),t.html||(t.html=o.escape(t.text)),t.isPermalinkable=this.isPermalinkable,t},getReadByText:function(t){return t?this._oneToOne?" ":(t>10&&(t=10),t):""},onChange:function(){var t=this.model.changed;"html"in t&&this.renderText(),this.updateRender(this.model.changed)},onKeyEscape:function(){this.inputBox&&(this.toggleEdit(),this.focusInput())},onKeySend:function(t){this.inputBox&&this.inputBox.processInput(),t.preventDefault()},renderText:function(){var t=[];"REPO"===r.troupe().get("githubType")&&(t=this.model.get("issues")||[]);var e=this.model.get("html")||o.escape(this.model.get("text"));0===e.length&&(e="<i>This message was deleted</i>",this.$el.addClass("deleted")),this.$el.find(".js-chat-item-text").html(e),o.each(this.decorators,function(t){t.decorate(this)},this)},onRender:function(){if(this.renderText(),this.updateRender(),this.timeChange(),!this.compactView){var t=this.$el.find(".js-chat-item-edit"),e=this.$el.find(".js-chat-item-collapse");t.tooltip({container:"body",title:this.getEditTooltip.bind(this)}),e.tooltip({container:"body",title:this.getCollapseTooltip.bind(this)})}},timeChange:function(){this.$el.toggleClass("isEditable",this.isInEditablePeriod()),this.$el.toggleClass("canEdit",this.canEdit()),this.$el.toggleClass("cantEdit",!this.canEdit()),this.$el.toggleClass("isOld",this.isOld())},updateRender:function(t){if((!t||"fromUser"in t)&&this.$el.toggleClass("isViewers",this.isOwnMessage()),(!t||"editedAt"in t)&&this.$el.toggleClass("hasBeenEdited",this.hasBeenEdited()),(!t||"burstStart"in t)&&(this.$el.toggleClass("burstStart",this.model.get("burstStart")),this.$el.toggleClass("burstContinued",!this.model.get("burstStart"))),(!t||"burstFinal"in t)&&this.$el.toggleClass("burstFinal",this.model.get("burstFinal")),t&&"readBy"in t){var e=this.model.get("readBy"),n=this.model.previous("readBy"),o=this.$el.find(".js-chat-item-readby");0===o.length?e&&(o=i(document.createElement("div")).addClass("chat-item__icon--read js-chat-item-readby"),o.insertBefore(this.$el.find(".js-chat-item-edit")),setTimeout(function(){o.addClass("readBySome")},10)):0===n!=(0===e)&&o.toggleClass("readBySome",!!e)}if(t&&"collapsed"in t){var r=this.model.get("collapsed");r?this.collapseEmbeds():this.expandEmbeds()}if(!t||"isCollapsible"in t){var a=this.model.get("isCollapsible");if(a){if(this.$el.find(".js-chat-item-collapse").length)return;var s=i(document.createElement("div")),l=i(document.createElement("i"));l.addClass("octicon"),s.append(l),s.addClass("js-chat-item-collapse"),this.model.get("collapsed")?(l.addClass("octicon-unfold"),s.addClass("chat-item__icon--expand")):(s.addClass("chat-item__icon--collapse"),l.addClass("octicon-fold")),this.$el.find(".js-chat-item-details").append(s)}else this.$el.find(".js-chat-item-collapse").remove()}},getEditTooltip:function(){return this.isEmbedded()?"You can't edit on embedded chats.":this.hasBeenEdited()?"Edited shortly after being sent":this.canEdit()?"Edit within "+w(n)+" minutes of sending":this.isOwnMessage()?"It's too late to edit this message.":"You can't edit someone else's message"},getCollapseTooltip:function(){return this.model.get("collapsed")?"Show media.":"Hide media."},getCollapsedTooltip:function(){return"Displaying message, click here to collapse."},focusInput:function(){i("#chat-input-textarea").focus()},saveChat:function(t){this.isEditing&&(this.canEdit()&&t!=this.model.get("text")&&(this.model.set("text",t),this.model.set("html",null),this.model.save()),this.focusInput(),this.toggleEdit())},isOwnMessage:function(){return null===this.model.get("fromUser")?!1:this.model.get("fromUser").id===r.getUserId()},isInEditablePeriod:function(){var t=Date.now()-this.model.get("sent").valueOf();return n>=t},isEmbedded:function(){return r().embedded},isOld:function(){var e=Date.now()-this.model.get("sent").valueOf();return e>=t},canEdit:function(){return this.isOwnMessage()&&this.isInEditablePeriod()&&!this.isEmbedded()},hasBeenEdited:function(){return!!this.model.get("editedAt")},hasBeenRead:function(){return!!this.model.get("readBy")},toggleEdit:function(){if(this.isEditing)this.isEditing=!1,this.showText(),this.stopListening(m,"focus.request.chat.edit"),m.trigger("chat.edit.hide");else if(this.canEdit()){var t=this;this.isEditing=!0,this.showInput(),this.listenTo(m,"focus.request.chat.edit",function(){t.inputBox.$el.focus(),m.trigger("focus.change.chat.edit")}),m.trigger("chat.edit.show")}},setCollapse:function(t){t=!!t;var e=this.model.get("id"),n=!!this.model.get("collapsed");t!==n&&(n?v.uncollapse(e):v.collapse(e),this.model.set("collapsed",!n))},toggleCollapse:function(){var t=this.model.get("collapsed");this.setCollapse(!t)},collapseEmbeds:function(){this.bindUIElements();var t=this,e=t.$el.find(".embed"),n=this.ui.collapse.find("i");clearTimeout(t.embedTimeout),this.ui.collapse.removeClass("chat-item__icon--collapse"),this.ui.collapse.addClass("chat-item__icon--expand"),n.removeClass("octicon-fold"),n.addClass("octicon-unfold"),t.rollers&&e.each(function(e,n){t.rollers.startTransition(n,500)}),e.css("overflow",void 0),e.css("max-height","0"),e.addClass("animateOut"),t.embedTimeout=setTimeout(function(){t.renderText()},600)},expandEmbeds:function(){function t(t){setTimeout(function(){t.each(function(t,n){var o=i(n).height();e>=o?i(n).css("max-height",o+"px"):i(n).css("overflow","hidden")})},3e3)}this.bindUIElements();var n=this;clearTimeout(n.embedTimeout);var o=this.ui.collapse.find("i");o.addClass("octicon-fold"),o.removeClass("octicon-unfold"),this.ui.collapse.removeClass("chat-item__icon--expand"),this.ui.collapse.addClass("chat-item__icon--collapse"),n.expandFunction=function(e){e.addClass("animateOut"),setTimeout(function(){n.rollers&&n.rollers.startTransition(e,500),e.removeClass("animateOut"),t(e)},10)},n.renderText(),n.embedTimeout=setTimeout(function(){var e=n.$el.find(".embed");n.rollers&&e.each(function(t,e){n.rollers.startTransition(e,500)}),e.removeClass("animateOut"),t(e)},10)},showText:function(){this.renderText(),this.inputBox&&(this.stopListening(this.inputBox),this.inputBox.remove(),delete this.inputBox)},showInput:function(){var t=this.$el.find(".js-chat-item-text");t.html("<textarea class='trpChatInput'></textarea>");var e=this.model.get("text"),n=t.find("textarea").val(e);setTimeout(function(){n.focus(),n.val("").val(e)},10),this.inputBox=new p.ChatInputBoxView({el:n,editMode:!0}),this.listenTo(this.inputBox,"save",this.saveChat)},showReadByIntent:function(t){T.hoverTimeout(t,function(){this.showReadBy(t)},this)},showReadBy:function(t){if(!this.compactView&&!this.popover){t.preventDefault();var e=new T({model:this.model,userCollection:this.userCollection,scroller:this.$el.parents(".primary-scroll"),placement:"vertical",minHeight:"88px",width:"300px",title:"Read By",targetElement:t.target});e.show(),T.singleton(this,e)}},mentionUser:function(){var t="@"+this.model.get("fromUser").username+" ";m.trigger("input.append",t)},permalink:function(t){this.isPermalinkable&&m.trigger("permalink.requested","chat",this.model,{appendInput:!!t.altKey})},highlight:function(){var t=this;this.$el.addClass("chat-item__highlighted"),setTimeout(function(){t.$el.removeClass("chat-item__highlighted")},5e3)},onTouchClick:function(){this.triggerMethod("selected",this.model)},onClick:function(){this.triggerMethod("selected",this.model),window.getSelection&&this.dblClickTimer&&(clearTimeout(this.dblClickTimer),this.dblClickTimer=null,window.getSelection().selectAllChildren(this.el))},onDblClick:function(){if(window.getSelection){var t=this;t.dblClickTimer=setTimeout(function(){t.dblClickTimer=null},200)}}});g.mixin(x,y);var k=l.CollectionView.extend({itemView:s,className:"popoverReadBy",initialize:function(t){var e=new a.ReadByCollection(null,{listen:!0,chatMessageId:this.model.id,userCollection:t.userCollection});e.loading=!0,this.collection=e},onClose:function(){this.collection.unlisten()}});g.mixin(k,u.LoadingCollectionMixin);var T=h.extend({initialize:function(t){h.prototype.initialize.apply(this,arguments),this.view=new k({model:this.model,userCollection:t.userCollection})}});return{ChatItemView:x,ReadByView:k,ReadByPopover:T}}()},function(t,e,n){"use strict";var i=n(286),o=n(40);t.exports=function(){function t(t,e,o){o=o||{},this._target=t,this._childContainer=e||t,this._mutationHandlers={},this._mutationHandlers[n]=this.updateTrackBottom.bind(this),this._mutationHandlers[r]=this.updateTrackNoPass.bind(this),this._mutationHandlers[a]=this.updateStableTracking.bind(this),this._nopass=null,this._stableElement=null,o.doNotTrack?this._mode=a:this.initTrackingMode();var s=this.adjustScroll.bind(this);this.mutant=new i(t,s,{transitions:!0,observers:{attributes:!0,characterData:!0}}),t.addEventListener("scroll",this.trackLocation.bind(this),!1),window.addEventListener("resize",s,!1),window.addEventListener("focusin",s,!1),window.addEventListener("focusout",s,!1)}function e(t,e){var n=Date.now()+e,i=setInterval(function(){Date.now()>=n&&clearInterval(i),t()},20)}var n=1,r=2,a=3,s=30,l=300;return t.prototype={adjustScroll:function(){return this._mutationHandlers[this._mode](),this._postMutateTop=this._target.scrollTop,!0},adjustScrollContinuously:function(t){e(this.adjustScroll.bind(this),t)},trackUntil:function(t,e){(e||this._mode!=a)&&(this._nopass=t,this._mode=r)},initTrackingMode:function(){this.isScrolledToBottom()?this._mode=n:this.stable()},stable:function(){var t=this._target;this._nopass=null,this._mode=a,this._stableElement=this.getBottomMostVisibleElement();var e=t.scrollTop+t.clientHeight,n=this._stableElement.offsetTop-t.offsetTop;this._stableElementFromBottom=e-n},setModeLocked:function(t){this.modeLocked=t,t||this.trackLocation()},cancelTrackUntil:function(){this._nopass&&(this._nopass=null,this.initTrackingMode())},disableTrackBottom:function(){this.disableTrackBottom=!0},enableTrackBottom:function(){this.disableTrackBottom=!0,this.isScrolledToBottom()&&this.trackLocation()},isScrolledToBottom:function(){var t=this._target,e=t.scrollTop>=t.scrollHeight-t.clientHeight-s;return e},updateTrackBottom:function(){var t=this._target,e=t.scrollHeight-t.clientHeight;t.scrollTop=e},startTransition:function(t,e){this.mutant.startTransition(t,e)},endTransition:function(t){this.mutant.endTransition(t)},scrollToBottom:function(){var t=this._target,e=t.scrollHeight-t.clientHeight;t.scrollTop=e,delete this._nopass,delete this._stableElement,delete this._stableElementFromBottom,this._mode=n,this._postMutateTop=e},scrollToElement:function(t,e){var n,i=this._target;if(e&&e.centre){var r=t.offsetHeight,a=i.clientHeight;a>r&&(n=Math.floor(t.offsetTop+r/2-a/2))}n||(n=t.offsetTop-l),0>n&&(n=0),o(function(){i.scrollTop=n}),this.stable()},scrollToBottomContinuously:function(t){e(this.scrollToBottom.bind(this),t)},updateTrackNoPass:function(){var t=this._target,e=t.scrollHeight,n=t.clientHeight,i=e-n,o=this._nopass.offsetTop-t.offsetTop;if(o-l>i)t.scrollTop=i;else{t.scrollTop=o,this._nopass=null,this._mode=a,this._stableElement=this.getBottomMostVisibleElement();var r=t.scrollTop+t.clientHeight,s=this._stableElement.offsetTop-t.offsetTop;this._stableElementFromBottom=r-s}},updateStableTracking:function(){if(this._stableElement){var t=this._target,e=this._stableElement.offsetTop-t.offsetTop,n=e-t.clientHeight+this._stableElementFromBottom;t.scrollTop=n}},trackLocation:function(){var t=this._target;if(this._postMutateTop===t.scrollTop)return!0;var e=t.scrollTop>=t.scrollHeight-t.clientHeight-s;if(this.modeLocked||(e?this._nopass?this._mode!=r&&(this._mode=r):this._mode!=n&&(this._mode=n):this._mode!=a&&(this._mode=a)),this._mode===a){if(this._stableElement=this.getBottomMostVisibleElement(),!this._stableElement)return;var i=t.scrollTop+t.clientHeight,o=this._stableElement.offsetTop-t.offsetTop;this._stableElementFromBottom=i-o}return!0},getScrollBottom:function(){var t=this._target.scrollTop;return this._target.clientHeight+t},getBottomMostVisibleElement:function(){for(var t=this._target.scrollTop,e=this._target.clientHeight,n=t+e,i=this._childContainer.children,o=i.length-1;o>=0;o--){var r=i[o];if(r.offsetTop<n)return r}}},t}()},function(t,e,n){"use strict";var i=n(6),o=n(245),r=n(285);t.exports=function(){var t=i.Behavior.extend({defaults:{reverseScrolling:!1,scrollElementSelector:null,contentWrapper:null},initialize:function(){var t,e=this.options.scrollElementSelector,n=this.options.reverseScrolling,i=e?document.querySelector(e):this.view.el;this.options.contentWrapper&&(t=i.querySelector(this.options.contentWrapper));var o=new r(i,{reverse:n,contentWrapper:t});this.listenTo(o,"approaching.top",function(){this.view.collection.fetchMoreBefore({})}),this.listenTo(o,"approaching.bottom",function(){this.view.collection.fetchMoreAfter({})}),this.listenTo(o,"near.top.changed",function(t){this.nearTop=t,this.view.trigger("near.top.changed",t)}),this.scroll=o},onClose:function(){this.scroll.disable()}});return o.register("InfiniteScroll",t),t}()},function(t,e,n){"use strict";var i=n(287),o=n(95);t.exports=function(){return i.setConfig({img_dir:o("images/emoji")}),{emojify:i,named:i.emojiNames}}()},function(t,e,n){"use strict";var i=n(12);t.exports=function(){function t(t,n){this.el=t,n||(n=window.location.pathname.split("/").splice(1).join("_")),this.store=window.localStorage,this.uniqueId=n;var o=this.store["drafty_"+this.uniqueId];o&&!t.value&&(t.value=o);var r=i.throttle(this.update.bind(this),1e3,{leading:!1});this.updatePeriodic=r,e.forEach(function(e){t.addEventListener(e,r,!1)}),this.update=this.update.bind(this),window.addEventListener("beforeunload",this.update,!1)}var e=["change","keydown","click","cut","paste"];return t.prototype.update=function(){var t=this.el.value;t&&t.length>4096&&(t=""),t?this.store["drafty_"+this.uniqueId]=t:this.reset()},t.prototype.reset=function(){this.store.removeItem("drafty_"+this.uniqueId)},t.prototype.disconnect=function(){var t=this.updatePeriodic,n=this.el;e.forEach(function(e){n.removeEventListener(e,t,!1)}),window.removeEventListener("beforeunload",this.update,!1)},function(e){return new t(e)}}()},function(t,e,n){"use strict";var i=n(12),o=n(2),r=n(16),a=n(30);t.exports=function(){var t=[{command:"ban @username",description:"Ban somebody from the room",criteria:function(){var t=!1;return"ORG"==o.troupe().get("githubType")&&(t=!0),!o.inOneToOneTroupeContext()&&o().permissions.admin&&!t},completion:"ban @",regexp:/^\/ban/,action:function(t){var e=t.$el.val().match(/\/ban @([\w\-]+)/);if(e){var n=e[1];a.room.post("/bans",{username:n}).then(function(){t.reset()}).fail(function(t){var e;switch(t.status){case 403:e="You do not have permission to ban people.";break;case 400:e=t.responseJSON.error;break;case 404:e="That person does not exist (on Gitter that is)";break;default:e="Ban failed"}r.triggerParent("user_notification",{title:"Could not ban user",text:e,className:"notification-error"})})}}},{command:"channel",description:"Create/join a channel",completion:"channel ",regexp:/^\/channel/,action:function(t){var e=t.$el.val(),n=e.match(/^\s*\/channel(?:\s+(\w+))?/),i=n[1];t.$el.val(""),i?r.trigger("route","createcustomroom/"+i):r.trigger("route","createcustomroom")}},{command:"fav",description:"Toggle the room as a favourite",completion:"fav ",regexp:/^\/fav/,action:function(t){var e=!o.troupe().get("favourite");a.userRoom.put("",{favourite:e}).then(function(){t.reset()}),t.reset()}},{command:"leave",description:"Leave the room",completion:"leave ",regexp:/^\/leave/,criteria:function(){return!o.inOneToOneTroupeContext()},action:function(t){t.reset(),a.room["delete"]("/users/"+o.getUserId(),{}).then(function(){r.trigger("navigation",o.getUser().url,"home","")})}},{command:"lurk",description:"Lurk in the room",completion:"lurk ",regexp:/^\/lurk/,criteria:function(){return!o.inOneToOneTroupeContext()},action:function(t){function e(){2==++n&&r.triggerParent("user_notification",{title:"Lurking",text:"Lurk mode has been enabled for this room"})}t.reset();var n=0;a.userRoom.put("/settings/notifications",{push:"mention"}).then(e),a.userRoom.put("",{lurk:!0}).then(e)}},{command:"me",description:"Let people know what's happening",completion:"me ",regexp:/^\/me/},{command:"query @username",description:"Have a private conversation with @username",completion:"query @",regexp:/^\/query/,action:function(t){var e=t.$el.val().match(/\/query @([\w\-]+)/);if(e){var n=e[1];t.reset();var i="/"+n,a=n===o.user().get("username")?"home":"chat",s=n;r.trigger("navigation",i,a,s)}}},{command:"remove @username",description:"Remove somebody from the room",criteria:function(){return!o.inOneToOneTroupeContext()&&o().permissions.admin},completion:"remove @",regexp:/^\/remove/,action:function(t){var e=t.$el.val().match(/\/remove @([\w\-]+)/);if(e){var n=e[1];r.trigger("command.room.remove",n),t.reset()}}},{command:"subst",regexp:/^s\/([^\/]+)\/([^\/]*)\/i?(g?)\s*$/,action:function(t){var e=this.regexp.exec(t.$el.val()),n=e[1],i=e[2],o=!!e[3];t.trigger("subst",n,i,o),t.reset()}},{command:"collapse",description:"Collapse chat messages with embedded media",completion:"collapse ",regexp:/^\/collapse/,action:function(t){r.trigger("command.collapse.chat"),t.reset()}},{command:"expand",description:"Expand chat messages with embedded media",completion:"expand ",regexp:/^\/expand/,action:function(t){r.trigger("command.expand.chat"),t.reset()}},{command:"topic foo",description:"Set room topic to foo",criteria:function(){return!o.inOneToOneTroupeContext()&&o().permissions.admin},completion:"topic ",regexp:/^\/topic/,action:function(t){var e=t.$el.val().match(/^\/topic (.+)/);if(e){var n=e[1];t.reset(),o.troupe().set("topic",n),a.room.put("",{topic:n})}}},{command:"unban @username",description:"Unban somebody from the room",criteria:function(){var t=!1;return"ORG"==o.troupe().get("githubType")&&(t=!0),!o.inOneToOneTroupeContext()&&o().permissions.admin&&!t},completion:"unban @",regexp:/^\/unban/,action:function(t){var e=t.$el.val().match(/\/unban @([\w\-]+)/);if(e){var n=e[1];a.room["delete"]("/bans/"+n,{}).then(function(){t.reset()}).fail(function(t){var e;switch(t.status){case 403:e="You do not have permission to unban people.";break;case 400:e=t.responseJSON.error;break;case 404:e="That person is not on the banned list.";break;default:e="Unban failed"}r.triggerParent("user_notification",{title:"Could not unban user",text:e,className:"notification-error"})})}}}];return{size:t.length,getSuggestions:function(e){return t.filter(function(t){var n=(!t.criteria||t.criteria())&&t.completion;return n&&0===t.command.indexOf(e)})},findMatch:function(e){return i.find(t,function(t){return e.match(t.regexp)})}}}()},function(t,e,n){var i,o;i=[n(4)],o=function(t){return function(t){"use strict";var e=function(t,e){return t.bind?t.bind(e):function(){t.apply(e,arguments)}},n=function(){var e;return e=t("<div></div>").css(["color"]).color,"undefined"!=typeof e?function(t,e){return t.css(e)}:function(e,n){var i;return i={},t.each(n,function(t,n){i[n]=e.css(n)}),i}}(),i=function(t){return t},o=function(t){var e={};return function(n,i){e[n]?i(e[n]):t.call(this,n,function(t){e[n]=(e[n]||[]).concat(t),i.apply(null,arguments)})}},r=function(t,e){var n,i;if(t.indexOf)return-1!=t.indexOf(e);for(n=0,i=t.length;i>n;n++)if(t[n]===e)return!0;return!1},a=function(){function i(n,i){var o,r,a;r=l.clone(),this.el=n.get(0),this.$el=n,o=u(this.$el),a=this.el===document.activeElement,this.$el.wrap(o).before(r),a&&this.el.focus(),this.listView=new s(r,this),this.strategies=i,this.$el.on("keyup",e(this.onKeyup,this)),this.$el.on("keydown",e(this.listView.onKeydown,this.listView)),t(document).on("click",e(function(t){t.originalEvent&&!t.originalEvent.keepTextCompleteDropdown&&this.listView.deactivate()},this))}var o,r,a,l;o={wrapper:'<div class="textcomplete-wrapper"></div>',list:'<ul class="dropdown-menu"></ul>'},r={wrapper:{position:"relative"},list:{position:"absolute",top:"initial",left:0,zIndex:"100",display:"none"}},a=t(o.wrapper).css(r.wrapper),l=t(o.list).css(r.list),t.extend(i.prototype,{renderList:function(t){this.clearAtNext&&(this.listView.clear(),this.clearAtNext=!1),t.length&&(this.listView.shown||(this.listView.setPosition(this.getCaretPosition()).clear().activate(),this.listView.strategy=this.strategy),t=t.slice(0,this.strategy.maxCount),this.listView.render(t)),!this.listView.data.length&&this.listView.shown&&this.listView.deactivate()},searchCallbackFactory:function(t){var e=this;return function(n,i){t==e.term&&(e.renderList(n),i||(e.clearAtNext=!0))}},onKeyup:function(){var t,e;if(t=this.extractSearchQuery(this.getTextFromHeadToCaret()),t.length){if(e=t[1],this.term===e)return;this.term=e,this.search(t)}else this.term=null,this.listView.deactivate()},onSelect:function(e){var n,i,o;n=this.getTextFromHeadToCaret(),i=this.el.value.substring(this.el.selectionEnd),o=this.strategy.replace(e),t.isArray(o)&&(i=o[1]+i,o=o[0]),n=n.replace(this.strategy.match,o),this.$el.val(n+i),this.el.focus(),this.el.selectionStart=this.el.selectionEnd=n.length},getCaretPosition:function(){if(0!==this.el.selectionEnd){var e,i,o,r,a;return e=["border-width","font-family","font-size","font-style","font-variant","font-weight","height","letter-spacing","word-spacing","line-height","text-decoration","text-align","width","padding-top","padding-right","padding-bottom","padding-left","margin-top","margin-right","margin-bottom","margin-left"],i=t.extend({position:"absolute",overflow:"auto","white-space":"pre-wrap",top:0,left:-9999},n(this.$el,e)),o=t("<div></div>").css(i).text(this.getTextFromHeadToCaret()),r=t("<span></span>").text("&nbsp;").appendTo(o),this.$el.before(o),a=r.position(),a.bottom=o.height()-a.top,o.remove(),a}},getTextFromHeadToCaret:function(){var t,e,n;return e=this.el.selectionEnd,"number"==typeof e?t=this.el.value.substring(0,e):document.selection&&(n=this.el.createTextRange(),n.moveStart("character",0),n.moveEnd("textedit"),t=n.text),t},extractSearchQuery:function(t){var e,n,i,o;for(e=0,n=this.strategies.length;n>e;e++)if(i=this.strategies[e],o=t.match(i.match))return[i,o[i.index]];return[]},search:function(t){var e;this.strategy=t[0],e=t[1],this.strategy.search(e,this.searchCallbackFactory(e))}});var u=function(t){return a.clone().css("display",t.css("display"))};return i}(),s=function(){function n(t,n){this.data=[],this.$el=t,this.index=0,this.completer=n,this.$el.on("click","li.textcomplete-item",e(this.onClick,this))}return t.extend(n.prototype,{shown:!1,render:function(t){var e,n,i,o,a;for(e="",n=0,i=t.length;i>n&&(a=t[n],r(this.data,a)||(o=this.data.length,this.data.push(a),e+='<li class="textcomplete-item" data-index="'+o+'"><a>',e+=this.strategy.template(a),e+="</a></li>",this.data.length!==this.strategy.maxCount));n++);this.$el.append(e),this.data.length?this.activateIndexedItem():this.deactivate()},clear:function(){return this.data=[],this.$el.html(""),this.index=0,this},activateIndexedItem:function(){this.$el.find(".active").removeClass("active"),this.getActiveItem().addClass("active")},getActiveItem:function(){return t(this.$el.children().get(this.index))},activate:function(){return this.shown||(this.$el.show(),this.completer.$el.trigger("textComplete:show"),this.shown=!0),this},deactivate:function(){return this.shown&&(this.$el.hide(),this.completer.$el.trigger("textComplete:hide"),this.shown=!1,this.data=this.index=null),this},setPosition:function(t){return this.$el.css({left:t.left,top:"initial",bottom:t.bottom}),this},select:function(t){this.completer.onSelect(this.data[t]),this.deactivate()},onKeydown:function(t){this.shown&&(27===t.keyCode?this.deactivate():38===t.keyCode?(t.preventDefault(),0===this.index?this.index=this.data.length-1:this.index-=1,this.activateIndexedItem()):40===t.keyCode?(t.preventDefault(),this.index===this.data.length-1?this.index=0:this.index+=1,this.activateIndexedItem()):(13===t.keyCode||9===t.keyCode)&&(t.preventDefault(),this.select(parseInt(this.getActiveItem().data("index")))))
},onClick:function(e){var n=t(e.target);e.originalEvent.keepTextCompleteDropdown=!0,n.hasClass("textcomplete-item")||(n=n.parents("li.textcomplete-item")),this.select(parseInt(n.data("index")))}}),n}();t.fn.textcomplete=function(t){var e,n,r;for(e=0,n=t.length;n>e;e++)r=t[e],r.template||(r.template=i),null==r.index&&(r.index=2),r.cache&&(r.search=o(r.search)),r.maxCount||(r.maxCount=10);return new a(this,t),this}}(t||window.Zepto),t}.apply(e,i),!(void 0!==o&&(t.exports=o))},,,function(t,e,n){"use strict";var i=n(10)["default"];t.exports=function(){function t(t,e){return this.renderViews||(this.renderViews=[]),this.renderViews.push({widgetName:t,model:e.hash}),new i.SafeString("<view data-id='"+(this.renderViews.length-1)+"'></view>")}return i.registerHelper("widget",t),t}()},function(t,e,n){"use strict";var i=n(95),o=n(10)["default"];o.registerHelper("cdn",i)},function(t,e,n){"use strict";var i=n(10)["default"];t.exports=function(){function t(t){return t.fn(this)}return i.registerHelper("isMobile",t),t}()},,,,,,,,,,,,,,,,,,,,,function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return s((o=null!=(o=e.role||(null!=t?t.role:t))?o:a,typeof o===r?o.call(t,{name:"role",hash:{},data:i}):o))},3:function(){return"invited"},5:function(t,e,n,i){var o,r,a="function",s=e.helperMissing,l=this.escapeExpression,u=l((r=null!=(r=e.userDisplayName||(null!=t?t.userDisplayName:t))?r:s,typeof r===a?r.call(t,{name:"userDisplayName",hash:{},data:i}):r));return o=e["if"].call(t,null!=t?t.role:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u},6:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return" ("+s((o=null!=(o=e.role||(null!=t?t.role:t))?o:a,typeof o===r?o.call(t,{name:"role",hash:{},data:i}):o))+")"},8:function(){return'<div class="trpStatus" id="status"> </div>'},10:function(){return'<div class="trpDPUnreadCount">12</div>'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a,s="function",l=e.helperMissing,u=this.escapeExpression,c=e.blockHelperMissing,h='<div\n  class="trpDisplayPicture  avatar-'+u((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===s?r.call(t,{name:"id",hash:{},data:i}):r))+"  avatar-"+u((r=null!=(r=e.avatarSize||(null!=t?t.avatarSize:t))?r:l,typeof r===s?r.call(t,{name:"avatarSize",hash:{},data:i}):r))+"  "+u((r=null!=(r=e.presenceClass||(null!=t?t.presenceClass:t))?r:l,typeof r===s?r.call(t,{name:"presenceClass",hash:{},data:i}):r))+"  ";return o=e["if"].call(t,null!=t?t.role:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(h+=o),h+="  ",o=e["if"].call(t,null!=t?t.inactive:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(h+=o),h+='"\n  style="background-image: url(\''+u((r=null!=(r=e.avatarUrl||(null!=t?t.avatarUrl:t))?r:l,typeof r===s?r.call(t,{name:"avatarUrl",hash:{},data:i}):r))+'\')"\n  data-original-title="',o=e["if"].call(t,null!=t?t.showTooltip:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(h+=o),h+='">\n  ',r=null!=(r=e.showStatus||(null!=t?t.showStatus:t))?r:l,a={name:"showStatus",hash:{},fn:this.program(8,i),inverse:this.noop,data:i},o=typeof r===s?r.call(t,a):r,e.showStatus||(o=c.call(t,o,a)),null!=o&&(h+=o),h+="\n  ",r=null!=(r=e.showBadge||(null!=t?t.showBadge:t))?r:l,a={name:"showBadge",hash:{},fn:this.program(10,i),inverse:this.noop,data:i},o=typeof r===s?r.call(t,a):r,e.showBadge||(o=c.call(t,o,a)),null!=o&&(h+=o),h+"\n</div>\n"},useData:!0})},,,,,,,,,,,,function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i){var o,r=e.helperMissing,a="<li>";return o=(e.widget||t&&t.widget||r).call(t,"avatar",{name:"widget",hash:{showStatus:!0,user:t},data:i}),null!=o&&(a+=o),a+"</li>"},3:function(){return'      <a href="#add" class="trpAddBadge  js-add-more" style="text-decoration: none"><div style="text-align: center;">&#10011; Add</div></a>\n'},5:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'      <span class=\'js-show-more\'>\n        <a href="#people" class="trpMoreBadge" style="text-decoration: none"><div style="text-align: center;">See All</div></a><small>('+s((o=null!=(o=e.remainingCount||(null!=t?t.remainingCount:t))?o:a,typeof o===r?o.call(t,{name:"remainingCount",hash:{},data:i}):o))+" "+s((e.pluralize||t&&t.pluralize||a).call(t,null!=t?t.remainingCount:t,"member","members",{name:"pluralize",hash:{},data:i}))+" hidden)</small>\n      </span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r='<span class="frame-people">\n  <span id="roster">\n    <ul class="roster">';return o=e.each.call(t,null!=t?t.users:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r+='</ul></span>\n  <span id="remaining">\n',o=e.unless.call(t,null!=t?t.oneToOne:t,{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(r+=o),o=e["if"].call(t,null!=t?t.remainingCount:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r+"  </span>\n</span>\n"},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(){return'  <a href="#add" class="trpAddBadge  js-add-more" style="text-decoration: none"><div style="text-align: center;">&#10011; Add</div></a>\n'},3:function(){return"s"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a="function",s=e.helperMissing,l=this.escapeExpression,u='<div style="clear:both"></div>\n';return o=e["if"].call(t,null!=t?t.showAddBadge:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+='<span class=\'js-show-more\'>\n  <a href="#people" class="trpMoreBadge" style="text-decoration: none"><div style="text-align: center;">See All</div></a><small>('+l((r=null!=(r=e.remainingCount||(null!=t?t.remainingCount:t))?r:s,typeof r===a?r.call(t,{name:"remainingCount",hash:{},data:i}):r))+" member",o=e["if"].call(t,null!=t?t.plural:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+" hidden)</small>\n</span>\n"},useData:!0})},,,,,,,,function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(){return'autofocus onfocus="this.value = this.value;"'},3:function(){return"keyboard-1"},5:function(){return"chat-alt"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=e.helperMissing,s=this.escapeExpression,l="function",u='<div class="chat-input__area">\n  <div class="chat-input__avatar">\n    '+s((e.widget||t&&t.widget||a).call(t,"avatar",{name:"widget",hash:{showTooltip:!1,size:"s",model:null!=t?t.user:t},data:i}))+'\n  </div>\n  <form class="chat-input__box" name="chat">\n    <textarea class="chat-input__text-area" name="chat" id="chat-input-textarea" placeholder="'+s((r=null!=(r=e.placeholder||(null!=t?t.placeholder:t))?r:a,typeof r===l?r.call(t,{name:"placeholder",hash:{},data:i}):r))+'" ';return o=e["if"].call(t,null!=t?t.autofocus:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+=' maxlength="4096">'+s((r=null!=(r=e.value||(null!=t?t.value:t))?r:a,typeof r===l?r.call(t,{name:"value",hash:{},data:i}):r))+'</textarea>\n  </form>\n  <div class="chat-input__buttons">\n    <a href="#" class=\'js-toggle-compose-mode\' title=\''+s((r=null!=(r=e.composeModeToggleTitle||(null!=t?t.composeModeToggleTitle:t))?r:a,typeof r===l?r.call(t,{name:"composeModeToggleTitle",hash:{},data:i}):r))+"'><i class='icon-",o=e["if"].call(t,null!=t?t.isComposeModeEnabled:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=o&&(u+=o),u+"'></i></a>\n    <a href='#markdown' class='js-md-help' style='text-decoration: none; display: block;' title='"+s((r=null!=(r=e.showMarkdownTitle||(null!=t?t.showMarkdownTitle:t))?r:a,typeof r===l?r.call(t,{name:"showMarkdownTitle",hash:{},data:i}):r))+"'><i class='icon-doc-text'></i></a>\n  </div>\n</div>\n"},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return s((o=null!=(o=e.name||(null!=t?t.name:t))?o:a,typeof o===r?o.call(t,{name:"name",hash:{},data:i}):o))+" <small>"+s((o=null!=(o=e.description||(null!=t?t.description:t))?o:a,typeof o===r?o.call(t,{name:"description",hash:{},data:i}):o))+"</small>\n"},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'<img class="emoji" src="'+s((o=null!=(o=e.emojiUrl||(null!=t?t.emojiUrl:t))?o:a,typeof o===r?o.call(t,{name:"emojiUrl",hash:{},data:i}):o))+'" align="absmiddle"> '+s((o=null!=(o=e.emoji||(null!=t?t.emoji:t))?o:a,typeof o===r?o.call(t,{name:"emoji",hash:{},data:i}):o))+"\n"},useData:!0})},,,,,,,,,,,,,,,,,,,,,,,,,,,function(t){t.exports=["_s","about","api","explore","home","login","mobile","settings","logout","apps"]},function(t){"use strict";t.exports={get:function(t,e){return t.get(e)},at:function(t,e){return t.at(e)},indexOf:function(t,e){return t.indexOf(e)}}},function(t){"use strict";function e(t,e,n){var i,o=t.indexOf(e,n),r=o+1,a=[n];if(0>o)return a;if(!t.get(n,"burstStart"))for(o--,i=t.at(e,o);o>=0&&(a.unshift(i),!t.get(i,"burstStart"));)o--,o>=0&&(i=t.at(e,o));for(;r<e.length&&(i=t.at(e,r))&&!t.get(i,"burstStart");)a.push(i),r++;return a}t.exports=e},function(t){"use strict";t.exports=function(t){return t.toJSON?t.toJSON():t}},function(t,e,n){"use strict";function i(t,e){return l.indexOf(t.role)-l.indexOf(e.role)||0}function o(t,e){return e.username.toLowerCase().localeCompare(t.username.toLowerCase())}function r(t,e){return t.invited!==e.invited}function a(t,e){return t.invited===e.invited?0:t.invited&&!e.invited?-1:1}var s=n(238),l=["contributor","admin"];t.exports=function(t,e){t=s(t),e=s(e);var n=i(t,e);return n?-n:r(t,e)?-a(t,e):-o(t,e)}},function(t){"use strict";t.exports=function(){function t(t,e){return t===e?0:t>e?1:-1}function e(t){return t&&t.id}function n(t){return t}return{naturalComparator:t,identityTransform:n,idTransform:e,index:function(t,n){n||(n=e);for(var i={},o=0;o<t.length;o++){var r=t[o],a=n(r);i[a]?i[a].push(r):i[a]=[r]}return i},extractDateFromDateTime:function(t){return t?new Date(t.getFullYear(),t.getMonth(),t.getDate()):null},extractTimeFromDateTime:function(t){if(!t)return null;var e=t.getHours()+":"+t.getMinutes();return e},formatDate:function(t){return t?t.toLocaleDateString():""},max:function(e,n){n||(n=t);for(var i=e[0],o=1;o<e.length;o++){var r=e[o];n(r,i)>0&&(i=r)}return i},min:function(e,n){n||(n=t);for(var i=e[0],o=1;o<e.length;o++){var r=e[o];n(i,r)>0&&(i=r)}return i}}}()},function(t,e,n){"use strict";var i=n(12);t.exports=function(){var t=Object.prototype,e=t.toString,n=function(t,o,r,a){if(t===o)return 0!==t||1/t===1/o;if(null==t||null==o)return t===o;t instanceof i&&(t=t._wrapped),o instanceof i&&(o=o._wrapped);var s=e.call(t);if(s!==e.call(o))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+o;case"[object Number]":return t!=+t?o!=+o:0==t?1/t==1/o:t==+o;case"[object Date]":case"[object Boolean]":return+t===+o}if("object"!=typeof t||"object"!=typeof o)return!1;for(var l=r.length;l--;)if(r[l]===t)return a[l]===o;var u=t.constructor,c=o.constructor;if(u!==c&&"constructor"in t&&"constructor"in o&&!(i.isFunction(u)&&u instanceof u&&i.isFunction(c)&&c instanceof c))return!1;r.push(t),a.push(o);var h=0,d=!0;if("[object Array]"===s){if(h=t.length,d=h===o.length)for(;h--&&(d=n(t[h],o[h],r,a)););}else if(i.isFunction(t.valueOf)&&i.isFunction(o.valueOf)){var f=t.valueOf(),p=o.valueOf();d=n(f,p,r,a)}else{for(var m in t)if(i.has(t,m)&&(h++,!(d=i.has(o,m)&&n(t[m],o[m],r,a))))break;if(d){for(m in o)if(i.has(o,m)&&!h--)break;d=!h}}return r.pop(),a.pop(),d};return function(t,e){return n(t,e,[],[])}}()},function(t,e,n){"use strict";var i=n(4),o=n(12),r=n(6),a=(n(133),n(286)),s=n(322);t.exports=function(){function t(t){for(var e=0;t&&t!=document;){var n=window.getComputedStyle(t,null);if(n){var i=n.getPropertyValue("z-index");i&&"auto"!==i&&(i=parseInt(i,10),i>e&&(e=i))}t=t.parentNode}return e}var e=10,n=750,l={animation:!0,selector:!1,title:"",footerView:null,delay:300,container:!1,placement:"right",scroller:null,width:"",minHeight:""},u=r.ItemView.extend({template:s,className:"popover",initialize:function(e){o.bindAll(this,"leave","enter"),this.options=o.extend({},l,e),this.view=this.options.view,this.titleView=this.options.titleView,this.title=this.options.title,this.footerView=this.options.footerView,this.options.scroller&&(this.$scroller=i(this.options.scroller),this.scroller=this.$scroller[0]),this.targetElement=this.options.targetElement,this.$targetElement=i(this.targetElement),this.zIndex=t(this.targetElement),this.$targetElement.on("mouseenter",this.enter),this.$targetElement.on("mouseleave",this.leave),this.once("close",function(){this.mutant&&this.mutant.disconnect()})},serializeData:function(){return this.options},onRender:function(){var t=this.$el;this.view.parentPopover=this,this.zIndex&&(this.el.style.zIndex=this.zIndex+1),this.titleView?t.find(".popover-title").append(this.titleView.render().el):t.find(".popover-title").text(this.title),t.find(".popover-content").append(this.view.render().el),t.find(".popover-inner").css("width",this.options.width).css("min-height",this.options.minHeight);var e=this.footerView;e&&(e.parentPopover=this,t.find(".popover-footer-content").append(e.render().el)),t.on("mouseenter",this.enter),t.on("mouseleave",this.leave),t.addClass("popover-hidden"),t.removeClass("fade top bottom left right in")},enter:function(){this.timeout&&clearTimeout(this.timeout)},leave:function(){if(!this.options.delay)return t.hide();var t=this;this.timeout=setTimeout(function(){t.hide()},t.options.delay)},onClose:function(){this.$el.off("mouseenter",this.enter),this.$el.off("mouseleave",this.leave),this.$targetElement.off("mouseenter",this.enter),this.$targetElement.off("mouseleave",this.leave),this.view.close()},show:function(){var t=this.render().$el,e=this.el;t.detach().css({left:"auto",display:"block"}),t.appendTo(i("body")),this.reposition(),t.removeClass("popover-hidden"),this.mutant=new a(e,this.reposition,{scope:this,timeout:20,transitions:!0,observers:{attributes:!0,characterData:!0}})},reposition:function(){try{var t=this.$el,n=this.el,i=this.getTargetPosition(),o=n.offsetWidth,r=n.offsetHeight,a=this.options.placement;switch(a){case"vertical":a=this.selectBestVerticalPlacement(t,this.targetElement);break;case"horizontal":a=this.selectBestHorizontalPlacement(t,this.targetElement)}var s;switch(a){case"bottom":s={top:i.top+i.height,left:i.left+i.width/2-o/2};break;case"top":s={top:i.top-r,left:i.left+i.width/2-o/2-2};break;case"left":s={top:i.top+i.height/2-r/2,right:document.body.clientWidth-i.left+e};break;case"right":s={top:i.top+i.height/2-r/2,left:i.left+i.width}}this.applyPlacement(s,a)}finally{this.mutant&&this.mutant.takeRecords()}},selectBestVerticalPlacement:function(t,e){var n=i(e);if(this.scroller){var o=this.scroller.scrollTop,r=this.scroller.scrollTop+this.scroller.clientHeight,a=(o+r)/2;return e.offsetTop>a?"top":"bottom"}var s=n.offsetParent();return s&&n.offset().top+t.height()+20>=s[0].clientHeight?"top":"bottom"},selectBestHorizontalPlacement:function(t,e){var n=e.getBoundingClientRect();return n.left<document.body.clientWidth/2?"right":"left"},applyPlacement:function(t,e){var n,i,o,r=this.$el,a=r[0],s=a.offsetWidth,l=a.offsetHeight,u=0;if("bottom"==e||"top"==e)t.left<0&&(u=-2*t.left,t.left=0);else if(t.top<0)u=-2*t.top,t.top=0;else{var c=this.scroller?this.scroller.clientHeight:window.innerHeight;t.top+l>c&&(u=2*(c-t.top-l-10),t.top=c-l-10)}var h={top:t.top};t.right?(h.left="initial",h.right=t.right):(h.left=t.left,h.right="initial"),r.css(h).addClass(e).addClass("in"),n=a.offsetWidth,i=a.offsetHeight,"top"==e&&i!=l&&(t.top=t.top+l-i,o=!0),"bottom"==e||"top"==e?this.replaceArrow(u-s+n,n,"left"):this.replaceArrow(u-l+i,i,"top"),o&&r.offset(t)},replaceArrow:function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},hide:function(){this.timeout&&clearTimeout(this.timeout);var t=this.$el;return t.removeClass("in"),t.addClass("popover-hidden"),setTimeout(function(){t.detach()},350),t.trigger("hidden"),this.trigger("hide"),this.close(),this},getTargetPosition:function(){var t=this.targetElement,e=o.extend({},t.getBoundingClientRect(),this.$targetElement.offset());return e},getTitle:function(){return this.options.title},arrow:function(){return this.$arrow||(this.$arrow=this.$el.find(".arrow")),this.$arrow}});return u.hoverTimeout=function(t,e,o){var r=setTimeout(function(){r&&e.call(o,t)},n);i(t.target).one("mouseout click",function(){clearTimeout(r),r=null})},u.singleton=function(t,e){t.popover=e,t.listenToOnce(e,"hide",function(){t.popover=null})},u}()},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return"  <div class='invited'>\n    <p><small>"+s((o=null!=(o=e.login||(null!=t?t.login:t))?o:a,typeof o===r?o.call(t,{name:"login",hash:{},data:i}):o))+" is not on Gitter yet.</small></p>\n  </div>\n"},3:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return"      <li>\n        <div class='trpUserDetails__icon'>\n          <i class='octicon octicon-organization'></i>\n        </div>\n        <span>"+s((o=null!=(o=e.company||(null!=t?t.company:t))?o:a,typeof o===r?o.call(t,{name:"company",hash:{},data:i}):o))+"</span>\n      </li>\n"},5:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return"      <li>\n        <div class='trpUserDetails__icon'>\n          <i class='octicon octicon-location'></i>\n        </div>\n        <span>"+s((o=null!=(o=e.location||(null!=t?t.location:t))?o:a,typeof o===r?o.call(t,{name:"location",hash:{},data:i}):o))+"</span>\n      </li>\n"},7:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return"      <li>\n        <div class='trpUserDetails__icon'>\n          <i class='octicon octicon-mail'></i>\n        </div>\n        <a class=\"email\" href=\"mailto:"+s((o=null!=(o=e.email||(null!=t?t.email:t))?o:a,typeof o===r?o.call(t,{name:"email",hash:{},data:i}):o))+'">'+s((o=null!=(o=e.email||(null!=t?t.email:t))?o:a,typeof o===r?o.call(t,{name:"email",hash:{},data:i}):o))+"</a>\n      </li>\n"},9:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return"      <li>\n        <div class='trpUserDetails__icon'>\n          <i class='octicon octicon-link'></i>\n        </div>\n        <a target=\"_blank\" href=\""+s((o=null!=(o=e.blogUrl||(null!=t?t.blogUrl:t))?o:a,typeof o===r?o.call(t,{name:"blogUrl",hash:{},data:i}):o))+'" class="url" rel="nofollow me">'+s((o=null!=(o=e.blog||(null!=t?t.blog:t))?o:a,typeof o===r?o.call(t,{name:"blog",hash:{},data:i}):o))+"</a>\n      </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a="function",s=e.helperMissing,l=this.escapeExpression,u="";return o=e["if"].call(t,null!=t?t.inactive:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+='<div style="float: left"><img src="'+l((r=null!=(r=e.avatarUrl||(null!=t?t.avatarUrl:t))?r:s,typeof r===a?r.call(t,{name:"avatarUrl",hash:{},data:i}):r))+'" class="avatar-l"/></div>\n<div class="trpPopoverDetails">\n  <h1>'+l((r=null!=(r=e.name||(null!=t?t.name:t))?r:s,typeof r===a?r.call(t,{name:"name",hash:{},data:i}):r))+'</h1>\n  <h2><a href="http://github.com/'+l((r=null!=(r=e.login||(null!=t?t.login:t))?r:s,typeof r===a?r.call(t,{name:"login",hash:{},data:i}):r))+'">'+l((r=null!=(r=e.login||(null!=t?t.login:t))?r:s,typeof r===a?r.call(t,{name:"login",hash:{},data:i}):r))+'</a></h3>\n  <div class="vcard-stats">\n      <strong class="vcard-stat-count">'+l((r=null!=(r=e.followers||(null!=t?t.followers:t))?r:s,typeof r===a?r.call(t,{name:"followers",hash:{},data:i}):r))+'</strong>\n      followers &nbsp;\n      <strong class="vcard-stat-count">'+l((r=null!=(r=e.public_repos||(null!=t?t.public_repos:t))?r:s,typeof r===a?r.call(t,{name:"public_repos",hash:{},data:i}):r))+'</strong>\n      repos &nbsp;\n      <strong class="vcard-stat-count">'+l((r=null!=(r=e.following||(null!=t?t.following:t))?r:s,typeof r===a?r.call(t,{name:"following",hash:{},data:i}):r))+'</strong>\n      following &nbsp;\n  </div>\n\n  <ul class="trpUserDetails">\n',o=e["if"].call(t,null!=t?t.company:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+="\n",o=e["if"].call(t,null!=t?t.location:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+="\n",o=e["if"].call(t,null!=t?t.email:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+="\n",o=e["if"].call(t,null!=t?t.blog:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+"  </ul>\n</div>\n"},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'  <button class="trpBtnLightGrey trpButtonSmall" id="button-mention">\n    Mention\n  </button>\n  <a href="'+s((o=null!=(o=e.html_url||(null!=t?t.html_url:t))?o:a,typeof o===r?o.call(t,{name:"html_url",hash:{},data:i}):o))+'" target="_blank" class="trpBtnBlue trpButtonSmall open-in-github">Open in GitHub</a>\n'},3:function(){return'  <button class="trpBtnGreen trpButtonSmall" id="button-onetoone">\n    Chat Privately\n  </button>\n'},5:function(){return'  <button class="trpBtnRed trpButtonSmall" id="button-remove">\n    Remove\n  </button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r="";return o=e["if"].call(t,null!=t?t.mentionable:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(r+=o),o=e["if"].call(t,null!=t?t.chatPrivately:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(r+=o),o=e["if"].call(t,null!=t?t.removable:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r},useData:!0})},function(t,e,n){"use strict";var i=n(6);t.exports=function(){var t={};return i.Behaviors.behaviorsLookup=function(){return t},{register:function(e,n){t[e]=n}}}()},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(){return"<div class=\"'chat-item__content'\">\n  Issue not found. It may not exist or you may not have access to it.\n</div>\n"},3:function(t,e,n,i){var o,r,a=this.lambda,s=this.escapeExpression,l="function",u=e.helperMissing,c='<div class="trpChatAvatar">\n  <span>\n    <div class="trpDisplayPicture--left avatar-s" style="background-image: url('+s(a(null!=(o=null!=t?t.user:t)?o.avatar_url:o,t))+');">\n   </div>\n  </span>\n</div>\n<div class=\'chat-item__content\'>\n  <div class="chat-item__details">\n    <div class="chat-item__from">'+s(a(null!=(o=null!=t?t.user:t)?o.login:o,t))+'</div>\n    <div class="chat-item__time">'+s((r=null!=(r=e.date||(null!=t?t.date:t))?r:u,typeof r===l?r.call(t,{name:"date",hash:{},data:i}):r))+"</div>\n  </div>\n";return o=e["if"].call(t,null!=t?t.body_html:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=o&&(c+=o),c+="</div>\n",o=e["if"].call(t,null!=t?t.assignee:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c},4:function(t,e,n,i){var o,r,a="function",s=e.helperMissing,l='    <div class="chat-item__text">';return r=null!=(r=e.body_html||(null!=t?t.body_html:t))?r:s,o=typeof r===a?r.call(t,{name:"body_html",hash:{},data:i}):r,null!=o&&(l+=o),l+"</div>\n"},6:function(){return'    <div class="chat-item__text missing">No description given.</div>\n'},8:function(t){var e,n=this.lambda,i=this.escapeExpression;return'  <div style="float: right;\n  margin-top: 5px;\n  ">\n  <div class="trpDisplayPicture--left avatar-xxs" style="background-image: url('+i(n(null!=(e=null!=t?t.assignee:t)?e.avatar_url:e,t))+'); vertical-align: middle"></div>\n    <span style="\n    font-size: smaller;\n    vertical-align: middle;\n    color: #AAA;\n    ">'+i(n(null!=(e=null!=t?t.assignee:t)?e.login:e,t))+" is assigned</span>\n  </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r="";return o=e["if"].call(t,null!=t?t.error:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=o&&(r+=o),r},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(){return"Pull Request"},3:function(){return"Issue"},5:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return": "+s((o=null!=(o=e.title||(null!=t?t.title:t))?o:a,typeof o===r?o.call(t,{name:"title",hash:{},data:i}):o))},7:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'<span class="issuePopoverLabel issue '+s((o=null!=(o=e.state||(null!=t?t.state:t))?o:a,typeof o===r?o.call(t,{name:"state",hash:{},data:i}):o))+'">'+s((o=null!=(o=e.state||(null!=t?t.state:t))?o:a,typeof o===r?o.call(t,{name:"state",hash:{},data:i}):o))+"</span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a="function",s=e.helperMissing,l=this.escapeExpression,u='<a href="'+l((r=null!=(r=e.html_url||(null!=t?t.html_url:t))?r:s,typeof r===a?r.call(t,{name:"html_url",hash:{},data:i}):r))+'" target="_blank">\n  ';return o=e["if"].call(t,null!=(o=null!=t?t.pull_request:t)?o.html_url:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=o&&(u+=o),u+=" "+l((r=null!=(r=e.number||(null!=t?t.number:t))?r:s,typeof r===a?r.call(t,{name:"number",hash:{},data:i}):r)),o=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+="\n</a>\n",o=e["if"].call(t,null!=t?t.state:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'<button class="trpBtnLightGrey trpButtonSmall mention">Mention</button><a href="'+s((o=null!=(o=e.html_url||(null!=t?t.html_url:t))?o:a,typeof o===r?o.call(t,{name:"html_url",hash:{},data:i}):o))+'" target="_blank" class="trpBtnBlue trpButtonSmall open-in-github">Open in GitHub</a>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'Please check that:\n<ul>\n  <li><a href="https://github.com/'+s((o=null!=(o=e.repo||(null!=t?t.repo:t))?o:a,typeof o===r?o.call(t,{name:"repo",hash:{},data:i}):o))+"/commit/"+s((o=null!=(o=e.sha||(null!=t?t.sha:t))?o:a,typeof o===r?o.call(t,{name:"sha",hash:{},data:i}):o))+'" target="_blank" class="link">'+s((o=null!=(o=e.repo||(null!=t?t.repo:t))?o:a,typeof o===r?o.call(t,{name:"repo",hash:{},data:i}):o))+"@"+s((o=null!=(o=e.sha||(null!=t?t.sha:t))?o:a,typeof o===r?o.call(t,{name:"sha",hash:{},data:i}):o))+'</a> is a real commit</li>\n  <li>Gitter has <a href="https://github.com/settings/applications" target="_blank" class="link">permission to view it<a></li>\n</ul>\n'},3:function(t,e,n,i){var o,r="";return o=e["if"].call(t,null!=t?t.author:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r},4:function(t,e,n,i){var o,r,a=this.lambda,s=this.escapeExpression,l="function",u=e.helperMissing,c='<div class="trpChatAvatar">\n  <span>\n    <div class="trpDisplayPicture--left avatar-s" style="background-image: url('+s(a(null!=(o=null!=t?t.author:t)?o.avatar_url:o,t))+');">\n   </div>\n  </span>\n</div>\n<div class=\'chat-item__content\'>\n  <div class="chat-item__details">\n    <div class="chat-item__from">'+s(a(null!=(o=null!=t?t.author:t)?o.login:o,t))+'</div>\n    <div class="chat-item__time">'+s((r=null!=(r=e.date||(null!=t?t.date:t))?r:u,typeof r===l?r.call(t,{name:"date",hash:{},data:i}):r))+'</div>\n  </div>\n  <div class="chat-item__text">\n    <p>'+s(a(null!=(o=null!=t?t.files:t)?o.length:o,t))+" file";return o=e.unless.call(t,null!=t?t.isFileLengthSingular:t,{name:"unless",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=" changed. "+s(a(null!=(o=null!=t?t.stats:t)?o.additions:o,t))+" addition",o=e.unless.call(t,null!=t?t.isAdditionsSingular:t,{name:"unless",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+=", "+s(a(null!=(o=null!=t?t.stats:t)?o.deletions:o,t))+" deletion",o=e.unless.call(t,null!=t?t.isDeletionsSingular:t,{name:"unless",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+='.</p>\n    <ul class="file-list">\n',o=e.each.call(t,null!=t?t.files:t,{name:"each",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+="    </ul>\n",o=e["if"].call(t,null!=t?t.firstPatchHtml:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+"  </div>\n</div>\n"},5:function(){return"s"},7:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'      <li><a href="'+s((o=null!=(o=e.blob_url||(null!=t?t.blob_url:t))?o:a,typeof o===r?o.call(t,{name:"blob_url",hash:{},data:i}):o))+'" target="_blank" class="'+s((o=null!=(o=e.status||(null!=t?t.status:t))?o:a,typeof o===r?o.call(t,{name:"status",hash:{},data:i}):o))+'" title="'+s((o=null!=(o=e.fullFilename||(null!=t?t.fullFilename:t))?o:a,typeof o===r?o.call(t,{name:"fullFilename",hash:{},data:i}):o))+'">'+s((o=null!=(o=e.filename||(null!=t?t.filename:t))?o:a,typeof o===r?o.call(t,{name:"filename",hash:{},data:i}):o))+"</a></li>\n"},9:function(t,e,n,i){var o,r,a="function",s=e.helperMissing,l="      ";return r=null!=(r=e.firstPatchHtml||(null!=t?t.firstPatchHtml:t))?r:s,o=typeof r===a?r.call(t,{name:"firstPatchHtml",hash:{},data:i}):r,null!=o&&(l+=o),l+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r="";return o=e["if"].call(t,null!=t?t.error:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=o&&(r+=o),r},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(){return"  Error - Commit Not Found\n"},3:function(t,e,n,i){var o,r="";return o=e["if"].call(t,null!=t?t.commit:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=o&&(r+=o),r},4:function(t){var e,n=this.lambda,i=this.escapeExpression;return"    "+i(n(null!=(e=null!=t?t.commit:t)?e.message:e,t))+"\n"},6:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return"    "+s((o=null!=(o=e.repo||(null!=t?t.repo:t))?o:a,typeof o===r?o.call(t,{name:"repo",hash:{},data:i}):o))+"@"+s((o=null!=(o=e.shortSha||(null!=t?t.shortSha:t))?o:a,typeof o===r?o.call(t,{name:"shortSha",hash:{},data:i}):o))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a="function",s=e.helperMissing,l=this.escapeExpression,u='<a href="'+l((r=null!=(r=e.html_url||(null!=t?t.html_url:t))?r:s,typeof r===a?r.call(t,{name:"html_url",hash:{},data:i}):r))+'" target="_blank">\n';return o=e["if"].call(t,null!=t?t.error:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=o&&(u+=o),u+"</a>"},useData:!0})},function(t,e,n){function i(t,e){var n=e.media;if(n&&n.height&&n.width&&!n["aspect-ratio"])return t.attr("width",n.width),t.attr("height",n.height),t;t.css("top",0).css("left",0).css("width","100%").css("height","100%").css("position","absolute");var i=r("<div>").css("left",0).css("width","100%").css("height",0).css("position","relative").append(t);if(n&&(n.height||n["aspect-ratio"])||i.css("padding-bottom","75%"),n&&(n["aspect-ratio"]?i.css("padding-bottom",Math.round(1e5/n["aspect-ratio"])/1e3+"%"):(n.height&&i.css("height",n.height),n.width&&i.css("width",n.width)),n["max-width"]||n["min-width"])){var o=r("<div>").append(i);
["max-width","min-width"].forEach(function(t){n[t]&&o.css(t,n[t])}),i=o}return i}function o(t){if(t){if(t instanceof Array)return t.length>0?t[0]:void 0;if("object"==typeof t)for(var e in t){var n=t[e];if(n instanceof Array&&n.length>0)return n[0]}}}var r=n(4),a=function(){return{postMessage:function(t,e,n){t=JSON.stringify(t),e=e||"*",n=n||window.parent,window.postMessage&&n.postMessage(t,e.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))},receiveMessage:function(t){function e(e){var n;try{n=JSON.parse(e.data)}catch(i){}t(e,n)}window.postMessage&&(window.addEventListener?window[t?"addEventListener":"removeEventListener"]("message",e,!1):window[t?"attachEvent":"detachEvent"]("onmessage",e))}}}();r.ajaxPrefilter("script",function(t){t.url.indexOf("reader.js")>-1&&(t.cache=!0)}),r.iframely=r.iframely||{},r.iframely.iframes=r.iframely.iframes||{},a.receiveMessage(function(t,e){var n;e&&e.windowId&&(n=r.iframely.iframes[e.windowId])&&r.iframely.setIframeHeight&&"resize"===e.method&&e.height&&r.iframely.setIframeHeight(n,e.height)}),r.iframely.setIframeHeight=function(t,e){var n=t.attr("iframely-wrapped"),i=t.parent();if("undefined"==typeof n){var o=i.attr("style"),r=t.attr("style");o.match("position: relative;")&&o.match("width: 100%;")&&o.match("height: 0px;")&&r.match("height: 100%;")&&r.match("width: 100%;")?(t.attr("iframely-wrapped",!0),n=!0):(t.attr("iframely-wrapped",!1),n=!1)}n?i.css("padding-bottom","").css("height",e):t.css("height",e)},r.iframely.registerIframesIn=function(t){t.find("iframe").each(function(){var t=r(this);t.attr("iframely-registered")||(t.attr("iframely-registered",!0),t.load(function(){var e=r.iframely.iframesCounter=(r.iframely.iframesCounter||0)+1;r.iframely.iframes[e]=t,a.postMessage({method:"register",windowId:e},"*",this.contentWindow)}))})},r.iframely.getPageData=function(t,e,n){"function"==typeof e&&(n=e,e={}),e=e||{},r.ajax({url:r.iframely.defaults.endpoint,dataType:"json",data:{uri:e.url?void 0:t,url:e.url?t:void 0,debug:e.debug,mixAllWithDomainPlugin:e.mixAllWithDomainPlugin,refresh:e.refresh,meta:e.meta,whitelist:e.whitelist,api_key:e.api_key,origin:e.origin,autoplay:e.autoplay,ssl:e.ssl,html5:e.html5,iframe:e.iframe},success:function(t,e,i){n(null,t,i)},error:function(t,e){var i=function(){try{return JSON.parse(t.responseText)}catch(e){}}();n(e,i,t)}})},r.iframely.defaults={endpoint:"//iframely.com/iframely"},r.iframely.get=function(t,e,n){r.ajax({url:t,dataType:"json",data:e,success:function(t,e,i){n(null,t,i)},error:function(t,e,i){var o=function(){try{return JSON.parse(t.responseText)}catch(e){}}();n(o&&o.error||t.status||i.message,o,t)}})};var s={javascript:{test:function(t){return/(text|application)\/javascript/i.test(t.type)&&t.href},generate:function(t){return r("<script>").attr("type",t.type).attr("src",t.href)}},image:{test:function(t){return/^image(\/[\w-]+)?$/i.test(t.type)&&t.href},generate:function(t){var e=r("<img>").attr("src",t.href);return t.title&&e.attr("title",t.title).attr("alt",t.title),e}},mp4video:{test:function(t){return"video/mp4"==t.type||"video/webm"==t.type||"video/ogg"==t.type},generate:function(t,e){var n=e&&e.iframelyData,o=t.rel.indexOf("gifv")>-1,a=t.rel.indexOf("autoplay")>-1||o,l=r("<video"+(o?" loop muted":" controls")+(a?" autoplay":"")+">Your browser does not support HTML5 video.</video>");if(n&&n.links){var u,c,h=t.media;h&&(u=h["aspect-ratio"],u||[["min-width","min-height"],["max-width","max-height"],["width","height"]].forEach(function(t){c=h[t[0]];var e=h[t[1]];c&&e&&(u=c/e)}));var d=r.iframely.filterLinks(n.links,function(t){return t.rel.indexOf("promo")>-1}).length,f=r.iframely.filterLinks(n.links,function(t){if((!d||-1!==t.rel.indexOf("promo"))&&s.image.test(t)&&(t.rel.indexOf("thumbnail")>-1||t.rel.indexOf("image")>-1)&&-1===t.type.indexOf("gif")&&!t.href.match(/\.gif(?:[#\?].*)?$/i)){var e=t.media;if(u&&e&&e.width&&e.height){var n=e.width/e.height;return Math.abs(n-u)<.1}return!0}});f.sort(function(t,e){var n=t.media&&t.media.width,i=e.media&&e.media.width;return n==i?0:n&&i?i-n:n?i?void 0:-1:1}),f.length&&l.attr("poster",f[0].href)}return l.append("<source />").children("source").attr("src",t.href).attr("type",t.type),e&&e.disableSizeWrapper?l:i(l,t)}},flash:{test:function(t){return"application/x-shockwave-flash"===t.type&&t.href},generate:function(t,e){var n=r("<embed>").attr("src",t.href).attr("type","application/x-shockwave-flash");return e&&e.disableSizeWrapper?n:i(n,t)}},iframe:{test:function(t){return"text/html"==t.type&&t.href},generate:function(t,e){var n=r("<iframe>").attr("src",t.href).attr("frameborder","0").attr("allowfullscreen",!0).attr("webkitallowfullscreen",!0).attr("mozallowfullscreen",!0);return e&&e.disableSizeWrapper?n:i(n,t)}},inline:{test:function(t){return"text/html"===t.type&&t.rel.indexOf("inline")>-1&&!t.href&&t.html},generate:function(t){var e;try{e=r(t.html)}catch(n){e=r("<div>").append(t.html)}return e}}};r.iframely.generateLinkElement=function(t,e){e&&e.links&&(e={iframelyData:e});for(var n in s){var i=s[n];if(i.test(t))return i.generate(t,e)}},r.iframely.findBestFittedLink=function(t,e,n){var i=r.iframely.filterLinks(n,function(t){var e=t.media;return e&&e.width&&e.height});if(0==i.length)return o(n);var a=t/e,s=[];i.forEach(function(n){var i,o=n.media.width,r=n.media.height,l=o/r;i=l>a?o/t:r/e,i>1&&(o/=i,r/=i);var u=t*e-o*r;s.push({link:n,scale:i,modScale:i>1?i:1/i,diffSquare:u})});var l,u=s.filter(function(t){return t.scale<=1});u.length>0&&(u.sort(function(t,e){return e.scale-t.scale}),l=u[0]);var c,h=s.filter(function(t){return t.scale>1});h.length>0&&(h.sort(function(t,e){var n=t.diffSquare-t.diffSquare;return 0==n&&(n=t.scale-e.scale),n}),c=h[0]);var d=[l,c].filter(function(t){return t});return d.sort(function(t,e){return t.modScale-e.modScale}),d[0].link},r.iframely.findBestSizedLink=function(t,e,n){var i=r.iframely.filterLinks(n,function(t){var e=t.media;return e&&e.width&&e.height});if(0==i.length)return o(n);var a=[];i.forEach(function(n){var i=n.media.width,o=n.media.height,r=i-t,s=o-e,l=0,u=0;r>0&&s>0&&(l=i*o-t*e),0>r&&0>s&&(u=t*e-i*o),r>0&&0>s&&(l=r*o,u=-s*t),0>r&&s>0&&(l=s*i,u=-r*e),a.push({link:n,overSquare:l,lostSquare:u})});var s=a.filter(function(t){return 0==t.lostSquare});if(s.length>0)return s.sort(function(t,e){return t.overSquare-e.overSquare}),s[0].link;var l=a.filter(function(t){return t.lostSquare>0});return l.sort(function(t,e){return t.lostSquare-e.lostSquare}),l[0].link},r.iframely.filterLinksByRel=function(t,e,n){function i(t){return/^(?:https:)?\/\/.+/i.test(t)}var n=n||{};"string"==typeof t&&(t=[t]);var o=r.iframely.filterLinks(e,function(e){if(n.httpsOnly&&!i(e.href))return!1;for(var o=!1,r=0;!o&&r<t.length;)e.rel.indexOf(t[r])>-1&&(o=!0),r++;return o});return o&&n.httpsFirst&&o.sort(function(t,e){var n=i(t.href),o=i(e.href);return n==o?0:n&&!o?-1:1}),o&&n.returnOne?o.length>0?o[0]:null:o},r.iframely.filterLinks=function(t,e){if(t){if(t instanceof Array)return t.filter(e);if("object"==typeof t){var n=[];for(var i in t){var o=t[i];o instanceof Array&&o.forEach(function(t){e(t)&&n.push(t)})}return n}}return[]},t.exports=r},function(t,e,n){"use strict";function i(t,e){c.iframely.getPageData(t,function(t,n){return t?e(null):void s(n,e)})}function o(t,e){var n=e.filter(function(e){return e.rel.indexOf(t)>=0});if(n.length){if(1==n.length)return n[0];var i=n.filter(function(t){return t.rel.indexOf("responsive")>=0});if(i.length>=1)return i[0];var o=n.filter(function(t){return t.media&&t.media["aspect-ratio"]>0});return o.length>=1?o[0]:n[0]}}function r(t,e){var n=e.filter(function(e){return e.rel.indexOf(t)>=0});if(n.length)return n.sort(function(t,e){var n=Math.abs((t.media&&t.media.height||0)-f),i=Math.abs((e.media&&e.media.height||0)-f);return n-i}),n[0]}function a(t){for(var e=["player","app","reader","survey"],n=0;n<e.length;n++){var i=o(e[n],t);if(i)return i}var a=r("image",t);return a?a:(a=r("thumbnail",t),a?a:void 0)}function s(t,e){var n=a(t.links);if(!n)return e(null);var i=c.iframely.generateLinkElement(n,t),o=n.media&&n.media["aspect-ratio"],r=o&&Math.floor(o*f);e({html:i,maxWidth:r})}function l(t,e){var n=t.match(/https?:\/\/(.+)(\.jpe?g|\.gif|\.png)$/i);u(t)||n?i(t,e):e(null)}function u(t){return d.some(function(e){return t.match(e)})}var c=n(4);n(251);var h=n(2),d=["youtube.com","www.youtube.com","youtu.be","instagram.com","instagr.am","cloudup.com","cl.ly","dl.dropboxusercontent.com","www.dropbox.com/s","codepen.io","gist.github.com","vine.co","goo.gl","twitter.com","soundcloud.com","snd.sc","rd.io","rdio.com","www.mixcloud.com","www.meetup.com","www.dailymotion.com","meetu.ps","open.spotify.com","stream.tv/recorded","photobucket.com","www.slideshare.net","speakerdeck.com","www.behance.net","dribbble.com","vimeo.com","www.flickr.com","flic.kr","500px.com"].map(function(t){if("object"==typeof t)return t;var e=t.replace(/[\.\/]/g,function(t){return"\\"+t[0]});return new RegExp("https?:\\/\\/"+e+"\\/.+")}),f=640,p=h.env("embed");c.iframely.defaults.endpoint=p.basepath+"/"+p.cacheBuster+"/iframely",t.exports={parse:l}},function(t,e,n){"use strict";var i=n(16),o=n(134),r=n(12),a=n(9);t.exports=function(){var t=o.cmd,e=o.room,n=o.gitter;a.filter=function(t){var e,n=t.target||t.srcElement;return"on"===n.getAttribute("data-prevent-keys")?!1:(e="chat-input-textarea"===n.id?"input.chat":"list-search-input"===n.id||n.classList.contains("js-search-input")?"input.search":/^trpChatInput/.test(n.className)?"input.chat.edit":/^(INPUT|TEXTAREA|SELECT)$/.test(n.tagName)?"input.other":"other",a.setScope(e),!0)};var s={backspace:{name:"backspace",scope:"other"},esc:[{name:"chat.escape",scope:"input.chat"},{name:"chat.edit.escape",scope:"input.chat.edit"},{name:"search.escape",scope:"input.search"},{name:"maininput.escape",scope:["input.chat","input.search"]},{name:"input.escape",scope:"input.other"},{name:"document.escape",scope:"other"}],enter:[{name:"search.go",scope:"input.search"},{name:"room.enter",scope:"other"},{name:"chat.compose.auto",scope:"input.chat"}],"shift+enter":[{name:"chat.compose.auto",scope:"input.chat"}],up:[{name:"room.up",scope:"other"},{name:"chat.edit.openLast",scope:"input.chat"},{name:"search.prev",scope:"input.search"}],down:[{name:"room.down",scope:"other"},{name:"search.next",scope:"input.search"}],tab:{name:"maininput.tab.next",scope:["input.chat","input.chat.edit","input.search"]},"+tab":{name:"maininput.tab.prev",scope:["input.chat","input.chat.edit","input.search"]},pageup:"pageUp",pagedown:"pageDown","q, r":{name:"quote",scope:"other"}};s["enter, "+t+"+enter"]=[{name:"chat.send",scope:"input.chat"},{name:"chat.edit.send",scope:"input.chat.edit"}],s[t+"+/, "+t+"+"+n+"+/"]="chat.toggle",s[t+"++f"]="focus.search",s[t+"+"+n+"+c"]="focus.chat",s[t+"+"+n+"+m"]="help.markdown",s[t+"+"+n+"+k"]="help.keyboard",s[t+"+"+e+"+up"]="room.up",s[t+"+"+e+"+down"]="room.down",s[t+"+"+e+"+enter"]="room.enter",r.each("123456789".split(""),function(e){s[t+"+"+n+"+"+e]="room."+e}),s[t+"+"+n+"+0"]="room.10";var l=function(t,e,n){r.isObject(e)&&(n=e.scope,e=e.name),n=n||"all";var o=function(n){a(t,n,function(t,n){i.trigger("keyboard."+e,t,n),i.trigger("keyboard.all",e,t,n)})};r.isArray(n)?r.each(n,o):o(n)};r.each(s,function(t,e){r.isArray(t)?r.each(t,function(t){l(e,t)}):l(e,t)})}()},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'<button class="main">'+s((o=null!=(o=e.message||(null!=t?t.message:t))?o:a,typeof o===r?o.call(t,{name:"message",hash:{},data:i}):o))+'</button><button class="side">mark read</button>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<button class="main">You have more messages in your history. Upgrade your plan to see them &rarr;</button>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i){var o,r,a,s="function",l=e.helperMissing,u=e.blockHelperMissing,c='<div class="modal-header">\n    <div class="trpModalHeader">\n    	';return r=null!=(r=e.customTitle||(null!=t?t.customTitle:t))?r:l,a={name:"customTitle",hash:{},fn:this.noop,inverse:this.program(2,i),data:i},o=typeof r===s?r.call(t,a):r,e.customTitle||(o=u.call(t,o,a)),null!=o&&(c+=o),c+="\n      ",r=null!=(r=e.customTitle||(null!=t?t.customTitle:t))?r:l,a={name:"customTitle",hash:{},fn:this.program(4,i),inverse:this.noop,data:i},o=typeof r===s?r.call(t,a):r,e.customTitle||(o=u.call(t,o,a)),null!=o&&(c+=o),c+='\n    	<div class="trpModalMenu frame-menu-items">\n    		<div class="trpModalClose">\n',r=null!=(r=e.disableClose||(null!=t?t.disableClose:t))?r:l,a={name:"disableClose",hash:{},fn:this.noop,inverse:this.program(6,i),data:i},o=typeof r===s?r.call(t,a):r,e.disableClose||(o=u.call(t,o,a)),null!=o&&(c+=o),c+"      		</div>\n    	</div>\n    </div>\n</div>\n"},2:function(t,e,n,i){var o=e.helperMissing,r=this.escapeExpression;return'<div class="trpModalLogo"><img src=\''+r((e.cdn||t&&t.cdn||o).call(t,"images/logo-mark-blue-32.png",{name:"cdn",hash:{},data:i}))+'\' width="32" height="32"></div>'},4:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'<div class="trpModalTitleHeader">'+s((o=null!=(o=e.title||(null!=t?t.title:t))?o:a,typeof o===r?o.call(t,{name:"title",hash:{},data:i}):o))+"</div>"},6:function(){return'   		     <a class="close"></a>\n'},8:function(t,e,n,i){var o,r='<div class="modal-footer frame-menu-items">\n';return o=e.each.call(t,null!=t?t.menuItems:t,{name:"each",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r+"</div>\n"},9:function(t,e,n,i){var o,r="";return o=e["if"].call(t,null!=t?t.disabled:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.program(12,i),data:i}),null!=o&&(r+=o),r},10:function(t){var e=this.lambda,n=this.escapeExpression;return'  <button class="trpModalButton trpButtonMedium '+n(e(null!=t?t.className:t,t))+' button" data-action="'+n(e(null!=t?t.action:t,t))+'" disabled>'+n(e(null!=t?t.text:t,t))+"</button>\n"},12:function(t){var e=this.lambda,n=this.escapeExpression;return'  <button class="trpModalButton trpButtonMedium '+n(e(null!=t?t.className:t,t))+' button" data-action="'+n(e(null!=t?t.action:t,t))+'">'+n(e(null!=t?t.text:t,t))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a,s="function",l=e.helperMissing,u=e.blockHelperMissing,c="";return r=null!=(r=e.hideHeader||(null!=t?t.hideHeader:t))?r:l,a={name:"hideHeader",hash:{},fn:this.noop,inverse:this.program(1,i),data:i},o=typeof r===s?r.call(t,a):r,e.hideHeader||(o=u.call(t,o,a)),null!=o&&(c+=o),c+='<div class="modal-body">\n\n</div>\n',r=null!=(r=e.hasMenuItems||(null!=t?t.hasMenuItems:t))?r:l,a={name:"hasMenuItems",hash:{},fn:this.program(8,i),inverse:this.noop,data:i},o=typeof r===s?r.call(t,a):r,e.hasMenuItems||(o=u.call(t,o,a)),null!=o&&(c+=o),c},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="trpLoading"></div>'},useData:!0})},function(t){"use strict";t.exports=function(){return function(){return!!navigator.userAgent.match(/(iPhone|iPod|Android|BlackBerry)/)}}()},function(t){"use strict";t.exports=function(){return function(){var t=navigator.platform;return t.indexOf("Mac")>-1?"Mac":t.indexOf("Win")>-1?"Windows":t.indexOf("Linux")>-1?"Linux":void 0}}()},,function(t,e,n){"use strict";var i=n(5),o=n(42),r=n(30),a=n(115),s=n(2),l=n(114);t.exports=function(){var t=i.Collection.extend({model:o.ChatModel,modelName:"chat",url:r.room.channelGenerator("/chatMessages"),queryText:"",getQuery:function(){return{q:this.queryText,lang:s.lang()}},parse:function(t){return t.forEach(function(t){t.burstFinal=!0,t.burstStart=!0}),t},fetchSearch:function(t,e,n){this.queryText=t,this.atBottom=!1,this.fetchLatest({},e,n)}});return a.mixin(t,l),{ChatSearchCollection:t}}()},function(t){"use strict";t.exports=function(){function t(t){var e=(""+t).trim().toLowerCase(),n=e.split(/[\s\'']+/).filter(function(t){return!!t}).filter(function(t,e){return 10>e});return n.map(function(t){return t=t.replace(/\*|\+|\$/g,""),new RegExp("\\b"+t,"i")})}function e(t,e){return e.get?t.map(function(t){return e.get(t)}).filter(function(t){return!!t}):t.map(function(t){return e[t]}).filter(function(t){return!!t})}return function(n){function i(){}var o=n.query,r=n.fields;if(!o)return i;var a=t(o);return function(t){var n=r?e(r,t):[t];return n.some(function(t){return a.every(function(e){return t.match(e)})})}}}()},function(t,e,n){"use strict";var i=n(6),o=n(321),r=n(245);t.exports=function(){var t=i.Behavior.extend({modelEvents:{"change:highlights":"onRender"},onRender:function(){if(this.view.model){var t=this.view.model.get("highlights");this.highlighted&&o.removeHighlights(this.view.el),t&&t.length&&(this.highlighted=!0,o.highlight(this.view.el,t))}}});return r.register("Highlight",t),t}()},,,,,,,function(t,e,n){"use strict";var i=n(100);t.exports=function(){function t(t){return t.$itemViewContainer?t.$itemViewContainer:t.$el}return{events:{keydown:"selectKeydown","mouseover li:not(.divider):visible":"selectMouseOver","click li":"selectClicked"},selectMouseOver:function(e){var n=t(this),i=n.find("li:not(.divider):visible");if(i.length){var o=i.filter(".active"),r=e.currentTarget;o[0]!==r&&(o.removeClass("active"),r.classList.add("active"))}},selectKeydown:function(t){switch(t.keyCode){case 13:return void this.simulateClick();case 38:this.selectPrev();break;case 40:this.selectNext();break;default:return}t.preventDefault(),t.stopPropagation()},selectPrev:function(){this._moveSelect(-1)},selectNext:function(){this._moveSelect(1)},simulateClick:function(){var e=t(this),n=e.find("li:not(.divider):visible.active").first();n.length?n.trigger("click"):(this._moveSelect(0),e.find("li:not(.divider):visible.active").first().trigger("click"))},selectActive:function(){this.simulateClick()},selectClicked:function(t){if(this.collection){var e=t.currentTarget,n=i.get(e,"cid"),o=this.collection.get(n);this.setSelected(o),this.trigger("selectClicked"),this.options.allowClickPropagation||(t.preventDefault(),t.stopPropagation())}},onAfterItemAdded:function(t){this.selectedModel&&t.model.id&&t.model.id==this.selectedModel.id&&t.$el.addClass("selected")},setSelected:function(t){if(this.selectedModel){this.selectedModel.trigger("unselected");var e=this.children.findByModel(this.selectedModel);e&&e.$el.removeClass("selected")}if(this.selectedModel=t,t){t.trigger("selected");var n=this.children.findByModel(t);n.$el.addClass("selected")}this.trigger("selected",t)},getActive:function(){var e=t(this),n=e.find("li.active:not(.divider):visible"),o=n[0];if(o){var r=i.get(o,"cid"),a=this.collection.get(r);return a}},setActive:function(e){if(e){var n=this.children.findByModel(e);if(n&&!n.$el.hasClass("active")){var i=t(this);i.find("li.active:not(.divider):visible").removeClass("active"),n.$el.addClass("active")}}},_moveSelect:function(e){var n=t(this),i=n.find("li:not(.divider):visible");if(i.length){var o=i.filter(".active"),r=i.index(o);if(~r?(r+=e,0>r?r=0:r>=i.length&&(r=i.length-1)):r=0,r!=o){var a=i.eq(r);o.removeClass("active"),a.addClass("active"),a.addClass("focus")}}}}}()},,,,,,,,,,function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i){var o=e.helperMissing,r=this.escapeExpression;return"      "+r((e.widget||t&&t.widget||o).call(t,"avatar",{name:"widget",hash:{user:null!=t?t.fromUser:t},data:i}))+"\n"},3:function(){return'      <div id=\'initial\' style="position:relative;top:-120px; left: 0; height:0;width:0;overflow:hidden"><a name="initial"/>_</a></div>\n'},5:function(t,e,n,i){var o=e.helperMissing,r=this.escapeExpression;return"        <div class='chat-item__time js-chat-item-time chat-item__time--permalinkable'>\n          "+r((e.widget||t&&t.widget||o).call(t,"timeago",{name:"widget",hash:{tooltipFormat:"LLL [<br>(Alt-click to quote)]",locale:null!=t?t.locale:t,lang:null!=t?t.lang:t,time:null!=t?t.sent:t},data:i}))+"\n        </div>\n"},7:function(t,e,n,i){var o=e.helperMissing,r=this.escapeExpression;return"        <div class='chat-item__time js-chat-item-time'>\n          "+r((e.widget||t&&t.widget||o).call(t,"timeago",{name:"widget",hash:{tooltipFormat:"LLL",locale:null!=t?t.locale:t,lang:null!=t?t.lang:t,time:null!=t?t.sent:t},data:i}))+"\n        </div>\n"},9:function(t,e,n,i){var o,r="";return o=e["if"].call(t,null!=t?t.compactView:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.program(12,i),data:i}),null!=o&&(r+=o),r},10:function(){return'          <span class="chat-item__icon--read  js-chat-item-readby"></span>\n'},12:function(){return'          <div class="chat-item__icon--read  js-chat-item-readby"></div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a="function",s=e.helperMissing,l=this.escapeExpression,u="<div class='chat-item__container'>\n  <div class='chat-item__aside'>\n";return o=e["if"].call(t,null!=t?t.fromUser:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+="  </div>\n  <div class='chat-item__content'>\n",o=e["if"].call(t,null!=t?t.initial:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+="    <div class='chat-item__details js-chat-item-details'>\n      <div class='chat-item__from js-chat-item-from'>"+l((r=null!=(r=e.username||(null!=t?t.username:t))?r:s,typeof r===a?r.call(t,{name:"username",hash:{},data:i}):r))+"</div>\n",o=e["if"].call(t,null!=t?t.isPermalinkable:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=o&&(u+=o),o=e["if"].call(t,null!=t?t.readByText:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+="      <div class='chat-item__icon--edit  js-chat-item-edit'></div>\n    </div>\n    <div class='chat-item__text  js-chat-item-text'>\n      ",r=null!=(r=e.html||(null!=t?t.html:t))?r:s,o=typeof r===a?r.call(t,{name:"html",hash:{},data:i}):r,null!=o&&(u+=o),u+"\n    </div>\n  </div>\n</div>\n"},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i){var o=e.helperMissing,r=this.escapeExpression;return"      "+r((e.widget||t&&t.widget||o).call(t,"avatar",{name:"widget",hash:{user:null!=t?t.fromUser:t},data:i}))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=e.helperMissing,s=this.escapeExpression,l="function",u="<div class='chat-item__container--status'>\n  <div class='chat-item__content'>\n";return o=e["if"].call(t,null!=t?t.fromUser:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+="    <div class='chat-item__details'>\n      <div class='chat-item__time'>"+s((e.widget||t&&t.widget||a).call(t,"timeago",{name:"widget",hash:{locale:null!=t?t.locale:t,lang:null!=t?t.lang:t,time:null!=t?t.sent:t},data:i}))+"</div>\n    </div>\n    <div class='chat-item__text  js-chat-item-text'>\n      ",r=null!=(r=e.html||(null!=t?t.html:t))?r:a,o=typeof r===l?r.call(t,{name:"html",hash:{},data:i}):r,null!=o&&(u+=o),u+"\n    </div>\n  </div>\n</div>"},useData:!0})},function(t,e,n){"use strict";var i=n(30);t.exports=function(){return{collapse:function(t){i.userRoom.post("/collapsedItems",{chatId:t},{global:!1})},uncollapse:function(t){i.userRoom["delete"]("/collapsedItems/"+t,{},{global:!1})}}}()},function(t,e,n){"use strict";var i=n(2),o=n(6),r=n(44),a=n(16),s=n(100),l=n(245);t.exports=function(){var t=i.isLoggedIn(),e=o.Behavior.extend({onRender:function(){if(t){var e=this.view.model,n=this.options.unreadItemType;if(e){var i=e.get("id")||e.cid,o=this.$el,l=o[0];o.addClass("model-id-"+i);var u=e.get("unread"),c=e.get("mentioned");u&&r.hasItemBeenMarkedAsRead(n,i)&&(u=!1),o.toggleClass("mention",c),s.set(l,"itemId",i),s.set(l,"mentioned",c),s.set(l,"itemType",n),u&&(o.addClass("unread"),a.trigger("unreadItemDisplayed"))}}}});return l.register("UnreadItems",e),e}()},function(t,e,n){"use strict";var i=n(6),o=n(245);t.exports=function(){var t=i.Behavior.extend({initialize:function(){this.view.model?this.listenTo(this.view.model,"syncStatusChange",this.syncStatusChange):this.listenToOnce(this.view,"render",function(){this.listenTo(this.view.model,"syncStatusChange",this.syncStatusChange)})},syncStatusChange:function(t){this.$el.toggleClass("synced","synced"==t).toggleClass("syncing","syncing"==t).toggleClass("syncerror","syncerror"==t)}});return o.register("SyncStatus",t),t}()},function(t,e,n){"use strict";var i=n(12),o=n(5),r=n(3);t.exports=function(){function t(t,e){this._target=t,this._reverse=e&&e.reverse,this._prevScrollTop=0,this._prevScrollTime=Date.now(),this._nearTop=!1,this._nearBottom=!1,this._scrollHandler=this.scroll.bind(this),this.scrollRateLimited=i.throttle(this.scrollRate.bind(this),100,{leading:!1}),this._contentWrapper=e&&e.contentWrapper,this.enable()}return i.extend(t.prototype,o.Events,{scroll:function(){var t=this._target,e=t.scrollTop,n=t.scrollHeight-t.scrollTop-t.clientHeight,i=this._prevScrollTop,o=this._prevScrollBottom;this._prevScrollTop=e,this._prevScrollBottom=n;var r=i-e,a=o-n,s=t.clientHeight/2,l=s>e,u=s>n;r>0&&l?this.trigger("approaching.top"):a>0&&u&&this.trigger("approaching.bottom"),this._nearTop!=l&&(this._nearTop=l,this.trigger("near.top.changed",l)),this._nearBottom!=u&&(this._nearBottom=u,this.trigger("near.bottom.changed",u)),this.scrollRateLimited()},scrollRate:function(){var t=this._target,e=Date.now(),n=t.scrollTop,i=t.scrollHeight-t.scrollTop-t.clientHeight,o=this._prevScrollTimeRate,r=this._prevScrollTopRate,a=this._prevScrollBottomRate;if(this._prevScrollTopRate=n,this._prevScrollBottomRate=i,this._prevScrollTimeRate=e,o){var s,l,u=r-n,c=a-i,h=e-o;if(u>0){if(n>t.clientHeight)return;return s=u/h,l=n/s,void(600>l&&this.trigger("approaching.top"))}if(c>0){if(i>t.clientHeight)return;s=c/h,l=i/s,600>l&&this.trigger("approaching.bottom")}}},scrollToOrigin:function(){var t=this._target;if(this._reverse){var e=t.scrollHeight-t.clientHeight;t.scrollTop=e}else t.scrollTop=0},enable:function(){var t=this;this._enabled||(r.info("enabling scroll listener"),this._target.addEventListener("scroll",this._scrollHandler,!1),this._enabled=!0,this._contentWrapper&&setTimeout(function(){t._contentWrapper.offsetHeight<t._target.clientHeight&&t.trigger("approaching.top")},10))},disable:function(){this._enabled&&(r.info("disabling scroll listener"),this._target.removeEventListener("scroll",this._scrollHandler,!1),this._enabled=!1)}}),t}()},function(t,e,n){var i,o;!function(r){"use strict";function a(t,e,n){var i,o;return function(){var r=Date.now();i&&i+e>r?(clearTimeout(o),o=setTimeout(function(){i=r,t.apply(n)},e)):(i=r,t.apply(n))}}function s(t,e){return t.bind?t.bind(e):function(){var n=Array.prototype.slice.call(arguments);t.apply(e,n)}}function l(t,e){t||(t={});for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t}function u(t){this._callback=t,this._onModifications=a(function(){this._callback([])},5,this)}function c(t,e,n){this.element=t,this.callback=e,this.context=n,t.addEventListener("load",this,!1),t.addEventListener("error",this,!1)}function h(t){var e=!(1!==t.nodeType||"IMG"!==t.tagName||t.complete||t.getAttribute("width")&&t.getAttribute("height"));return e}function d(t,e){return t.dataset?t.dataset[e]:t.getAttribute("data-"+e)}function f(t,e,n){return t.dataset?void(t.dataset[e]=n):t.setAttribute("data-"+e,n)}function p(t,e){return t.dataset?void delete t.dataset[e]:void t.removeAttribute(attrName)}function m(){var t=v.createElement("fakeelement"),e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in e)if(void 0!==t.style[n])return e[n]}function g(t,e,n){function i(){try{e.apply(r)}finally{o.takeRecords()}}var o=this;n||(n={}),o._eventHandlers={};var r=n.scope||null,u=n.timeout||0;o._transitionInterval=n.timeout||10;var c;c=u?a(i,u):i,o._callback=c,o._findLoadingImages(t),o._mutationCallback=s(o._mutationCallback,o),o.observer=new y(o._mutationCallback);var h=l(n.observers,{attributes:!1,childList:!0,characterData:!1,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1});o.observer.observe(t,h),n.transitions&&(o._transitionEndHandler={target:t,handleEvent:function(t){o.endTransition(t.target),c()}},t.addEventListener(b,o._transitionEndHandler,!1))}u.prototype={observe:function(t){this._target=t,t.addEventListener("DOMSubtreeModified",this._onModifications,!1)},disconnect:function(){this._target&&(this._target.removeEventListener("DOMSubtreeModified",this._onModifications,!1),delete this._target)},takeRecords:function(){var t=this._target;this._target&&(t.removeEventListener("DOMSubtreeModified",this._onModifications,!1),t.addEventListener("DOMSubtreeModified",this._onModifications,!1))}},c.prototype={_detach:function(){this.element&&(this.element.removeEventListener("load",this,!1),this.element.removeEventListener("error",this,!1),this.element=null,this.callback=null,this.context=null)},handleEvent:function(t){this.callback.call(this.context,t,this)}};var v=r.document,y=r.MutationObserver||r.MozMutationObserver||r.WebKitMutationObserver||u,w=0,b=m();return g.prototype={_addListener:function(t){if(!d(t,"gLoadListenerId")){var e=++w;f(t,"gLoadListenerId",e),this._eventHandlers[e]=new c(t,function(t,e){e._detach(),this._callback()},this)}},_removeListener:function(t){var e=d(t,"gLoadListenerId");if(e){p(t,"gLoadListenerId");var n=this._eventHandlers[e];n&&(delete this._eventHandlers[e],n._detach())}},_mutationCallback:function(t){var e=this;t.forEach(function(t){var n;if("childList"===t.type){if(t.addedNodes)for(var i=0;i<t.addedNodes.length;i++)n=t.addedNodes[i],1===n.nodeType&&(n.children.length?e._findLoadingImages(n):h(n)&&e._addListener(n));if(t.removedNodes)for(var o=0;o<t.removedNodes.length;o++)n=t.removedNodes[o],1===n.nodeType&&(n.children.length||"IMG"===n.tagName&&e._removeListener(n))}}),this._callback()},_findLoadingImages:function(t){for(var e=t.querySelectorAll("img"),n=0;n<e.length;n++){var i=e[n];h(i)&&this._addListener(i)}},takeRecords:function(){return this.observer.takeRecords()},startTransition:function(t,e){var n=this,i=n._transitions;i?i.push(t):n._transitions=i=[t],e&&r.setTimeout(function(){n.endTransition(t)},e),1!==i.length||n._transitionTimer||(n._transitionTimer=r.setInterval(n._callback,n._transitionInterval))},endTransition:function(t){var e=this,n=e._transitions;if(n){for(var i=n.length-1;i>=0;i--)n[i]===t&&n.splice(i,1);0===n.length&&(delete e._transitions,r.clearTimeout(e._transitionTimer),delete e._transitionTimer)}},disconnect:function(){if(this.observer.disconnect(),this._transitionEndHandler){var t=this._transitionEndHandler.target;t.removeEventListener(b,this._transitionEndHandler,!1)}r.clearTimeout(self._transitionTimer);var e=this._eventHandlers;Object.keys(e).forEach(function(t){var n=e[t];n&&(delete e[t],n._detach())})}},r.Mutant=g,!0&&n(90)&&(i=[],o=function(){return g}.apply(e,i),!(void 0!==o&&(t.exports=o))),g}(window)},function(t,e){var n,i,o;!function(r,a){"use strict";i=[],n=a,o="function"==typeof n?n.apply(e,i):n,!(void 0!==o&&(t.exports=o))}(this,function(){"use strict";var t=function(){function t(){var t={named:/:([a-z0-9A-Z_-]+):/,smile:/:-?\)/g,scream:/:-o/gi,smirk:/[:;]-?]/g,grinning:/[:;]-?d/gi,stuck_out_tongue_closed_eyes:/x-d/gi,stuck_out_tongue_winking_eye:/[:;]-?p/gi,rage:/:-?[\[@]/g,frowning:/:-?\(/g,sob:/:[']-?\(|:&#x27;\(/g,kissing_heart:/:-?\*/g,wink:/;-?\)/g,pensive:/:-?\//g,confounded:/:-?s/gi,flushed:/:-?\|/g,relaxed:/:-?\$/g,mask:/:-x/gi,heart:/<3|&lt;3/g,broken_heart:/<\/3|&lt;&#x2F;3/g,thumbsup:/:\+1:/g,thumbsdown:/:\-1:/g};return m.ignore_emoticons&&(t={named:/:([a-z0-9A-Z_-]+):/,thumbsup:/:\+1:/g,thumbsdown:/:\-1:/g}),Object.keys(t).map(function(e){return[t[e],e]})}function e(){var t=u.map(function(t){var e=t[0],n=e.source||e;return n=n.replace(/(^|[^\[])\^/g,"$1"),"("+n+")"}).join("|");return new RegExp(t,"gi")}function n(t){return" "===t||"	"===t||"\r"===t||"\n"===t||""===t
}function i(t,e,n){var i=h.createElement(m.emojify_tag_type||"img");m.emojify_tag_type&&"img"!==m.emojify_tag_type?i.setAttribute("class","emoji emoji-"+n):(i.setAttribute("class","emoji"),i.setAttribute("src",m.img_dir+"/"+n+".png")),i.setAttribute("title",":"+n+":"),i.setAttribute("alt",":"+n+":"),i.setAttribute("align","absmiddle"),t.splitText(e.index),t.nextSibling.nodeValue=t.nextSibling.nodeValue.substr(e[0].length,t.nextSibling.nodeValue.length),i.appendChild(t.splitText(e.index)),t.parentNode.insertBefore(i,t.nextSibling)}function o(t){if(t[1]&&t[2]){var e=t[2];if(p[e])return e}else for(var n=3;n<t.length-1;n++)if(t[n])return u[n-2][1]}function r(t,e){return this.config.emojify_tag_type&&"img"!==this.config.emojify_tag_type?"<"+this.config.emojify_tag_type+" title=':"+e+":' alt=':"+e+":' class='emoji emoji-"+e+"'> </"+this.config.emojify_tag_type+">":"<img title=':"+e+":' alt=':"+e+":' class='emoji' src='"+this.config.img_dir+"/"+e+".png' align='absmiddle' />"}function a(){this.lastEmojiTerminatedAt=-1}function s(n,i){if(!n)return n;i||(i=r),u=t(),c=e();var o=new a;return n.replace(c,function(){var t=Array.prototype.slice.call(arguments,0,-2),e=arguments[arguments.length-2],n=arguments[arguments.length-1],r=o.validate(t,e,n);return r?i.apply({config:m},[arguments[0],r]):arguments[0]})}function l(n){u=t(),c=e(),"undefined"==typeof n&&(n=m.only_crawl_id?h.getElementById(m.only_crawl_id):h.body);for(var r,s=m.ignored_tags,l=h.createTreeWalker(n,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,function(t){return 1!==t.nodeType?NodeFilter.FILTER_ACCEPT:s[t.tagName]||t.classList.contains("no-emojify")?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP},!1),d=[];null!==(r=l.nextNode());)d.push(r);d.forEach(function(t){for(var e,n=[],r=new a;null!==(e=c.exec(t.data));)r.validate(e,e.index,e.input)&&n.push(e);for(var s=n.length;s-->0;){var l=o(n[s]);i(t,n[s],l)}})}var u,c,h="undefined"!=typeof window&&window.document,d="+1,-1,100,109,1234,8ball,a,ab,abc,abcd,accept,aerial_tramway,airplane,alarm_clock,alien,ambulance,anchor,angel,anger,angry,anguished,ant,apple,aquarius,aries,arrow_backward,arrow_double_down,arrow_double_up,arrow_down,arrow_down_small,arrow_forward,arrow_heading_down,arrow_heading_up,arrow_left,arrow_lower_left,arrow_lower_right,arrow_right,arrow_right_hook,arrow_up,arrow_up_down,arrow_up_small,arrow_upper_left,arrow_upper_right,arrows_clockwise,arrows_counterclockwise,art,articulated_lorry,astonished,atm,b,baby,baby_bottle,baby_chick,baby_symbol,back,baggage_claim,balloon,ballot_box_with_check,bamboo,banana,bangbang,bank,bar_chart,barber,baseball,basketball,bath,bathtub,battery,bear,bee,beer,beers,beetle,beginner,bell,bento,bicyclist,bike,bikini,bird,birthday,black_circle,black_joker,black_medium_small_square,black_medium_square,black_nib,black_small_square,black_square,black_square_button,blossom,blowfish,blue_book,blue_car,blue_heart,blush,boar,boat,bomb,book,bookmark,bookmark_tabs,books,boom,boot,bouquet,bow,bowling,bowtie,boy,bread,bride_with_veil,bridge_at_night,briefcase,broken_heart,bug,bulb,bullettrain_front,bullettrain_side,bus,busstop,bust_in_silhouette,busts_in_silhouette,cactus,cake,calendar,calling,camel,camera,cancer,candy,capital_abcd,capricorn,car,card_index,carousel_horse,cat,cat2,cd,chart,chart_with_downwards_trend,chart_with_upwards_trend,checkered_flag,cherries,cherry_blossom,chestnut,chicken,children_crossing,chocolate_bar,christmas_tree,church,cinema,circus_tent,city_sunrise,city_sunset,cl,clap,clapper,clipboard,clock1,clock10,clock1030,clock11,clock1130,clock12,clock1230,clock130,clock2,clock230,clock3,clock330,clock4,clock430,clock5,clock530,clock6,clock630,clock7,clock730,clock8,clock830,clock9,clock930,closed_book,closed_lock_with_key,closed_umbrella,cloud,clubs,cn,cocktail,coffee,cold_sweat,collision,computer,confetti_ball,confounded,confused,congratulations,construction,construction_worker,convenience_store,cookie,cool,cop,copyright,corn,couple,couple_with_heart,couplekiss,cow,cow2,credit_card,crocodile,crossed_flags,crown,cry,crying_cat_face,crystal_ball,cupid,curly_loop,currency_exchange,curry,custard,customs,cyclone,dancer,dancers,dango,dart,dash,date,de,deciduous_tree,department_store,diamond_shape_with_a_dot_inside,diamonds,disappointed,disappointed_relieved,dizzy,dizzy_face,do_not_litter,dog,dog2,dollar,dolls,dolphin,donut,door,doughnut,dragon,dragon_face,dress,dromedary_camel,droplet,dvd,e-mail,ear,ear_of_rice,earth_africa,earth_americas,earth_asia,egg,eggplant,eight,eight_pointed_black_star,eight_spoked_asterisk,electric_plug,elephant,email,end,envelope,es,euro,european_castle,european_post_office,evergreen_tree,exclamation,expressionless,eyeglasses,eyes,facepunch,factory,fallen_leaf,family,fast_forward,fax,fearful,feelsgood,feet,ferris_wheel,file_folder,finnadie,fire,fire_engine,fireworks,first_quarter_moon,first_quarter_moon_with_face,fish,fish_cake,fishing_pole_and_fish,fist,five,flags,flashlight,floppy_disk,flower_playing_cards,flushed,foggy,football,fork_and_knife,fountain,four,four_leaf_clover,fr,free,fried_shrimp,fries,frog,frowning,fu,fuelpump,full_moon,full_moon_with_face,game_die,gb,gem,gemini,ghost,gift,gift_heart,girl,globe_with_meridians,goat,goberserk,godmode,golf,grapes,green_apple,green_book,green_heart,grey_exclamation,grey_question,grimacing,grin,grinning,guardsman,guitar,gun,haircut,hamburger,hammer,hamster,hand,handbag,hankey,hash,hatched_chick,hatching_chick,headphones,hear_no_evil,heart,heart_decoration,heart_eyes,heart_eyes_cat,heartbeat,heartpulse,hearts,heavy_check_mark,heavy_division_sign,heavy_dollar_sign,heavy_exclamation_mark,heavy_minus_sign,heavy_multiplication_x,heavy_plus_sign,helicopter,herb,hibiscus,high_brightness,high_heel,hocho,honey_pot,honeybee,horse,horse_racing,hospital,hotel,hotsprings,hourglass,hourglass_flowing_sand,house,house_with_garden,hurtrealbad,hushed,ice_cream,icecream,id,ideograph_advantage,imp,inbox_tray,incoming_envelope,information_desk_person,information_source,innocent,interrobang,iphone,it,izakaya_lantern,jack_o_lantern,japan,japanese_castle,japanese_goblin,japanese_ogre,jeans,joy,joy_cat,jp,key,keycap_ten,kimono,kiss,kissing,kissing_cat,kissing_closed_eyes,kissing_face,kissing_heart,kissing_smiling_eyes,koala,koko,kr,large_blue_circle,large_blue_diamond,large_orange_diamond,last_quarter_moon,last_quarter_moon_with_face,laughing,leaves,ledger,left_luggage,left_right_arrow,leftwards_arrow_with_hook,lemon,leo,leopard,libra,light_rail,link,lips,lipstick,lock,lock_with_ink_pen,lollipop,loop,loudspeaker,love_hotel,love_letter,low_brightness,m,mag,mag_right,mahjong,mailbox,mailbox_closed,mailbox_with_mail,mailbox_with_no_mail,man,man_with_gua_pi_mao,man_with_turban,mans_shoe,maple_leaf,mask,massage,meat_on_bone,mega,melon,memo,mens,metal,metro,microphone,microscope,milky_way,minibus,minidisc,mobile_phone_off,money_with_wings,moneybag,monkey,monkey_face,monorail,moon,mortar_board,mount_fuji,mountain_bicyclist,mountain_cableway,mountain_railway,mouse,mouse2,movie_camera,moyai,muscle,mushroom,musical_keyboard,musical_note,musical_score,mute,nail_care,name_badge,neckbeard,necktie,negative_squared_cross_mark,neutral_face,new,new_moon,new_moon_with_face,newspaper,ng,nine,no_bell,no_bicycles,no_entry,no_entry_sign,no_good,no_mobile_phones,no_mouth,no_pedestrians,no_smoking,non-potable_water,nose,notebook,notebook_with_decorative_cover,notes,nut_and_bolt,o,o2,ocean,octocat,octopus,oden,office,ok,ok_hand,ok_woman,older_man,older_woman,on,oncoming_automobile,oncoming_bus,oncoming_police_car,oncoming_taxi,one,open_file_folder,open_hands,open_mouth,ophiuchus,orange_book,outbox_tray,ox,package,page_facing_up,page_with_curl,pager,palm_tree,panda_face,paperclip,parking,part_alternation_mark,partly_sunny,passport_control,paw_prints,peach,pear,pencil,pencil2,penguin,pensive,performing_arts,persevere,person_frowning,person_with_blond_hair,person_with_pouting_face,phone,pig,pig2,pig_nose,pill,pineapple,pisces,pizza,plus1,point_down,point_left,point_right,point_up,point_up_2,police_car,poodle,poop,post_office,postal_horn,postbox,potable_water,pouch,poultry_leg,pound,pouting_cat,pray,princess,punch,purple_heart,purse,pushpin,put_litter_in_its_place,question,rabbit,rabbit2,racehorse,radio,radio_button,rage,rage1,rage2,rage3,rage4,railway_car,rainbow,raised_hand,raised_hands,raising_hand,ram,ramen,rat,recycle,red_car,red_circle,registered,relaxed,relieved,repeat,repeat_one,restroom,revolving_hearts,rewind,ribbon,rice,rice_ball,rice_cracker,rice_scene,ring,rocket,roller_coaster,rooster,rose,rotating_light,round_pushpin,rowboat,ru,rugby_football,runner,running,running_shirt_with_sash,sa,sagittarius,sailboat,sake,sandal,santa,satellite,satisfied,saxophone,school,school_satchel,scissors,scorpius,scream,scream_cat,scroll,seat,secret,see_no_evil,seedling,seven,shaved_ice,sheep,shell,ship,shipit,shirt,shit,shoe,shower,signal_strength,six,six_pointed_star,ski,skull,sleeping,sleepy,slot_machine,small_blue_diamond,small_orange_diamond,small_red_triangle,small_red_triangle_down,smile,smile_cat,smiley,smiley_cat,smiling_imp,smirk,smirk_cat,smoking,snail,snake,snowboarder,snowflake,snowman,sob,soccer,soon,sos,sound,space_invader,spades,spaghetti,sparkle,sparkler,sparkles,sparkling_heart,speak_no_evil,speaker,speech_balloon,speedboat,squirrel,star,star2,stars,station,statue_of_liberty,steam_locomotive,stew,straight_ruler,strawberry,stuck_out_tongue,stuck_out_tongue_closed_eyes,stuck_out_tongue_winking_eye,sun_with_face,sunflower,sunglasses,sunny,sunrise,sunrise_over_mountains,surfer,sushi,suspect,suspension_railway,sweat,sweat_drops,sweat_smile,sweet_potato,swimmer,symbols,syringe,tada,tanabata_tree,tangerine,taurus,taxi,tea,telephone,telephone_receiver,telescope,tennis,tent,thought_balloon,three,thumbsdown,thumbsup,ticket,tiger,tiger2,tired_face,tm,toilet,tokyo_tower,tomato,tongue,top,tophat,tractor,traffic_light,train,train2,tram,triangular_flag_on_post,triangular_ruler,trident,triumph,trolleybus,trollface,trophy,tropical_drink,tropical_fish,truck,trumpet,tshirt,tulip,turtle,tv,twisted_rightwards_arrows,two,two_hearts,two_men_holding_hands,two_women_holding_hands,u5272,u5408,u55b6,u6307,u6708,u6709,u6e80,u7121,u7533,u7981,u7a7a,uk,umbrella,unamused,underage,unlock,up,us,v,vertical_traffic_light,vhs,vibration_mode,video_camera,video_game,violin,virgo,volcano,vs,walking,waning_crescent_moon,waning_gibbous_moon,warning,watch,water_buffalo,watermelon,wave,wavy_dash,waxing_crescent_moon,waxing_gibbous_moon,wc,weary,wedding,whale,whale2,wheelchair,white_check_mark,white_circle,white_flower,white_large_square,white_medium_small_square,white_medium_square,white_small_square,white_square,white_square_button,wind_chime,wine_glass,wink,wink2,wolf,woman,womans_clothes,womans_hat,womens,worried,wrench,x,yellow_heart,yen,yum,zap,zero,zzz",f=d.split(/,/),p=f.reduce(function(t,e){return t[e]=!0,t},{}),m={emojify_tag_type:null,only_crawl_id:null,img_dir:"images/emoji",ignore_emoticons:!1,ignored_tags:{SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}};return a.prototype={validate:function(t,e,i){function r(){return a.lastEmojiTerminatedAt=u+e,s}var a=this,s=o(t);if(s){var l=t[0],u=l.length;if(0===e)return r();if(i.length===l.length+e)return r();var c=this.lastEmojiTerminatedAt===e;if(c)return r();if(n(i.charAt(e-1)))return r();var h=n(i.charAt(l.length+e));return h&&c?r():void 0}}},{defaultConfig:m,emojiNames:f,setConfig:function(t){Object.keys(m).forEach(function(e){e in t&&(m[e]=t[e])})},replace:s,run:l}}();return t})},function(t){t.exports={target:"webpack",isBrowser:!0}},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return"with "+s((o=null!=(o=e.roomName||(null!=t?t.roomName:t))?o:a,typeof o===r?o.call(t,{name:"roomName",hash:{},data:i}):o))},3:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return"in "+s((o=null!=(o=e.roomName||(null!=t?t.roomName:t))?o:a,typeof o===r?o.call(t,{name:"roomName",hash:{},data:i}):o))},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r="<div class='search-header  u-uppercase'>Rooms &amp; People</div>\n<div class='js-search-rooms'></div>\n<div class='search-header  u-uppercase'>Messages ";return o=e["if"].call(t,null!=t?t.isOneToOne:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=o&&(r+=o),r+"</div>\n<div class='js-search-messages'></div>\n"},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(){return" result-room "},3:function(){return" result-message "},5:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'    <p class="result-detail"><small>'+s((o=null!=(o=e.detail||(null!=t?t.detail:t))?o:a,typeof o===r?o.call(t,{name:"detail",hash:{},data:i}):o))+"  &bull; "+s((e.widget||t&&t.widget||a).call(t,"timeago",{name:"widget",hash:{locale:null!=t?t.locale:t,lang:null!=t?t.lang:t,time:null!=t?t.sent:t},data:i}))+"</small></p>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a,s="function",l=e.helperMissing,u=this.escapeExpression,c=e.blockHelperMissing,h="<div class='result-avatar'>\n  <img src=\""+u((r=null!=(r=e.avatarUrl||(null!=t?t.avatarUrl:t))?r:l,typeof r===s?r.call(t,{name:"avatarUrl",hash:{},data:i}):r))+"\">\n</div>\n<div class='result-content ";return r=null!=(r=e.sent||(null!=t?t.sent:t))?r:l,a={name:"sent",hash:{},fn:this.noop,inverse:this.program(1,i),data:i},o=typeof r===s?r.call(t,a):r,e.sent||(o=c.call(t,o,a)),null!=o&&(h+=o),h+=" ",r=null!=(r=e.sent||(null!=t?t.sent:t))?r:l,a={name:"sent",hash:{},fn:this.program(3,i),inverse:this.noop,data:i},o=typeof r===s?r.call(t,a):r,e.sent||(o=c.call(t,o,a)),null!=o&&(h+=o),h+="'>\n",o=e["if"].call(t,null!=t?t.sent:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(h+=o),h+"  "+u((r=null!=(r=e.text||(null!=t?t.text:t))?r:l,typeof r===s?r.call(t,{name:"text",hash:{},data:i}):r))+"\n</div>\n"},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"Nope, nothing :(\n"},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'Shucks! I got nothing. Why not <a class="js-create-room" href="#">create a room</a>?\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'  <small><a href="'+s((o=null!=(o=e.billingUrl||(null!=t?t.billingUrl:t))?o:a,typeof o===r?o.call(t,{name:"billingUrl",hash:{},data:i}):o))+'" target="_blank">'+s((o=null!=(o=e.orgName||(null!=t?t.orgName:t))?o:a,typeof o===r?o.call(t,{name:"orgName",hash:{},data:i}):o))+" is not on a paid plan. <br>Upgrade to see more results.</a></small>\n"},3:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'  <small><a href="'+s((o=null!=(o=e.billingUrl||(null!=t?t.billingUrl:t))?o:a,typeof o===r?o.call(t,{name:"billingUrl",hash:{},data:i}):o))+'" target="_blank">Upgrade to see more results.</a></small>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r="<div class='result-content result-message'>\n";return o=e["if"].call(t,null!=t?t.orgName:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=o&&(r+=o),r+"</div>\n"},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<i class="js-activate-search search__toggle octicon octicon-search"></i>\n<div class=\'search-input\'>\n  <i class="js-search-icon search-input__icon octicon octicon-search"></i>\n  <i class="js-search-clear-icon search-input__clear icon-cancel-circle"></i>\n  <input type="search" class=\'js-search-input search-input-field\' placeholder=\'Search...\' />\n</div>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'      <a href="'+s((o=null!=(o=e.html_url||(null!=t?t.html_url:t))?o:a,typeof o===r?o.call(t,{name:"html_url",hash:{},data:i}):o))+'/issues" target="_blank"><strong class="vcard-stat-count">'+s((o=null!=(o=e.open_issues||(null!=t?t.open_issues:t))?o:a,typeof o===r?o.call(t,{name:"open_issues",hash:{},data:i}):o))+"</strong>\n      issues</a>&nbsp;\n"},3:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'        <li class="github-wiki"><a href="'+s((o=null!=(o=e.html_url||(null!=t?t.html_url:t))?o:a,typeof o===r?o.call(t,{name:"html_url",hash:{},data:i}):o))+'/wiki" target="_blank">View the wiki</a></li>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a="function",s=e.helperMissing,l=this.escapeExpression,u=this.lambda,c='<div class="trpRepoInfoContainer">\n  <h1>'+l((r=null!=(r=e.name||(null!=t?t.name:t))?r:s,typeof r===a?r.call(t,{name:"name",hash:{},data:i}):r))+"</h1>\n  <p>"+l((r=null!=(r=e.description||(null!=t?t.description:t))?r:s,typeof r===a?r.call(t,{name:"description",hash:{},data:i}):r))+" <small>"+l((r=null!=(r=e.language||(null!=t?t.language:t))?r:s,typeof r===a?r.call(t,{name:"language",hash:{},data:i}):r))+'</small></p>\n  <p>by <a href="http://github.com/'+l(u(null!=(o=null!=t?t.owner:t)?o.login:o,t))+'">'+l(u(null!=(o=null!=t?t.owner:t)?o.login:o,t))+'</a></p>\n  <div class="vcard-stats">\n';return o=e["if"].call(t,null!=t?t.has_issues:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+='      <a href="'+l((r=null!=(r=e.html_url||(null!=t?t.html_url:t))?r:s,typeof r===a?r.call(t,{name:"html_url",hash:{},data:i}):r))+'/watchers" target="_blank"><strong class="vcard-stat-count">'+l((r=null!=(r=e.subscribers_count||(null!=t?t.subscribers_count:t))?r:s,typeof r===a?r.call(t,{name:"subscribers_count",hash:{},data:i}):r))+'</strong>\n      watchers</a>&nbsp;\n      <strong class="vcard-stat-count">'+l((r=null!=(r=e.stargazers_count||(null!=t?t.stargazers_count:t))?r:s,typeof r===a?r.call(t,{name:"stargazers_count",hash:{},data:i}):r))+"</strong>\n      stars &nbsp;\n  </div>\n",o=e["if"].call(t,null!=t?t.has_wiki:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+"\n</div>\n"},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i,o){var r,a="function",s=e.helperMissing,l=this.escapeExpression,u=this.lambda;return'<span data-link-type="commit" data-commit-sha="'+l((r=null!=(r=e.id||(null!=t?t.id:t))?r:s,typeof r===a?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-commit-repo="'+l(u(null!=o[1]?o[1].repo:o[1],t))+'" class="commit">'+l((r=null!=(r=e.short_message||(null!=t?t.short_message:t))?r:s,typeof r===a?r.call(t,{name:"short_message",hash:{},data:i}):r))+"</span> "},3:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return"and "+s((o=null!=(o=e.hidden_commit_count||(null!=t?t.hidden_commit_count:t))?o:a,typeof o===r?o.call(t,{name:"hidden_commit_count",hash:{},data:i}):o))+" more "},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,o){var r,a,s=e.helperMissing,l=this.escapeExpression,u=this.lambda,c="function",h='<div class="github-push">\n  <i class=\'octicon octicon-repo-push\'></i>\n  <div class="activity-time">'+l((e.widget||t&&t.widget||s).call(t,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=t?t.sent:t},data:i}))+'</div>\n\n  <div class="gtrActivityItemText">\n    <p class="activity-commit">\n      <span class=\'mention\' data-link-type="mention" data-screen-name="'+l(u(null!=(r=null!=(r=null!=t?t.payload:t)?r.pusher:r)?r.name:r,t))+'">'+l(u(null!=(r=null!=(r=null!=t?t.payload:t)?r.pusher:r)?r.name:r,t))+"</span> on "+l((a=null!=(a=e.branch_name||(null!=t?t.branch_name:t))?a:s,typeof a===c?a.call(t,{name:"branch_name",hash:{},data:i}):a))+'\n    </p>\n    <p class="activity-commit">\n      ';return r=e.each.call(t,null!=t?t.commits:t,{name:"each",hash:{},fn:this.program(1,i,o),inverse:this.noop,data:i}),null!=r&&(h+=r),r=e["if"].call(t,null!=t?t.hidden_commit_count:t,{name:"if",hash:{},fn:this.program(3,i,o),inverse:this.noop,data:i}),null!=r&&(h+=r),h+'<a href="'+l(u(null!=(r=null!=t?t.payload:t)?r.compare:r,t))+'" target="_blank" style="opacity: 0.6">(compare)</a>\n    </p>\n  </div>\n</div>\n'},useData:!0,useDepths:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r=this.lambda,a=this.escapeExpression,s=e.helperMissing;return'<div class="github-issue github-issue-'+a(r(null!=(o=null!=t?t.payload:t)?o.action:o,t))+'">\n  <i class=\'octicon octicon-issue-opened\'></i>\n  <div class="activity-time">'+a((e.widget||t&&t.widget||s).call(t,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=t?t.sent:t},data:i}))+'</div>\n\n  <span class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+a(r(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'">'+a(r(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+"</span> "+a(r(null!=(o=null!=t?t.payload:t)?o.action:o,t))+' <span class="issue '+a(r(null!=(o=null!=(o=null!=t?t.payload:t)?o.issue:o)?o.state:o,t))+'" data-link-type="issue" data-issue="'+a(r(null!=(o=null!=(o=null!=t?t.payload:t)?o.issue:o)?o.number:o,t))+'" data-issue-repo="'+a(r(null!=(o=null!=(o=null!=t?t.payload:t)?o.repository:o)?o.full_name:o,t))+'">#'+a(r(null!=(o=null!=(o=null!=t?t.payload:t)?o.issue:o)?o.number:o,t))+'</span></span>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression,s=this.lambda;return'<div class="github-comment">\n  <i class="octicon octicon-comment"></i>\n  <div class="activity-time">'+a((e.widget||t&&t.widget||r).call(t,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=t?t.sent:t},data:i}))+'</div>\n\n  <span class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'">'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'</span> commented <span class="issue '+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.issue:o)?o.state:o,t))+'" data-link-type="issue" data-issue="'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.issue:o)?o.number:o,t))+'" data-issue-repo="'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.repository:o)?o.full_name:o,t))+'">#'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.issue:o)?o.number:o,t))+'</span></span>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression,s=this.lambda;return'<div class="github-comment">\n  <i class="octicon octicon-comment"></i>\n  <div class="activity-time">'+a((e.widget||t&&t.widget||r).call(t,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=t?t.sent:t},data:i}))+'</div>\n\n  <span class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+a(s(null!=(o=null!=t?t.meta:t)?o.user:o,t))+'">'+a(s(null!=(o=null!=t?t.meta:t)?o.user:o,t))+'</span> commented on <span data-link-type="commit" data-commit-sha="'+a(s(null!=(o=null!=t?t.commit:t)?o.id:o,t))+'" data-commit-repo="'+a(s(null!=(o=null!=t?t.meta:t)?o.repo:o,t))+'" class="commit">'+a(s(null!=(o=null!=t?t.commit:t)?o.short_sha:o,t))+'</span></span>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression,s=this.lambda;return'<div class="github-pull-request">\n  <i class=\'octicon octicon-git-pull-request\'></i>\n  <div class="activity-time">'+a((e.widget||t&&t.widget||r).call(t,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=t?t.sent:t},data:i}))+'</div>\n\n  <span class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'">'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+"</span> "+a(s(null!=(o=null!=t?t.payload:t)?o.action:o,t))+' <a class="issue '+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.pull_request:o)?o.state:o,t))+'" href="'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.pull_request:o)?o.html_url:o,t))+'" target="_blank" data-link-type="issue" data-issue="'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.pull_request:o)?o.number:o,t))+'" data-issue-repo="'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.repository:o)?o.full_name:o,t))+'">#'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.pull_request:o)?o.number:o,t))+'</a></span>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=e.helperMissing,s=this.escapeExpression,l=this.lambda,u="function";return'<div class="github-wiki">\n  <i class=\'octicon octicon-book\'></i>\n  <div class="activity-time">'+s((e.widget||t&&t.widget||a).call(t,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=t?t.sent:t},data:i}))+'</div>\n\n  <span class="gtrActivityItemText"><a href="https://github.com/'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'" target="_blank"><span class=\'mention\' data-link-type="mention" data-screen-name="'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'">'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'</span></a> updated the wiki</span><br>\n  <span class="gtrActivityItemText activity-detail"><a href="'+s((r=null!=(r=e.wiki_url||(null!=t?t.wiki_url:t))?r:a,typeof r===u?r.call(t,{name:"wiki_url",hash:{},data:i}):r))+'" target="_blank">'+s((r=null!=(r=e.wiki_page||(null!=t?t.wiki_page:t))?r:a,typeof r===u?r.call(t,{name:"wiki_page",hash:{},data:i}):r))+'</a></span>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression,s=this.lambda;return'<div class="github-fork">\n  <i class=\'octicon octicon-repo-forked\'></i>\n  <div class="activity-time">'+a((e.widget||t&&t.widget||r).call(t,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=t?t.sent:t},data:i}))+'</div>\n  <span class="gtrActivityItemText"><a href="https://github.com/'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'" target="_blank"><span class=\'mention\' data-link-type="mention" data-screen-name="'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'">'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'</span></a> forked<br>\n  <span class="activity-detail"> <a href="'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.forkee:o)?o.html_url:o,t))+'" target="_blank">'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.forkee:o)?o.full_name:o,t))+'</a></span></span>\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression,s=this.lambda;return'<div class="github-member-add">\n  <i class=\'octicon octicon-person\'></i>\n  <div class="activity-time">'+a((e.widget||t&&t.widget||r).call(t,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=t?t.sent:t},data:i}))+'</div>\n  <span class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.member:o)?o.login:o,t))+'">'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.member:o)?o.login:o,t))+"</span> "+a(s(null!=(o=null!=t?t.payload:t)?o.action:o,t))+' as member</span>\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression,s=this.lambda;return'<div class="github-public">\n  <i class=\'octicon octicon-repo\'></i>\n  <div class="activity-time">'+a((e.widget||t&&t.widget||r).call(t,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=t?t.sent:t},data:i}))+'</div>\n\n  <span class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'">'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'</span> made <a href="'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.repository:o)?o.html_url:o,t))+'" target="_blank">'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.repository:o)?o.full_name:o,t))+'</a> public</span>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression,s=this.lambda;return'<div class="github-watch">\n  <i class=\'octicon octicon-star\'></i>\n  <div class="activity-time">'+a((e.widget||t&&t.widget||r).call(t,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=t?t.sent:t},data:i}))+'</div>\n  <span class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'">'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'</span> starred <a href="'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.repository:o)?o.html_url:o,t))+'" target="_blank">'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.repository:o)?o.full_name:o,t))+"</a></span>\n</div>\n"},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t){var e,n=this.lambda,i=this.escapeExpression;return"      "+i(n(null!=(e=null!=t?t.first_commit:t)?e.message:e,t))+' <a href="'+i(n(null!=(e=null!=t?t.first_commit:t)?e.url:e,t))+'" target="_blank" style="opacity: 0.6">(compare)</a>\n'},3:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return"      "+s((o=null!=(o=e.commits_count||(null!=t?t.commits_count:t))?o:a,typeof o===r?o.call(t,{name:"commits_count",hash:{},data:i}):o))+" commits\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression,s=this.lambda,l='<div class="bitbucket">\n  <img src="/_s/l/images/icon-bitbucket@2x.png" width="16" height="16">\n  <div class="activity-time">'+a((e.widget||t&&t.widget||r).call(t,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=t?t.sent:t},data:i}))+'</div>\n\n  <span class="gtrActivityItemText"><a href="https://bitbucket.com/'+a(s(null!=(o=null!=t?t.meta:t)?o.user:o,t))+'" target="_blank">'+a(s(null!=(o=null!=t?t.meta:t)?o.user:o,t))+'</a> pushed to <a href="https://bitbucket.org/'+a(s(null!=(o=null!=t?t.meta:t)?o.repo:o,t))+'" target="_blank">'+a(s(null!=(o=null!=t?t.meta:t)?o.repo:o,t))+'</a><br>\n    <span class="activity-commit">\n';return o=e["if"].call(t,null!=t?t.is_single_commit:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=o&&(l+=o),l+'    </span>\n  </span>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t){var e,n=this.lambda,i=this.escapeExpression;return'to <span class=\'mention\' data-link-type="mention" data-screen-name="'+i(n(null!=(e=null!=t?t.meta:t)?e.assignee:e,t))+'">'+i(n(null!=(e=null!=t?t.meta:t)?e.assignee:e,t))+"</span>"
},3:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return s((o=null!=(o=e.context||(null!=t?t.context:t))?o:a,typeof o===r?o.call(t,{name:"context",hash:{},data:i}):o))},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression,s=this.lambda,l='<div class="huboard">\n  <div class="service-sprite huboard-logo"></div>\n  <div class="activity-time">'+a((e.widget||t&&t.widget||r).call(t,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=t?t.sent:t},data:i}))+'</div>\n\n  <span class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+a(s(null!=(o=null!=t?t.meta:t)?o.user:o,t))+'">'+a(s(null!=(o=null!=t?t.meta:t)?o.user:o,t))+"</span> "+a(s(null!=(o=null!=t?t.meta:t)?o.action:o,t))+' <span class="issue" data-link-type="issue" data-issue="'+a(s(null!=(o=null!=t?t.meta:t)?o.number:o,t))+'" data-issue-repo="'+a(s(null!=(o=null!=t?t.meta:t)?o.repo:o,t))+'">#'+a(s(null!=(o=null!=t?t.meta:t)?o.number:o,t))+"</span> ";return o=e["if"].call(t,null!=(o=null!=t?t.meta:t)?o.assignee:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=o&&(l+=o),l+'</span>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a="function",s=e.helperMissing,l=this.escapeExpression,u=this.lambda;return'<div class="build-'+l((r=null!=(r=e.build_status||(null!=t?t.build_status:t))?r:s,typeof r===a?r.call(t,{name:"build_status",hash:{},data:i}):r))+'">\n  <div class="activity-time">'+l((e.widget||t&&t.widget||s).call(t,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=t?t.sent:t},data:i}))+'</div>\n\n  <span class="gtrActivityItemText">Jenkins <a href="'+l(u(null!=(o=null!=(o=null!=t?t.payload:t)?o.build:o)?o.full_url:o,t))+'" target="_blank">'+l(u(null!=(o=null!=t?t.payload:t)?o.name:o,t))+"</a> "+l((r=null!=(r=e.build_status||(null!=t?t.build_status:t))?r:s,typeof r===a?r.call(t,{name:"build_status",hash:{},data:i}):r))+'</span>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a="function",s=e.helperMissing,l=this.escapeExpression,u=this.lambda;return'<div class="build-'+l((r=null!=(r=e.build_status||(null!=t?t.build_status:t))?r:s,typeof r===a?r.call(t,{name:"build_status",hash:{},data:i}):r))+'">\n  <div class="service-sprite travis-logo"></div>\n  <div class="activity-time">'+l((e.widget||t&&t.widget||s).call(t,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=t?t.sent:t},data:i}))+'</div>\n\n  <span class="gtrActivityItemText">Travis <a href="'+l(u(null!=(o=null!=t?t.payload:t)?o.compare_url:o,t))+'" target="_blank">'+l(u(null!=(o=null!=(o=null!=t?t.payload:t)?o.repository:o)?o.owner_name:o,t))+"/"+l(u(null!=(o=null!=(o=null!=t?t.payload:t)?o.repository:o)?o.name:o,t))+"</a> <small>("+l(u(null!=(o=null!=t?t.payload:t)?o.branch:o,t))+')</small> <a href="'+l(u(null!=(o=null!=t?t.payload:t)?o.build_url:o,t))+'" target="_blank">'+l((r=null!=(r=e.build_status||(null!=t?t.build_status:t))?r:s,typeof r===a?r.call(t,{name:"build_status",hash:{},data:i}):r))+'</a></span>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t){var e,n=this.lambda,i=this.escapeExpression;return" "+i(n(null!=(e=null!=(e=null!=t?t.payload:t)?e.attributes:e)?e.title:e,t))+" "},3:function(t){var e,n=this.lambda,i=this.escapeExpression;return" "+i(n(null!=(e=null!=(e=null!=(e=null!=t?t.payload:t)?e.attributes:e)?e.item:e)?e.title:e,t))+" "},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=e.helperMissing,s=this.escapeExpression,l=this.lambda,u="function",c='<div class="sprintly">\n  <div class="service-sprite sprintly-logo"></div>\n  <div class="activity-time">'+s((e.widget||t&&t.widget||a).call(t,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=t?t.sent:t},data:i}))+'</div>\n\n  <span class="gtrActivityItemText">'+s(l(null!=(o=null!=(o=null!=(o=null!=t?t.payload:t)?o.attributes:o)?o.created_by:o)?o.first_name:o,t))+" "+s(l(null!=(o=null!=(o=null!=(o=null!=t?t.payload:t)?o.attributes:o)?o.created_by:o)?o.last_name:o,t))+" "+s((r=null!=(r=e.sprintly_action||(null!=t?t.sprintly_action:t))?r:a,typeof r===u?r.call(t,{name:"sprintly_action",hash:{},data:i}):r))+'<br>\n    <div class="activity-detail"><a href="'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.attributes:o)?o.short_url:o,t))+'" target="_blank">\n      ';return o=e["if"].call(t,null!=(o=null!=(o=null!=t?t.payload:t)?o.attributes:o)?o.title:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+="\n      ",o=e["if"].call(t,null!=(o=null!=(o=null!=(o=null!=t?t.payload:t)?o.attributes:o)?o.item:o)?o.title:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+'\n    </a></div>\n  </span>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t){var e,n=this.lambda,i=this.escapeExpression;return"      <br>\n      <span>("+i(n(null!=(e=null!=(e=null!=(e=null!=(e=null!=t?t.payload:t)?e.action:e)?e.data:e)?e.listBefore:e)?e.name:e,t))+" &rarr; "+i(n(null!=(e=null!=(e=null!=(e=null!=(e=null!=t?t.payload:t)?e.action:e)?e.data:e)?e.listAfter:e)?e.name:e,t))+")</span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a="function",s=e.helperMissing,l=this.escapeExpression,u=this.lambda,c='<div class="trello-card-'+l((r=null!=(r=e.trello_action||(null!=t?t.trello_action:t))?r:s,typeof r===a?r.call(t,{name:"trello_action",hash:{},data:i}):r))+'">\n  <img src="/_s/l/images/icon-trello@2x.png" width="16" height="16">\n  <div class="activity-time">'+l((e.widget||t&&t.widget||s).call(t,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=t?t.sent:t},data:i}))+'</div>\n\n  <span class="gtrActivityItemText">'+l(u(null!=(o=null!=(o=null!=(o=null!=t?t.payload:t)?o.action:o)?o.memberCreator:o)?o.fullName:o,t))+" "+l((r=null!=(r=e.trello_action||(null!=t?t.trello_action:t))?r:s,typeof r===a?r.call(t,{name:"trello_action",hash:{},data:i}):r))+'<br>\n    <div class="activity-detail">\n    <a href="https://trello.com/c/'+l(u(null!=(o=null!=(o=null!=(o=null!=(o=null!=t?t.payload:t)?o.action:o)?o.data:o)?o.card:o)?o.shortLink:o,t))+'" target="_blank">'+l(u(null!=(o=null!=(o=null!=(o=null!=(o=null!=t?t.payload:t)?o.action:o)?o.data:o)?o.card:o)?o.name:o,t))+"</a>\n";return o=e["if"].call(t,null!=(o=null!=(o=null!=(o=null!=t?t.payload:t)?o.action:o)?o.data:o)?o.listBefore:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(c+=o),c+'  </div>\n  </span>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=this.lambda,s=this.escapeExpression,l=e.helperMissing,u="function",c='<div class="prerendered '+s(a(null!=(o=null!=t?t.meta:t)?o.errorLevel:o,t))+'">\n  <div class="service-sprite '+s(a(null!=(o=null!=t?t.meta:t)?o.service:o,t))+"-"+s(a(null!=(o=null!=t?t.meta:t)?o.icon:o,t))+'"></div>\n  <div class="activity-time">'+s((e.widget||t&&t.widget||l).call(t,"timeago",{name:"widget",hash:{position:"left",compact:!0,time:null!=t?t.sent:t},data:i}))+'</div>\n  <span class="gtrActivityItemText">';return r=null!=(r=e.html||(null!=t?t.html:t))?r:l,o=typeof r===u?r.call(t,{name:"html",hash:{},data:i}):r,null!=o&&(c+=o),c+"</span>\n</div>\n"},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<ul class="gtrActivityList" id="activity-events">\n</ul>\n'},useData:!0})},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(t,e,n,i){var o,r,a="function",s=e.helperMissing,l=this.escapeExpression,u='<a role="menuitem" tabindex="-1" href="'+l((r=null!=(r=e.href||(null!=t?t.href:t))?r:s,typeof r===a?r.call(t,{name:"href",hash:{},data:i}):r))+'" ';return o=e["if"].call(t,null!=t?t.target:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+">"+l((r=null!=(r=e.title||(null!=t?t.title:t))?r:s,typeof r===a?r.call(t,{name:"title",hash:{},data:i}):r))+"</a>\n"},2:function(t,e,n,i){var o,r="function",a=e.helperMissing,s=this.escapeExpression;return'target="'+s((o=null!=(o=e.target||(null!=t?t.target:t))?o:a,typeof o===r?o.call(t,{name:"target",hash:{},data:i}):o))+'"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o;return o=e.unless.call(t,null!=t?t.divider:t,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o?o:""},useData:!0})},,,,,,,function(t){"use strict";t.exports=function(){function t(t,e,n){var i=document.createElement("em");i.classList.add("highlight"),i.textContent=e,t.splitText(n),t.nextSibling.nodeValue=t.nextSibling.nodeValue.substr(e.length,t.nextSibling.nodeValue.length),i.appendChild(t.splitText(n)),t.parentNode.insertBefore(i,t.nextSibling)}function e(e,n){for(var i,o=document.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,function(t){return 1!==t.nodeType?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP},!1),r=[];null!==(i=o.nextNode());)r.push(i);var a=n.map(function(t){var e=t.replace(/(^|[^\[])\^/g,"$1");return"("+e+")"}).join("|"),s=new RegExp(a,"gi");r.forEach(function(e){for(var n,i,o=[];null!==(n=s.exec(e.data));)o.push(n);for(var r=o.length;r-->0;)n=o[r],t(e,n[0],n.index,i)})}function n(t){for(var e=t.querySelectorAll("em.highlight"),n=0;n<e.length;++n){var i=e[n],o=document.createTextNode(i.textContent);i.parentNode.replaceChild(o,i)}}return{highlight:e,removeHighlights:n}}()},function(t,e,n){var i=n(10);t.exports=(i["default"]||i).template({1:function(){return'<div class="popover-footer trpBodySmall">\n  <div class="popover-footer-content"></div>\n</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r='<div>\n  <div class="arrow"></div>\n  <div class="popover-inner">\n    <h5 class="popover-title"></h5>\n    <div class="popover-content"></div>\n  </div>\n</div>\n';return o=e["if"].call(t,null!=t?t.footerView:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r},useData:!0})}]);